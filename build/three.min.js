(function(h,ha){"object"===typeof exports&&"undefined"!==typeof module?ha(exports):"function"===typeof define&&define.amd?define(["exports"],ha):ha(h.THREE={})})(this,function(h){function ha(c,a,b){var d=c[0];if(0>=d||0<d)return c;var e=a*b,g=Zb[e];void 0===g&&(g=new Float32Array(e),Zb[e]=g);if(0!==a)for(d.toArray(g,0),d=1,e=0;d!==a;++d)e+=b,c[d].toArray(g,e);return g}function $b(c,a){var b=ac[a];void 0===b&&(b=new Int32Array(a),ac[a]=b);for(var d=0;d!==a;++d)b[d]=c.allocTextureUnit();return b}function Ud(c,
a){c.uniform1f(this.addr,a)}function Vd(c,a){c.uniform1i(this.addr,a)}function Wd(c,a){void 0===a.x?c.uniform2fv(this.addr,a):c.uniform2f(this.addr,a.x,a.y)}function Xd(c,a){void 0!==a.x?c.uniform3f(this.addr,a.x,a.y,a.z):void 0!==a.r?c.uniform3f(this.addr,a.r,a.g,a.b):c.uniform3fv(this.addr,a)}function Yd(c,a){void 0===a.x?c.uniform4fv(this.addr,a):c.uniform4f(this.addr,a.x,a.y,a.z,a.w)}function Zd(c,a){c.uniformMatrix2fv(this.addr,!1,a.elements||a)}function $d(c,a){void 0===a.elements?c.uniformMatrix3fv(this.addr,
!1,a):(bc.set(a.elements),c.uniformMatrix3fv(this.addr,!1,bc))}function ae(c,a){void 0===a.elements?c.uniformMatrix4fv(this.addr,!1,a):(cc.set(a.elements),c.uniformMatrix4fv(this.addr,!1,cc))}function be(c,a,b){var d=b.allocTextureUnit();c.uniform1i(this.addr,d);b.setTexture2D(a||dc,d)}function ce(c,a,b){var d=b.allocTextureUnit();c.uniform1i(this.addr,d);b.setTextureCube(a||ec,d)}function fc(c,a){c.uniform2iv(this.addr,a)}function gc(c,a){c.uniform3iv(this.addr,a)}function hc(c,a){c.uniform4iv(this.addr,
a)}function de(c){switch(c){case 5126:return Ud;case 35664:return Wd;case 35665:return Xd;case 35666:return Yd;case 35674:return Zd;case 35675:return $d;case 35676:return ae;case 35678:case 36198:return be;case 35680:return ce;case 5124:case 35670:return Vd;case 35667:case 35671:return fc;case 35668:case 35672:return gc;case 35669:case 35673:return hc}}function ee(c,a){c.uniform1fv(this.addr,a)}function fe(c,a){c.uniform1iv(this.addr,a)}function ge(c,a){c.uniform2fv(this.addr,ha(a,this.size,2))}function he(c,
a){c.uniform3fv(this.addr,ha(a,this.size,3))}function ie(c,a){c.uniform4fv(this.addr,ha(a,this.size,4))}function je(c,a){c.uniformMatrix2fv(this.addr,!1,ha(a,this.size,4))}function ke(c,a){c.uniformMatrix3fv(this.addr,!1,ha(a,this.size,9))}function le(c,a){c.uniformMatrix4fv(this.addr,!1,ha(a,this.size,16))}function me(c,a,b){var d=a.length,e=$b(b,d);c.uniform1iv(this.addr,e);for(c=0;c!==d;++c)b.setTexture2D(a[c]||dc,e[c])}function ne(c,a,b){var d=a.length,e=$b(b,d);c.uniform1iv(this.addr,e);for(c=
0;c!==d;++c)b.setTextureCube(a[c]||ec,e[c])}function oe(c){switch(c){case 5126:return ee;case 35664:return ge;case 35665:return he;case 35666:return ie;case 35674:return je;case 35675:return ke;case 35676:return le;case 35678:return me;case 35680:return ne;case 5124:case 35670:return fe;case 35667:case 35671:return fc;case 35668:case 35672:return gc;case 35669:case 35673:return hc}}function pe(c,a,b){this.id=c;this.addr=b;this.setValue=de(a.type)}function qe(c,a,b){this.id=c;this.addr=b;this.size=
a.size;this.setValue=oe(a.type)}function Za(c){if(0===c.length)return-Infinity;for(var a=c[0],b=1,d=c.length;b<d;++b)c[b]>a&&(a=c[b]);return a}function re(c,a){return c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.program&&a.program&&c.program!==a.program?c.program.id-a.program.id:c.material.id!==a.material.id?c.material.id-a.material.id:c.z!==a.z?c.z-a.z:c.id-a.id}function se(c,a){return c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.z!==a.z?a.z-c.z:c.id-a.id}function te(c,
a){return Math.abs(a[1])-Math.abs(c[1])}function ue(c){c=c.split("\n");for(var a=0;a<c.length;a++)c[a]=a+1+": "+c[a];return c.join("\n")}function ic(c,a,b){var d=c.createShader(a);c.shaderSource(d,b);c.compileShader(d);!1===c.getShaderParameter(d,c.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.");""!==c.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",a===c.VERTEX_SHADER?"vertex":"fragment",c.getShaderInfoLog(d),ue(b));return d}function jc(c){switch(c){case 3E3:return["Linear",
"( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+c);}}function $a(c,a){a=jc(a);return"vec4 "+c+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function ve(c,a){a=jc(a);return"vec4 "+c+"( vec4 value ) { return LinearTo"+a[0]+
a[1]+"; }"}function we(c,a){switch(a){case 1:a="Linear";break;case 2:a="Reinhard";break;case 3:a="Uncharted2";break;case 4:a="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+a);}return"vec3 "+c+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function xa(c){return""!==c}function kc(c,a){return c.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,
a.numHemiLights)}function lc(c,a){return c.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection+"")}function ab(c){return c.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(a,b){a=H[b];if(void 0===a)throw Error("Can not resolve #include <"+b+">");return ab(a)})}function mc(c){return c.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,b,d,e){a="";for(b=parseInt(b);b<
parseInt(d);b++)a+=e.replace(/\[ i \]/g,"[ "+b+" ]");return a})}function nc(c,a,b,d,e){for(var g,f=0,k=a,l=b-d;k<b;k+=d)f+=(c[l]-c[k])*(c[k+1]+c[l+1]),l=k;if(e===0<f)for(e=a;e<b;e+=d)g=oc(e,c[e],c[e+1],g);else for(e=b-d;e>=a;e-=d)g=oc(e,c[e],c[e+1],g);g&&ra(g,g.next)&&(ya(g),g=g.next);return g}function za(c,a){if(!c)return c;a||(a=c);do{var b=!1;if(c.steiner||!ra(c,c.next)&&0!==O(c.prev,c,c.next))c=c.next;else{ya(c);c=a=c.prev;if(c===c.next)break;b=!0}}while(b||c!==a);return a}function Aa(c,a,b,d,
e,g,f){if(c){if(!f&&g){var k=c,l=k;do null===l.z&&(l.z=bb(l.x,l.y,d,e,g)),l.prevZ=l.prev,l=l.nextZ=l.next;while(l!==k);l.prevZ.nextZ=null;l.prevZ=null;k=l;var n,p,h,t,v=1;do{l=k;var u=k=null;for(p=0;l;){p++;var A=l;for(n=h=0;n<v&&(h++,A=A.nextZ,A);n++);for(t=v;0<h||0<t&&A;)0!==h&&(0===t||!A||l.z<=A.z)?(n=l,l=l.nextZ,h--):(n=A,A=A.nextZ,t--),u?u.nextZ=n:k=n,n.prevZ=u,u=n;l=A}u.nextZ=null;v*=2}while(1<p)}for(k=c;c.prev!==c.next;){l=c.prev;A=c.next;if(g)a:{u=c;t=d;var q=e,r=g;p=u.prev;h=u;v=u.next;if(0<=
O(p,h,v))u=!1;else{var z=p.x>h.x?p.x>v.x?p.x:v.x:h.x>v.x?h.x:v.x,x=p.y>h.y?p.y>v.y?p.y:v.y:h.y>v.y?h.y:v.y;n=bb(p.x<h.x?p.x<v.x?p.x:v.x:h.x<v.x?h.x:v.x,p.y<h.y?p.y<v.y?p.y:v.y:h.y<v.y?h.y:v.y,t,q,r);t=bb(z,x,t,q,r);for(q=u.nextZ;q&&q.z<=t;){if(q!==u.prev&&q!==u.next&&Ia(p.x,p.y,h.x,h.y,v.x,v.y,q.x,q.y)&&0<=O(q.prev,q,q.next)){u=!1;break a}q=q.nextZ}for(q=u.prevZ;q&&q.z>=n;){if(q!==u.prev&&q!==u.next&&Ia(p.x,p.y,h.x,h.y,v.x,v.y,q.x,q.y)&&0<=O(q.prev,q,q.next)){u=!1;break a}q=q.prevZ}u=!0}}else a:if(u=
c,p=u.prev,h=u,v=u.next,0<=O(p,h,v))u=!1;else{for(n=u.next.next;n!==u.prev;){if(Ia(p.x,p.y,h.x,h.y,v.x,v.y,n.x,n.y)&&0<=O(n.prev,n,n.next)){u=!1;break a}n=n.next}u=!0}if(u)a.push(l.i/b),a.push(c.i/b),a.push(A.i/b),ya(c),k=c=A.next;else if(c=A,c===k){if(!f)Aa(za(c),a,b,d,e,g,1);else if(1===f){f=a;k=b;l=c;do A=l.prev,u=l.next.next,!ra(A,u)&&pc(A,l,l.next,u)&&Ba(A,u)&&Ba(u,A)&&(f.push(A.i/k),f.push(l.i/k),f.push(u.i/k),ya(l),ya(l.next),l=c=u),l=l.next;while(l!==c);c=l;Aa(c,a,b,d,e,g,2)}else if(2===f)a:{f=
c;do{for(k=f.next.next;k!==f.prev;){if(l=f.i!==k.i){l=f;A=k;if(u=l.next.i!==A.i&&l.prev.i!==A.i){b:{u=l;do{if(u.i!==l.i&&u.next.i!==l.i&&u.i!==A.i&&u.next.i!==A.i&&pc(u,u.next,l,A)){u=!0;break b}u=u.next}while(u!==l);u=!1}u=!u}if(u=u&&Ba(l,A)&&Ba(A,l)){u=l;p=!1;h=(l.x+A.x)/2;A=(l.y+A.y)/2;do u.y>A!==u.next.y>A&&u.next.y!==u.y&&h<(u.next.x-u.x)*(A-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==l);u=p}l=u}if(l){c=qc(f,k);f=za(f,f.next);c=za(c,c.next);Aa(f,a,b,d,e,g);Aa(c,a,b,d,e,g);break a}k=k.next}f=
f.next}while(f!==c)}break}}}}function xe(c,a){return c.x-a.x}function ye(c,a){var b=a,d=c.x,e=c.y,g=-Infinity;do{if(e<=b.y&&e>=b.next.y&&b.next.y!==b.y){var f=b.x+(e-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(f<=d&&f>g){g=f;if(f===d){if(e===b.y)return b;if(e===b.next.y)return b.next}var k=b.x<b.next.x?b:b.next}}b=b.next}while(b!==a);if(!k)return null;if(d===g)return k.prev;a=k;f=k.x;var l=k.y,n=Infinity;for(b=k.next;b!==a;){if(d>=b.x&&b.x>=f&&d!==b.x&&Ia(e<l?d:g,e,f,l,e<l?g:d,e,b.x,b.y)){var h=Math.abs(e-
b.y)/(d-b.x);(h<n||h===n&&b.x>k.x)&&Ba(b,c)&&(k=b,n=h)}b=b.next}return k}function bb(c,a,b,d,e){c=32767*(c-b)*e;a=32767*(a-d)*e;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;return(c|c<<1)&1431655765|((a|a<<1)&1431655765)<<1}function ze(c){var a=c,b=c;do a.x<b.x&&(b=a),a=a.next;while(a!==c);return b}function Ia(c,a,b,d,e,g,f,k){return 0<=(e-f)*(a-k)-(c-f)*(g-k)&&0<=(c-f)*(d-k)-(b-f)*(a-k)&&0<=(b-f)*(g-k)-(e-f)*(d-k)}function O(c,
a,b){return(a.y-c.y)*(b.x-a.x)-(a.x-c.x)*(b.y-a.y)}function ra(c,a){return c.x===a.x&&c.y===a.y}function pc(c,a,b,d){return ra(c,a)&&ra(b,d)||ra(c,d)&&ra(b,a)?!0:0<O(c,a,b)!==0<O(c,a,d)&&0<O(b,d,c)!==0<O(b,d,a)}function Ba(c,a){return 0>O(c.prev,c,c.next)?0<=O(c,a,c.next)&&0<=O(c,c.prev,a):0>O(c,a,c.prev)||0>O(c,c.next,a)}function qc(c,a){var b=new cb(c.i,c.x,c.y),d=new cb(a.i,a.x,a.y),e=c.next,g=a.prev;c.next=a;a.prev=c;b.next=e;e.prev=b;d.next=b;b.prev=d;g.next=d;d.prev=g;return d}function oc(c,
a,b,d){c=new cb(c,a,b);d?(c.next=d.next,c.prev=d,d.next.prev=c,d.next=c):(c.prev=c,c.next=c);return c}function ya(c){c.next.prev=c.prev;c.prev.next=c.next;c.prevZ&&(c.prevZ.nextZ=c.nextZ);c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function rc(c){var a=c.length;2<a&&c[a-1].equals(c[0])&&c.pop()}function sc(c,a){for(var b=0;b<a.length;b++)c.push(a[b].x),c.push(a[b].y)}function tc(c,a){a.shapes=[];if(Array.isArray(c))for(var b=0,d=c.length;b<d;b++)a.shapes.push(c[b].uuid);else a.shapes.push(c.uuid);return a}function uc(c,
a,b,d,e){a=.5*(d-a);e=.5*(e-b);var g=c*c;return(2*b-2*d+a+e)*c*g+(-3*b+3*d-2*a-e)*g+a*c+b}function Ca(c,a,b,d){var e=1-c;return e*e*a+2*(1-c)*c*b+c*c*d}function Da(c,a,b,d,e){var g=1-c,f=1-c;return g*g*g*a+3*f*f*c*b+3*(1-c)*c*c*d+c*c*c*e}function vc(c){var a=[];c&&c.isBone&&a.push(c);for(var b=0;b<c.children.length;b++)a.push.apply(a,vc(c.children[b]));return a}function wc(c){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");h.CatmullRomCurve3.call(this,
c);this.type="catmullrom";this.closed=!0}function xc(c){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");h.CatmullRomCurve3.call(this,c);this.type="catmullrom"}function db(c){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");h.CatmullRomCurve3.call(this,c);this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Number.isInteger&&(Number.isInteger=function(c){return"number"===typeof c&&isFinite(c)&&
Math.floor(c)===c});void 0===Math.sign&&(Math.sign=function(c){return 0>c?-1:0<c?1:+c});!1==="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(c){if(void 0===c||null===c)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(c),b=1;b<arguments.length;b++){var d=arguments[b];if(void 0!==d&&null!==d)for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(a[e]=d[e])}return a}}();var ma=function(){function c(){}c.prototype.addEventListener=function(a,b){void 0===this._listeners&&(this._listeners={});var d=this._listeners;void 0===d[a]&&(d[a]=[]);-1===d[a].indexOf(b)&&d[a].push(b)};c.prototype.hasEventListener=function(a,b){if(void 0===this._listeners)return!1;var d=this._listeners;return void 0!==d[a]&&-1!==d[a].indexOf(b)};c.prototype.removeEventListener=function(a,b){void 0!==this._listeners&&(a=this._listeners[a],void 0!==a&&(b=a.indexOf(b),
-1!==b&&a.splice(b,1)))};c.prototype.dispatchEvent=function(a){if(void 0!==this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;b=b.slice(0);for(var d=0,e=b.length;d<e;d++)b[d].call(this,a)}}};return c}(),E=function(){function c(){}c.clamp=function(a,b,d){return Math.max(b,Math.min(d,a))};c.euclideanModulo=function(a,b){return(a%b+b)%b};c.mapLinear=function(a,b,d,e,c){return e+(a-b)*(c-e)/(d-b)};c.lerp=function(a,b,d){return(1-d)*a+d*b};c.smoothstep=function(a,b,d){if(a<=b)return 0;
if(a>=d)return 1;a=(a-b)/(d-b);return a*a*(3-2*a)};c.smootherstep=function(a,b,d){if(a<=b)return 0;if(a>=d)return 1;a=(a-b)/(d-b);return a*a*a*(a*(6*a-15)+10)};c.randInt=function(a,b){return a+Math.floor(Math.random()*(b-a+1))};c.randFloat=function(a,b){return a+Math.random()*(b-a)};c.randFloatSpread=function(a){return a*(.5-Math.random())};c.degToRad=function(a){return a*c.DEG2RAD};c.radToDeg=function(a){return a*c.RAD2DEG};c.isPowerOfTwo=function(a){return 0===(a&a-1)&&0!==a};c.ceilPowerOfTwo=function(a){return Math.pow(2,
Math.ceil(Math.log(a)/Math.LN2))};c.floorPowerOfTwo=function(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))};c.DEG2RAD=Math.PI/180;c.RAD2DEG=180/Math.PI;c.generateUUID=function(){for(var a=[],b=0;256>b;b++)a[b]=(16>b?"0":"")+b.toString(16).toUpperCase();return function(){var b=4294967295*Math.random()|0,e=4294967295*Math.random()|0,c=4294967295*Math.random()|0,f=4294967295*Math.random()|0;return a[b&255]+a[b>>8&255]+a[b>>16&255]+a[b>>24&255]+"-"+a[e&255]+a[e>>8&255]+"-"+a[e>>16&15|64]+a[e>>
24&255]+"-"+a[c&63|128]+a[c>>8&255]+"-"+a[c>>16&255]+a[c>>24&255]+a[f&255]+a[f>>8&255]+a[f>>16&255]+a[f>>24&255]}}();return c}(),y=function(){function c(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.isVector2=!0;this.x=a;this.y=b}Object.defineProperty(c.prototype,"width",{get:function(){return this.x},set:function(a){this.x=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return this.y},set:function(a){this.y=a},enumerable:!0,configurable:!0});c.prototype.set=
function(a,b){this.x=a;this.y=b;return this};c.prototype.setScalar=function(a){this.y=this.x=a;return this};c.prototype.setX=function(a){this.x=a;return this};c.prototype.setY=function(a){this.y=a;return this};c.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this};c.prototype.getComponent=function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+
a);}};c.prototype.clone=function(){return new c(this.x,this.y)};c.prototype.copy=function(a){this.x=a.x;this.y=a.y;return this};c.prototype.add=function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this};c.prototype.addScalar=function(a){this.x+=a;this.y+=a;return this};c.prototype.addVectors=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this};c.prototype.addScaledVector=
function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this};c.prototype.sub=function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this};c.prototype.subScalar=function(a){this.x-=a;this.y-=a;return this};c.prototype.subVectors=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this};c.prototype.multiply=function(a){this.x*=a.x;this.y*=a.y;return this};c.prototype.multiplyScalar=
function(a){this.x*=a;this.y*=a;return this};c.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;return this};c.prototype.divideScalar=function(a){return this.multiplyScalar(1/a)};c.prototype.applyMatrix3=function(a){var b=this.x,d=this.y;a=a.elements;this.x=a[0]*b+a[3]*d+a[6];this.y=a[1]*b+a[4]*d+a[7];return this};c.prototype.min=function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this};c.prototype.max=function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);
return this};c.prototype.clamp=function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this};c.prototype.clampScalar=function(a,b){var d=new c,e=new c;d.set(a,a);e.set(b,b);return this.clamp(d,e)};c.prototype.clampLength=function(a,b){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))};c.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};c.prototype.ceil=function(){this.x=
Math.ceil(this.x);this.y=Math.ceil(this.y);return this};c.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};c.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this};c.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};c.prototype.dot=function(a){return this.x*a.x+this.y*a.y};c.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y};
c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};c.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)};c.prototype.normalize=function(){return this.divideScalar(this.length()||1)};c.prototype.angle=function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a};c.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))};c.prototype.distanceToSquared=function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a};c.prototype.manhattanDistanceTo=
function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)};c.prototype.setLength=function(a){return this.normalize().multiplyScalar(a)};c.prototype.lerp=function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this};c.prototype.lerpVectors=function(a,b,d){return this.subVectors(b,a).multiplyScalar(d).add(a)};c.prototype.equals=function(a){return a.x===this.x&&a.y===this.y};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this};c.prototype.toArray=
function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a};c.prototype.fromBufferAttribute=function(a,b,d){void 0!==d&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this};c.prototype.rotateAround=function(a,b){var d=Math.cos(b);b=Math.sin(b);var e=this.x-a.x,c=this.y-a.y;this.x=e*d-c*b+a.x;this.y=e*b+c*d+a.y;return this};return c}(),F=function(){function c(){this.isMatrix4=!0;this.elements=[1,
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}c.prototype.set=function(a,b,d,e,c,f,k,l,n,h,m,t,v,u,A,q){var g=this.elements;g[0]=a;g[4]=b;g[8]=d;g[12]=e;g[1]=c;g[5]=f;g[9]=k;g[13]=l;g[2]=n;g[6]=h;g[10]=m;g[14]=t;g[3]=v;g[7]=u;g[11]=A;g[15]=q;return this};c.prototype.identity=function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this};c.prototype.clone=function(){return(new c).fromArray(this.elements,
0)};c.prototype.copy=function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this};c.prototype.copyPosition=function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this};c.prototype.extractBasis=function(a,b,d){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);d.setFromMatrixColumn(this,2);
return this};c.prototype.makeBasis=function(a,b,d){this.set(a.x,b.x,d.x,0,a.y,b.y,d.y,0,a.z,b.z,d.z,0,0,0,0,1);return this};c.prototype.extractRotation=function(a){var b=new q,d=this.elements,e=a.elements,c=1/b.setFromMatrixColumn(a,0).length(),f=1/b.setFromMatrixColumn(a,1).length();a=1/b.setFromMatrixColumn(a,2).length();d[0]=e[0]*c;d[1]=e[1]*c;d[2]=e[2]*c;d[4]=e[4]*f;d[5]=e[5]*f;d[6]=e[6]*f;d[8]=e[8]*a;d[9]=e[9]*a;d[10]=e[10]*a;return this};c.prototype.makeRotationFromEuler=function(a){a&&a.isEuler||
console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,d=a.x,e=a.y,c=a.z,f=Math.cos(d);d=Math.sin(d);var k=Math.cos(e);e=Math.sin(e);var l=Math.cos(c);c=Math.sin(c);if("XYZ"===a.order){a=f*l;var n=f*c,h=d*l,m=d*c;b[0]=k*l;b[4]=-k*c;b[8]=e;b[1]=n+h*e;b[5]=a-m*e;b[9]=-d*k;b[2]=m-a*e;b[6]=h+n*e;b[10]=f*k}else"YXZ"===a.order?(a=k*l,n=k*c,h=e*l,m=e*c,b[0]=a+m*d,b[4]=h*d-n,b[8]=f*e,b[1]=f*c,b[5]=f*l,b[9]=-d,b[2]=n*d-h,b[6]=
m+a*d,b[10]=f*k):"ZXY"===a.order?(a=k*l,n=k*c,h=e*l,m=e*c,b[0]=a-m*d,b[4]=-f*c,b[8]=h+n*d,b[1]=n+h*d,b[5]=f*l,b[9]=m-a*d,b[2]=-f*e,b[6]=d,b[10]=f*k):"ZYX"===a.order?(a=f*l,n=f*c,h=d*l,m=d*c,b[0]=k*l,b[4]=h*e-n,b[8]=a*e+m,b[1]=k*c,b[5]=m*e+a,b[9]=n*e-h,b[2]=-e,b[6]=d*k,b[10]=f*k):"YZX"===a.order?(a=f*k,n=f*e,h=d*k,m=d*e,b[0]=k*l,b[4]=m-a*c,b[8]=h*c+n,b[1]=c,b[5]=f*l,b[9]=-d*l,b[2]=-e*l,b[6]=n*c+h,b[10]=a-m*c):"XZY"===a.order&&(a=f*k,n=f*e,h=d*k,m=d*e,b[0]=k*l,b[4]=-c,b[8]=e*l,b[1]=a*c+m,b[5]=f*l,b[9]=
n*c-h,b[2]=h*c-n,b[6]=d*l,b[10]=m*c+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this};c.prototype.makeRotationFromQuaternion=function(a){var b=this.elements,d=a._x,e=a._y,c=a._z,f=a._w,k=d+d,l=e+e,n=c+c;a=d*k;var h=d*l;d*=n;var m=e*l;e*=n;c*=n;k*=f;l*=f;f*=n;b[0]=1-(m+c);b[4]=h-f;b[8]=d+l;b[1]=h+f;b[5]=1-(a+c);b[9]=e-k;b[2]=d-l;b[6]=e+k;b[10]=1-(a+m);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this};c.prototype.lookAt=function(a,b,d){var e=new q,c=new q,f=new q,
k=this.elements;f.subVectors(a,b);0===f.lengthSq()&&(f.z=1);f.normalize();e.crossVectors(d,f);0===e.lengthSq()&&(1===Math.abs(d.z)?f.x+=1E-4:f.z+=1E-4,f.normalize(),e.crossVectors(d,f));e.normalize();c.crossVectors(f,e);k[0]=e.x;k[4]=c.x;k[8]=f.x;k[1]=e.y;k[5]=c.y;k[9]=f.y;k[2]=e.z;k[6]=c.z;k[10]=f.z;return this};c.prototype.multiply=function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,
b)):this.multiplyMatrices(this,a)};c.prototype.premultiply=function(a){return this.multiplyMatrices(a,this)};c.prototype.multiplyMatrices=function(a,b){var d=a.elements,e=b.elements;b=this.elements;a=d[0];var c=d[4],f=d[8],k=d[12],l=d[1],n=d[5],h=d[9],m=d[13],t=d[2],v=d[6],u=d[10],A=d[14],q=d[3],r=d[7],z=d[11];d=d[15];var x=e[0],y=e[4],w=e[8],D=e[12],sa=e[1],C=e[5],F=e[9],E=e[13],H=e[2],G=e[6],J=e[10],S=e[14],L=e[3],P=e[7],K=e[11];e=e[15];b[0]=a*x+c*sa+f*H+k*L;b[4]=a*y+c*C+f*G+k*P;b[8]=a*w+c*F+f*
J+k*K;b[12]=a*D+c*E+f*S+k*e;b[1]=l*x+n*sa+h*H+m*L;b[5]=l*y+n*C+h*G+m*P;b[9]=l*w+n*F+h*J+m*K;b[13]=l*D+n*E+h*S+m*e;b[2]=t*x+v*sa+u*H+A*L;b[6]=t*y+v*C+u*G+A*P;b[10]=t*w+v*F+u*J+A*K;b[14]=t*D+v*E+u*S+A*e;b[3]=q*x+r*sa+z*H+d*L;b[7]=q*y+r*C+z*G+d*P;b[11]=q*w+r*F+z*J+d*K;b[15]=q*D+r*E+z*S+d*e;return this};c.prototype.multiplyScalar=function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this};
c.prototype.applyToBufferAttribute=function(a){for(var b=new q,d=0,e=a.count;d<e;d++)b.x=a.getX(d),b.y=a.getY(d),b.z=a.getZ(d),b.applyMatrix4(this),a.setXYZ(d,b.x,b.y,b.z);return a};c.prototype.determinant=function(){var a=this.elements,b=a[0],d=a[4],e=a[8],c=a[12],f=a[1],k=a[5],l=a[9],n=a[13],h=a[2],m=a[6],t=a[10],v=a[14];return a[3]*(+c*l*m-e*n*m-c*k*t+d*n*t+e*k*v-d*l*v)+a[7]*(+b*l*v-b*n*t+c*f*t-e*f*v+e*n*h-c*l*h)+a[11]*(+b*n*m-b*k*v-c*f*m+d*f*v+c*k*h-d*n*h)+a[15]*(-e*k*h-b*l*m+b*k*t+e*f*m-d*f*
t+d*l*h)};c.prototype.transpose=function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this};c.prototype.setPosition=function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this};c.prototype.getInverse=function(a,b){var d=this.elements,e=a.elements;a=e[0];var c=e[1],f=e[2],k=e[3],l=e[4],n=e[5],h=e[6],m=e[7],t=e[8],v=e[9],u=e[10],A=e[11],q=e[12],r=
e[13],z=e[14];e=e[15];var x=v*z*m-r*u*m+r*h*A-n*z*A-v*h*e+n*u*e,y=q*u*m-t*z*m-q*h*A+l*z*A+t*h*e-l*u*e,w=t*r*m-q*v*m+q*n*A-l*r*A-t*n*e+l*v*e,D=q*v*h-t*r*h-q*n*u+l*r*u+t*n*z-l*v*z,sa=a*x+c*y+f*w+k*D;if(0===sa){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/sa;d[0]=x*b;d[1]=(r*u*k-v*z*k-r*f*A+c*z*A+v*f*e-c*u*e)*b;d[2]=(n*z*k-r*h*k+r*f*m-c*z*m-n*f*
e+c*h*e)*b;d[3]=(v*h*k-n*u*k-v*f*m+c*u*m+n*f*A-c*h*A)*b;d[4]=y*b;d[5]=(t*z*k-q*u*k+q*f*A-a*z*A-t*f*e+a*u*e)*b;d[6]=(q*h*k-l*z*k-q*f*m+a*z*m+l*f*e-a*h*e)*b;d[7]=(l*u*k-t*h*k+t*f*m-a*u*m-l*f*A+a*h*A)*b;d[8]=w*b;d[9]=(q*v*k-t*r*k-q*c*A+a*r*A+t*c*e-a*v*e)*b;d[10]=(l*r*k-q*n*k+q*c*m-a*r*m-l*c*e+a*n*e)*b;d[11]=(t*n*k-l*v*k-t*c*m+a*v*m+l*c*A-a*n*A)*b;d[12]=D*b;d[13]=(t*r*f-q*v*f+q*c*u-a*r*u-t*c*z+a*v*z)*b;d[14]=(q*n*f-l*r*f-q*c*h+a*r*h+l*c*z-a*n*z)*b;d[15]=(l*v*f-t*n*f+t*c*h-a*v*h-l*c*u+a*n*u)*b;return this};
c.prototype.scale=function(a){var b=this.elements,d=a.x,e=a.y;a=a.z;b[0]*=d;b[4]*=e;b[8]*=a;b[1]*=d;b[5]*=e;b[9]*=a;b[2]*=d;b[6]*=e;b[10]*=a;b[3]*=d;b[7]*=e;b[11]*=a;return this};c.prototype.getMaxScaleOnAxis=function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))};c.prototype.makeTranslation=function(a,b,d){this.set(1,0,0,a,0,1,0,b,0,0,1,d,0,0,0,1);return this};c.prototype.makeRotationX=function(a){var b=
Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this};c.prototype.makeRotationY=function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this};c.prototype.makeRotationZ=function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this};c.prototype.makeRotationAxis=function(a,b){var d=Math.cos(b);b=Math.sin(b);var e=1-d,c=a.x,f=a.y;a=a.z;var k=e*c,l=e*f;this.set(k*c+d,k*f-b*a,k*a+b*f,0,k*f+b*a,l*f+d,l*
a-b*c,0,k*a-b*f,l*a+b*c,e*a*a+d,0,0,0,0,1);return this};c.prototype.makeScale=function(a,b,d){this.set(a,0,0,0,0,b,0,0,0,0,d,0,0,0,0,1);return this};c.prototype.makeShear=function(a,b,d){this.set(1,b,d,0,a,1,d,0,a,b,1,0,0,0,0,1);return this};c.prototype.compose=function(a,b,d){this.makeRotationFromQuaternion(b);this.scale(d);this.setPosition(a);return this};c.prototype.decompose=function(a,b,d){var e=new q,g=new c,f=this.elements,k=e.set(f[0],f[1],f[2]).length(),l=e.set(f[4],f[5],f[6]).length();e=
e.set(f[8],f[9],f[10]).length();0>this.determinant()&&(k=-k);a.x=f[12];a.y=f[13];a.z=f[14];g.copy(this);a=1/k;f=1/l;var n=1/e;g.elements[0]*=a;g.elements[1]*=a;g.elements[2]*=a;g.elements[4]*=f;g.elements[5]*=f;g.elements[6]*=f;g.elements[8]*=n;g.elements[9]*=n;g.elements[10]*=n;b.setFromRotationMatrix(g);d.x=k;d.y=l;d.z=e;return this};c.prototype.makePerspective=function(a,b,d,e,c,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
var g=this.elements;g[0]=2*c/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*c/(d-e);g[9]=(d+e)/(d-e);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+c)/(f-c);g[14]=-2*f*c/(f-c);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this};c.prototype.makeOrthographic=function(a,b,d,e,c,f){var g=this.elements,l=1/(b-a),n=1/(d-e),h=1/(f-c);g[0]=2*l;g[4]=0;g[8]=0;g[12]=-((b+a)*l);g[1]=0;g[5]=2*n;g[9]=0;g[13]=-((d+e)*n);g[2]=0;g[6]=0;g[10]=-2*h;g[14]=-((f+c)*h);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this};c.prototype.equals=function(a){var b=
this.elements;a=a.elements;for(var d=0;16>d;d++)if(b[d]!==a[d])return!1;return!0};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);for(var d=0;16>d;d++)this.elements[d]=a[d+b];return this};c.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];a[b+9]=d[9];a[b+10]=d[10];a[b+11]=d[11];a[b+12]=d[12];a[b+13]=d[13];a[b+14]=d[14];a[b+15]=d[15];return a};return c}(),
N=function(){function c(a,b,d,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=1);this.onChangeCallback=function(){};this._x=a;this._y=b;this._z=d;this._w=e}c.slerp=function(a,b,d,e){return d.copy(a).slerp(b,e)};c.slerpFlat=function(a,b,d,e,c,f,k){var g=d[e+0],n=d[e+1],h=d[e+2];d=d[e+3];e=c[f+0];var m=c[f+1],t=c[f+2];c=c[f+3];if(d!==c||g!==e||n!==m||h!==t){f=1-k;var v=g*e+n*m+h*t+d*c,u=0<=v?1:-1,A=1-v*v;A>Number.EPSILON&&(A=Math.sqrt(A),v=Math.atan2(A,v*u),f=Math.sin(f*v)/A,
k=Math.sin(k*v)/A);u*=k;g=g*f+e*u;n=n*f+m*u;h=h*f+t*u;d=d*f+c*u;f===1-k&&(k=1/Math.sqrt(g*g+n*n+h*h+d*d),g*=k,n*=k,h*=k,d*=k)}a[b]=g;a[b+1]=n;a[b+2]=h;a[b+3]=d};Object.defineProperty(c.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"z",{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"w",{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()},enumerable:!0,configurable:!0});c.prototype.set=function(a,b,d,e){this._x=a;this._y=b;this._z=d;this._w=e;this.onChangeCallback();return this};c.prototype.clone=function(){return new c(this._x,this._y,this._z,this._w)};c.prototype.copy=function(a){this._x=a.x;this._y=
a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this};c.prototype.setFromEuler=function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var d=a._x,e=a._y,c=a._z;a=a.order;var f=Math.cos,k=Math.sin,l=f(d/2),n=f(e/2);f=f(c/2);d=k(d/2);e=k(e/2);c=k(c/2);"XYZ"===a?(this._x=d*n*f+l*e*c,this._y=l*e*f-d*n*c,this._z=l*n*c+d*e*f,this._w=l*n*f-d*e*c):"YXZ"===a?(this._x=d*n*f+l*e*c,this._y=l*e*f-d*n*c,this._z=l*
n*c-d*e*f,this._w=l*n*f+d*e*c):"ZXY"===a?(this._x=d*n*f-l*e*c,this._y=l*e*f+d*n*c,this._z=l*n*c+d*e*f,this._w=l*n*f-d*e*c):"ZYX"===a?(this._x=d*n*f-l*e*c,this._y=l*e*f+d*n*c,this._z=l*n*c-d*e*f,this._w=l*n*f+d*e*c):"YZX"===a?(this._x=d*n*f+l*e*c,this._y=l*e*f+d*n*c,this._z=l*n*c-d*e*f,this._w=l*n*f-d*e*c):"XZY"===a&&(this._x=d*n*f-l*e*c,this._y=l*e*f-d*n*c,this._z=l*n*c+d*e*f,this._w=l*n*f+d*e*c);if(!1!==b)this.onChangeCallback();return this};c.prototype.setFromAxisAngle=function(a,b){b/=2;var d=
Math.sin(b);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(b);this.onChangeCallback();return this};c.prototype.setFromRotationMatrix=function(a){var b=a.elements,d=b[0];a=b[4];var e=b[8],c=b[1],f=b[5],k=b[9],l=b[2],n=b[6];b=b[10];var h=d+f+b;0<h?(d=.5/Math.sqrt(h+1),this._w=.25/d,this._x=(n-k)*d,this._y=(e-l)*d,this._z=(c-a)*d):d>f&&d>b?(d=2*Math.sqrt(1+d-f-b),this._w=(n-k)/d,this._x=.25*d,this._y=(a+c)/d,this._z=(e+l)/d):f>b?(d=2*Math.sqrt(1+f-d-b),this._w=(e-l)/d,this._x=(a+c)/d,this._y=
.25*d,this._z=(k+n)/d):(d=2*Math.sqrt(1+b-d-f),this._w=(c-a)/d,this._x=(e+l)/d,this._y=(k+n)/d,this._z=.25*d);this.onChangeCallback();return this};c.prototype.setFromUnitVectors=function(a,b){var d=new q;void 0===d&&(d=new q);var e=a.dot(b)+1;1E-6>e?(e=0,Math.abs(a.x)>Math.abs(a.z)?d.set(-a.y,a.x,0):d.set(0,-a.z,a.y)):d.crossVectors(a,b);this._x=d.x;this._y=d.y;this._z=d.z;this._w=e;return this.normalize()};c.prototype.inverse=function(){return this.conjugate()};c.prototype.conjugate=function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this};c.prototype.dot=function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w};c.prototype.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w};c.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)};c.prototype.normalize=function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=
a,this._w*=a);this.onChangeCallback();return this};c.prototype.multiply=function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)};c.prototype.premultiply=function(a){return this.multiplyQuaternions(a,this)};c.prototype.multiplyQuaternions=function(a,b){var d=a._x,e=a._y,c=a._z;a=a._w;var f=b._x,k=b._y,l=b._z;b=b._w;this._x=d*b+a*f+e*l-c*k;this._y=
e*b+a*k+c*f-d*l;this._z=c*b+a*l+d*k-e*f;this._w=a*b-d*f-e*k-c*l;this.onChangeCallback();return this};c.prototype.slerp=function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var d=this._x,e=this._y,c=this._z,f=this._w,k=f*a._w+d*a._x+e*a._y+c*a._z;0>k?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,k=-k):this.copy(a);if(1<=k)return this._w=f,this._x=d,this._y=e,this._z=c,this;a=Math.sqrt(1-k*k);if(.001>Math.abs(a))return this._w=.5*(f+this._w),this._x=.5*(d+this._x),this._y=.5*(e+
this._y),this._z=.5*(c+this._z),this;var l=Math.atan2(a,k);k=Math.sin((1-b)*l)/a;b=Math.sin(b*l)/a;this._w=f*k+this._w*b;this._x=d*k+this._x*b;this._y=e*k+this._y*b;this._z=c*k+this._z*b;this.onChangeCallback();return this};c.prototype.equals=function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this};c.prototype.toArray=function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a};c.prototype.onChange=function(a){this.onChangeCallback=a;return this};return c}(),q=function(){function c(a,b,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);this.isVector3=!0;this.x=a;this.y=b;this.z=d}c.prototype.set=function(a,b,d){this.x=a;this.y=b;this.z=d;return this};c.prototype.setScalar=function(a){this.z=this.y=this.x=a;return this};c.prototype.setX=function(a){this.x=a;return this};
c.prototype.setY=function(a){this.y=a;return this};c.prototype.setZ=function(a){this.z=a;return this};c.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this};c.prototype.getComponent=function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}};c.prototype.clone=function(){return new c(this.x,this.y,this.z)};
c.prototype.copy=function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this};c.prototype.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};c.prototype.addScalar=function(a){this.x+=a;this.y+=a;this.z+=a;return this};c.prototype.addVectors=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this};c.prototype.addScaledVector=function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this};c.prototype.sub=function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};c.prototype.subScalar=function(a){this.x-=a;this.y-=a;this.z-=a;return this};c.prototype.subVectors=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this};c.prototype.multiply=function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this};c.prototype.multiplyScalar=
function(a){this.x*=a;this.y*=a;this.z*=a;return this};c.prototype.multiplyVectors=function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this};c.prototype.applyEuler=function(a){var b=new N;a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(b.setFromEuler(a))};c.prototype.applyAxisAngle=function(a,b){var d=new N;return this.applyQuaternion(d.setFromAxisAngle(a,b))};c.prototype.applyMatrix3=
function(a){var b=this.x,d=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[3]*d+a[6]*e;this.y=a[1]*b+a[4]*d+a[7]*e;this.z=a[2]*b+a[5]*d+a[8]*e;return this};c.prototype.applyMatrix4=function(a){var b=this.x,d=this.y,e=this.z;a=a.elements;var c=1/(a[3]*b+a[7]*d+a[11]*e+a[15]);this.x=(a[0]*b+a[4]*d+a[8]*e+a[12])*c;this.y=(a[1]*b+a[5]*d+a[9]*e+a[13])*c;this.z=(a[2]*b+a[6]*d+a[10]*e+a[14])*c;return this};c.prototype.applyQuaternion=function(a){var b=this.x,d=this.y,e=this.z,c=a.x,f=a.y,k=a.z;a=a.w;var l=
a*b+f*e-k*d,n=a*d+k*b-c*e,h=a*e+c*d-f*b;b=-c*b-f*d-k*e;this.x=l*a+b*-c+n*-k-h*-f;this.y=n*a+b*-f+h*-c-l*-k;this.z=h*a+b*-k+l*-f-n*-c;return this};c.prototype.project=function(a){var b=new F;b.multiplyMatrices(a.projectionMatrix,b.getInverse(a.matrixWorld));return this.applyMatrix4(b)};c.prototype.unproject=function(a){var b=new F;b.multiplyMatrices(a.matrixWorld,b.getInverse(a.projectionMatrix));return this.applyMatrix4(b)};c.prototype.transformDirection=function(a){var b=this.x,d=this.y,e=this.z;
a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*e;this.y=a[1]*b+a[5]*d+a[9]*e;this.z=a[2]*b+a[6]*d+a[10]*e;return this.normalize()};c.prototype.divide=function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this};c.prototype.divideScalar=function(a){return this.multiplyScalar(1/a)};c.prototype.min=function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this};c.prototype.max=function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,
a.z);return this};c.prototype.clamp=function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this};c.prototype.clampScalar=function(a,b){var d=new c,e=new c;d.set(a,a,a);e.set(b,b,b);return this.clamp(d,e)};c.prototype.clampLength=function(a,b){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))};c.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);
this.z=Math.floor(this.z);return this};c.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this};c.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this};c.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this};c.prototype.negate=
function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this};c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};c.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z};c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};c.prototype.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)};c.prototype.normalize=function(){return this.divideScalar(this.length()||1)};c.prototype.setLength=
function(a){return this.normalize().multiplyScalar(a)};c.prototype.lerp=function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this};c.prototype.lerpVectors=function(a,b,d){return this.subVectors(b,a).multiplyScalar(d).add(a)};c.prototype.cross=function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b)):this.crossVectors(this,a)};c.prototype.crossVectors=function(a,
b){var d=a.x,e=a.y;a=a.z;var c=b.x,f=b.y;b=b.z;this.x=e*b-a*f;this.y=a*c-d*b;this.z=d*f-e*c;return this};c.prototype.projectOnVector=function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)};c.prototype.projectOnPlane=function(a){var b=new c;b.copy(this).projectOnVector(a);return this.sub(b)};c.prototype.reflect=function(a){var b=new c;return this.sub(b.copy(a).multiplyScalar(2*this.dot(a)))};c.prototype.angleTo=function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());
return Math.acos(E.clamp(a,-1,1))};c.prototype.distanceTo=function(a){return Math.sqrt(this.distanceToSquared(a))};c.prototype.distanceToSquared=function(a){var b=this.x-a.x,d=this.y-a.y;a=this.z-a.z;return b*b+d*d+a*a};c.prototype.manhattanDistanceTo=function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)};c.prototype.setFromSpherical=function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this};
c.prototype.setFromCylindrical=function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this};c.prototype.setFromMatrixPosition=function(a){a=a.elements;this.x=a[12];this.y=a[13];this.z=a[14];return this};c.prototype.setFromMatrixScale=function(a){var b=this.setFromMatrixColumn(a,0).length(),d=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=d;this.z=a;return this};c.prototype.setFromMatrixColumn=function(a,b){return this.fromArray(a.elements,
4*b)};c.prototype.equals=function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this};c.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a};c.prototype.fromBufferAttribute=function(a,b,d){void 0!==d&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);
return this};return c}(),Z=function(){function c(){this.elements=[1,0,0,0,1,0,0,0,1];this.isMatrix3=!0}c.prototype.set=function(a,b,d,e,c,f,k,l,n){var g=this.elements;g[0]=a;g[1]=e;g[2]=k;g[3]=b;g[4]=c;g[5]=l;g[6]=d;g[7]=f;g[8]=n;return this};c.prototype.identity=function(){this.set(1,0,0,0,1,0,0,0,1);return this};c.prototype.clone=function(){return(new c).fromArray(this.elements)};c.prototype.copy=function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=
a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this};c.prototype.setFromMatrix4=function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this};c.prototype.applyToBufferAttribute=function(a){for(var b=new q,d=0,e=a.count;d<e;d++)b.x=a.getX(d),b.y=a.getY(d),b.z=a.getZ(d),b.applyMatrix3(this),a.setXYZ(d,b.x,b.y,b.z);return a};c.prototype.multiply=function(a){return this.multiplyMatrices(this,a)};c.prototype.premultiply=function(a){return this.multiplyMatrices(a,this)};c.prototype.multiplyMatrices=
function(a,b){var d=a.elements,e=b.elements;b=this.elements;a=d[0];var c=d[3],f=d[6],k=d[1],l=d[4],n=d[7],h=d[2],m=d[5];d=d[8];var t=e[0],v=e[3],u=e[6],A=e[1],q=e[4],r=e[7],z=e[2],x=e[5];e=e[8];b[0]=a*t+c*A+f*z;b[3]=a*v+c*q+f*x;b[6]=a*u+c*r+f*e;b[1]=k*t+l*A+n*z;b[4]=k*v+l*q+n*x;b[7]=k*u+l*r+n*e;b[2]=h*t+m*A+d*z;b[5]=h*v+m*q+d*x;b[8]=h*u+m*r+d*e;return this};c.prototype.multiplyScalar=function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this};
c.prototype.determinant=function(){var a=this.elements,b=a[0],d=a[1],e=a[2],c=a[3],f=a[4],k=a[5],l=a[6],n=a[7];a=a[8];return b*f*a-b*k*n-d*c*a+d*k*l+e*c*n-e*f*l};c.prototype.getInverse=function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var d=a.elements;a=this.elements;var e=d[0],c=d[1],f=d[2],k=d[3],l=d[4],n=d[5],h=d[6],m=d[7];d=d[8];var t=d*l-n*m,v=n*h-d*k,u=m*k-l*h,A=e*t+c*v+f*u;if(0===A){if(!0===b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");
console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}b=1/A;a[0]=t*b;a[1]=(f*m-d*c)*b;a[2]=(n*c-f*l)*b;a[3]=v*b;a[4]=(d*e-f*h)*b;a[5]=(f*k-n*e)*b;a[6]=u*b;a[7]=(c*h-m*e)*b;a[8]=(l*e-c*k)*b;return this};c.prototype.transpose=function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this};c.prototype.getNormalMatrix=function(a){return this.setFromMatrix4(a).getInverse(this).transpose()};c.prototype.transposeIntoArray=
function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this};c.prototype.setUvTransform=function(a,b,d,e,c,f,k){var g=Math.cos(c);c=Math.sin(c);this.set(d*g,d*c,-d*(g*f+c*k)+f+a,-e*c,e*g,-e*(-c*f+g*k)+k+b,0,0,1)};c.prototype.scale=function(a,b){var d=this.elements;d[0]*=a;d[3]*=a;d[6]*=a;d[1]*=b;d[4]*=b;d[7]*=b;return this};c.prototype.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var d=this.elements,e=d[0],c=d[3],f=d[6],
k=d[1],l=d[4],n=d[7];d[0]=b*e+a*k;d[3]=b*c+a*l;d[6]=b*f+a*n;d[1]=-a*e+b*k;d[4]=-a*c+b*l;d[7]=-a*f+b*n;return this};c.prototype.translate=function(a,b){var d=this.elements;d[0]+=a*d[2];d[3]+=a*d[5];d[6]+=a*d[8];d[1]+=b*d[2];d[4]+=b*d[5];d[7]+=b*d[8];return this};c.prototype.equals=function(a){var b=this.elements;a=a.elements;for(var d=0;9>d;d++)if(b[d]!==a[d])return!1;return!0};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);for(var d=0;9>d;d++)this.elements[d]=a[d+b];return this};c.prototype.toArray=
function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var d=this.elements;a[b]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=d[4];a[b+5]=d[5];a[b+6]=d[6];a[b+7]=d[7];a[b+8]=d[8];return a};return c}(),r=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])};return function(a,b){function d(){this.constructor=a}c(a,b);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,
new d)}}(),Y=function(c){function a(b,d,e,g,f,k,l,n,h,m){void 0===b&&(b=a.DEFAULT_IMAGE);void 0===d&&(d=a.DEFAULT_MAPPING);void 0===e&&(e=1001);void 0===g&&(g=1001);void 0===f&&(f=1006);void 0===k&&(k=1008);void 0===l&&(l=1023);void 0===n&&(n=1009);void 0===h&&(h=1);void 0===m&&(m=3E3);var p=c.call(this)||this;p.onUpdate=function(){};p.isTexture=!0;p.id=a.textureId++;p.uuid=E.generateUUID();p.name="";p.image=b;p.mipmaps=[];p.mapping=d;p.wrapS=e;p.wrapT=g;p.magFilter=f;p.minFilter=k;p.anisotropy=h;
p.format=l;p.type=n;p.offset=new y(0,0);p.repeat=new y(1,1);p.center=new y(0,0);p.rotation=0;p.matrixAutoUpdate=!0;p.matrix=new Z;p.generateMipmaps=!0;p.premultiplyAlpha=!1;p.flipY=!0;p.unpackAlignment=4;p.encoding=m;p.version=0;p.onUpdate=null;return p}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){this.name=a.name;this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;
this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.center.copy(a.center);this.rotation=a.rotation;this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrix.copy(a.matrix);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this};a.prototype.toJSON=function(a){var b=void 0===a||"string"===
typeof a;if(!b&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var e={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,image:null};if(void 0!==this.image){var c=this.image;
void 0===c.uuid&&(c.uuid=E.generateUUID());if(!b&&void 0===a.images[c.uuid]){var f=a.images,k=c.uuid,l=c.uuid;if(c instanceof HTMLCanvasElement)var n=c;else{n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=c.width;n.height=c.height;var h=n.getContext("2d");c instanceof ImageData?h.putImageData(c,0,0):h.drawImage(c,0,0,c.width,c.height)}n=2048<n.width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png");f[k]={uuid:l,url:n}}e.image=c.uuid}b||(a.textures[this.uuid]=
e);return e};a.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};a.prototype.transformUv=function(a){if(300===this.mapping){a.applyMatrix3(this.matrix);if(0>a.x||1<a.x)switch(this.wrapS){case 1E3:a.x-=Math.floor(a.x);break;case 1001:a.x=0>a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapT){case 1E3:a.y-=Math.floor(a.y);break;case 1001:a.y=0>a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?
Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}};Object.defineProperty(a.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++},enumerable:!0,configurable:!0});a.textureId=0;a.DEFAULT_IMAGE=void 0;a.DEFAULT_MAPPING=300;return a}(ma),J=function(){function c(a,b,d,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=1);this.isVector4=!0;this.x=a;this.y=b;this.z=d;this.w=e}c.prototype.set=function(a,b,d,e){this.x=a;this.y=b;this.z=d;this.w=e;return this};
c.prototype.setScalar=function(a){this.w=this.z=this.y=this.x=a;return this};c.prototype.setX=function(a){this.x=a;return this};c.prototype.setY=function(a){this.y=a;return this};c.prototype.setZ=function(a){this.z=a;return this};c.prototype.setW=function(a){this.w=a;return this};c.prototype.setComponent=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this};c.prototype.getComponent=
function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}};c.prototype.clone=function(){return new c(this.x,this.y,this.z,this.w)};c.prototype.copy=function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this};c.prototype.add=function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,
b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this};c.prototype.addScalar=function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this};c.prototype.addVectors=function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this};c.prototype.addScaledVector=function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;return this};c.prototype.sub=function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this};c.prototype.subScalar=function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this};c.prototype.subVectors=function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this};c.prototype.multiplyScalar=function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this};c.prototype.applyMatrix4=function(a){var b=this.x,d=this.y,e=this.z,c=this.w;a=a.elements;this.x=a[0]*b+a[4]*d+a[8]*e+a[12]*c;this.y=
a[1]*b+a[5]*d+a[9]*e+a[13]*c;this.z=a[2]*b+a[6]*d+a[10]*e+a[14]*c;this.w=a[3]*b+a[7]*d+a[11]*e+a[15]*c;return this};c.prototype.divideScalar=function(a){return this.multiplyScalar(1/a)};c.prototype.setAxisAngleFromQuaternion=function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this};c.prototype.setAxisAngleFromRotationMatrix=function(a){a=a.elements;var b=a[0];var d=a[4];var e=a[8],c=a[1],f=a[5],k=a[9];var l=
a[2];var n=a[6];var h=a[10];if(.01>Math.abs(d-c)&&.01>Math.abs(e-l)&&.01>Math.abs(k-n)){if(.1>Math.abs(d+c)&&.1>Math.abs(e+l)&&.1>Math.abs(k+n)&&.1>Math.abs(b+f+h-3))return this.set(1,0,0,0),this;a=Math.PI;b=(b+1)/2;f=(f+1)/2;h=(h+1)/2;d=(d+c)/4;e=(e+l)/4;k=(k+n)/4;b>f&&b>h?.01>b?(n=0,d=l=.707106781):(n=Math.sqrt(b),l=d/n,d=e/n):f>h?.01>f?(n=.707106781,l=0,d=.707106781):(l=Math.sqrt(f),n=d/l,d=k/l):.01>h?(l=n=.707106781,d=0):(d=Math.sqrt(h),n=e/d,l=k/d);this.set(n,l,d,a);return this}a=Math.sqrt((n-
k)*(n-k)+(e-l)*(e-l)+(c-d)*(c-d));.001>Math.abs(a)&&(a=1);this.x=(n-k)/a;this.y=(e-l)/a;this.z=(c-d)/a;this.w=Math.acos((b+f+h-1)/2);return this};c.prototype.min=function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this};c.prototype.max=function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);this.w=Math.max(this.w,a.w);return this};c.prototype.clamp=function(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this};c.prototype.clampScalar=function(a,b){if(void 0===d){var d=new c;var e=new c}d.set(a,a,a,a);e.set(b,b,b,b);return this.clamp(d,e)};c.prototype.clampLength=function(a,b){var d=this.length();return this.divideScalar(d||1).multiplyScalar(Math.max(a,Math.min(b,d)))};c.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);
this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this};c.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this};c.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this};c.prototype.roundToZero=function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>
this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this};c.prototype.negate=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this};c.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w};c.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w};c.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)};c.prototype.manhattanLength=
function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)};c.prototype.normalize=function(){return this.divideScalar(this.length()||1)};c.prototype.setLength=function(a){return this.normalize().multiplyScalar(a)};c.prototype.lerp=function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this};c.prototype.lerpVectors=function(a,b,d){return this.subVectors(b,a).multiplyScalar(d).add(a)};c.prototype.equals=function(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this};c.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a};c.prototype.fromBufferAttribute=function(a,b,d){void 0!==d&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);
this.w=a.getW(b);return this};return c}(),Ja=function(c){function a(a,d,e){void 0===e&&(e={});var b=c.call(this)||this;b.uuid=E.generateUUID();b.isWebGLRenderTarget=!0;b.width=a;b.height=d;b.scissor=new J(0,0,a,d);b.scissorTest=!1;b.viewport=new J(0,0,a,d);void 0===e.minFilter&&(e.minFilter=1006);b.texture=new Y(void 0,void 0,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding);b.depthBuffer=void 0!==e.depthBuffer?e.depthBuffer:!0;b.stencilBuffer=void 0!==e.stencilBuffer?
e.stencilBuffer:!0;b.depthTexture=void 0!==e.depthTexture?e.depthTexture:null;return b}r(a,c);a.prototype.setSize=function(a,d){if(this.width!==a||this.height!==d)this.width=a,this.height=d,this.dispose();this.viewport.set(0,0,a,d);this.scissor.set(0,0,a,d)};a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;
this.depthTexture=a.depthTexture;return this};a.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};return a}(ma),yc=function(c){function a(a,d,e){a=c.call(this,a,d,e)||this;a.isWebGLRenderTargetCube=!0;a.activeCubeFace=0;a.activeMipMapLevel=0;return a}r(a,c);return a}(Ja),eb=function(c){function a(a,d,e,g,f,k,l,n,h,m,t,v){void 0===h&&(h=1003);void 0===m&&(m=1003);g=c.call(this,null,k,l,n,h,m,g,f,t,v)||this;g.isDataTexture=!0;g.image={data:a,width:d,height:e};g.magFilter=h;g.minFilter=
m;g.generateMipmaps=!1;g.flipY=!1;g.unpackAlignment=1;return g}r(a,c);return a}(Y),fb=function(c){function a(a,d,e,g,f,k,l,n,h,m){void 0===a&&(a=[]);void 0===d&&(d=301);e=c.call(this,a,d,e,g,f,k,l,n,h,m)||this;e.isCubeTexture=!0;e.images=a;e.mapping=d;e.flipY=!1;return e}r(a,c);a.prototype.get=function(){return this.image};a.prototype.set=function(a){this.image=a};return a}(Y),dc=new Y,ec=new fb,zc=function(){return function(){this.seq=[];this.map={}}}(),Zb=[],ac=[],cc=new Float32Array(16),bc=new Float32Array(9),
Ae=function(c){function a(a){var b=c.call(this)||this;b.id=a;return b}r(a,c);a.prototype.setValue=function(a,d){for(var b=this.seq,c=0,f=b.length;c!==f;++c){var k=b[c];k.setValue(a,d[k.id])}};return a}(zc),gb=/([\w\d_]+)(\])?(\[|\.)?/g,Ka=function(c){function a(a,d,e){var b=c.call(this)||this;b.renderer=e;e=a.getProgramParameter(d,a.ACTIVE_UNIFORMS);for(var f=0;f<e;++f){var k=a.getActiveUniform(d,f),l=a.getUniformLocation(d,k.name),n=b,h=k.name,m=h.length;for(gb.lastIndex=0;;){var t=gb.exec(h),v=
gb.lastIndex,u=t[1],A=t[3];"]"===t[2]&&(u|=0);if(void 0===A||"["===A&&v+2===m){h=n;k=void 0===A?new pe(u,k,l):new qe(u,k,l);h.seq.push(k);h.map[k.id]=k;break}else A=n.map[u],void 0===A&&(A=new Ae(u),u=n,n=A,u.seq.push(n),u.map[n.id]=n),n=A}}return b}r(a,c);a.prototype.setValue=function(a,d,e){d=this.map[d];void 0!==d&&d.setValue(a,e,this.renderer)};a.prototype.setOptional=function(a,d,e){d=d[e];void 0!==d&&this.setValue(a,e,d)};a.upload=function(a,d,e,c){for(var b=0,g=d.length;b!==g;++b){var l=d[b],
n=e[l.id];!1!==n.needsUpdate&&l.setValue(a,n.value,c)}};a.seqWithValue=function(a,d){for(var b=[],c=0,f=a.length;c!==f;++c){var k=a[c];k.id in d&&b.push(k)}return b};return a}(zc),Q=function(){function c(){}c.merge=function(a){for(var b={},d=0;d<a.length;d++){var e=this.clone(a[d]),c;for(c in e)b[c]=e[c]}return b};c.clone=function(a){var b={},d;for(d in a){b[d]={};for(var e in a[d]){var c=a[d][e];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture)?b[d][e]=
c.clone():Array.isArray(c)?b[d][e]=c.slice():b[d][e]=c}}return b};return c}(),H={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",
aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",
lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",
lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#endif\n#endif\n",
lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",
metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",
roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",
distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",
equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},
Be={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h.Color=function(){function c(a,b,d){this.isColor=!0;this.b=this.g=this.r=1;return void 0===b&&void 0===d?this.set(a):this.setRGB(a,b,d)}c.prototype.set=function(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this};c.prototype.setScalar=function(a){this.b=this.g=this.r=a;return this};c.prototype.setHex=function(a){a=
Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this};c.prototype.setRGB=function(a,b,d){this.r=a;this.g=b;this.b=d;return this};c.prototype.setHSL=function(a,b,d){function e(a,b,d){0>d&&(d+=1);1<d&&--d;return d<1/6?a+6*(b-a)*d:.5>d?b:d<2/3?a+6*(b-a)*(2/3-d):a}a=E.euclideanModulo(a,1);b=E.clamp(b,0,1);d=E.clamp(d,0,1);0===b?this.r=this.g=this.b=d:(b=.5>=d?d*(1+b):d+b-d*b,d=2*d-b,this.r=e(d,b,a+1/3),this.g=e(d,b,a),this.b=e(d,b,a-1/3));return this};c.prototype.setStyle=
function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var d;if(d=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var e=void 0,c=d[2];switch(d[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,b(e[5]),this;if(e=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c))return this.r=
Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,b(e[5]),this;break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(c)){d=parseFloat(e[1])/360;c=parseInt(e[2],10)/100;var f=parseInt(e[3],10)/100;b(e[5]);return this.setHSL(d,c,f)}}}else if(d=/^#([A-Fa-f0-9]+)$/.exec(a)){e=d[1];d=e.length;if(3===d)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+
e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}a&&0<a.length&&(e=Be[a],void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+a));return this};c.prototype.clone=function(){return new c(this.r,this.g,this.b)};c.prototype.copy=function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this};c.prototype.copyGammaToLinear=
function(a,b){void 0===b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this};c.prototype.copyLinearToGamma=function(a,b){void 0===b&&(b=2);b=0<b?1/b:1;this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return this};c.prototype.convertGammaToLinear=function(){var a=this.r,b=this.g,d=this.b;this.r=a*a;this.g=b*b;this.b=d*d;return this};c.prototype.convertLinearToGamma=function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);
return this};c.prototype.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0};c.prototype.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)};c.prototype.getHSL=function(a){a=a||new c.hsl;var b=this.r,d=this.g,e=this.b,g=Math.max(b,d,e),f=Math.min(b,d,e),k,l=(f+g)/2;if(f===g)f=k=0;else{var n=g-f;f=.5>=l?n/(g+f):n/(2-g-f);switch(g){case b:k=(d-e)/n+(d<e?6:0);break;case d:k=(e-b)/n+2;break;case e:k=(b-d)/n+4}k/=6}a.h=k;a.s=f;a.l=l;return a};c.prototype.getStyle=
function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"};c.prototype.offsetHSL=function(a,b,d){var e=this.getHSL();e.h+=a;e.s+=b;e.l+=d;this.setHSL(e.h,e.s,e.l);return this};c.prototype.add=function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this};c.prototype.addColors=function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this};c.prototype.addScalar=function(a){this.r+=a;this.g+=a;this.b+=a;return this};c.prototype.sub=function(a){this.r=Math.max(0,this.r-a.r);
this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return this};c.prototype.multiply=function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this};c.prototype.multiplyScalar=function(a){this.r*=a;this.g*=a;this.b*=a;return this};c.prototype.lerp=function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this};c.prototype.equals=function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b};c.prototype.fromArray=function(a,b){void 0===b&&(b=0);this.r=a[b];this.g=
a[b+1];this.b=a[b+2];return this};c.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.r;a[b+1]=this.g;a[b+2]=this.b;return a};c.prototype.toJSON=function(){return this.getHex()};return c}();(function(c){var a=function(){return function(){this.l=this.s=this.h=0}}();c.hsl=a})(h.Color||(h.Color={}));var C=function(){function c(){}c.common={diffuse:{value:new h.Color(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Z},alphaMap:{value:null}};c.specularmap=
{specularMap:{value:null}};c.envmap={envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}};c.aomap={aoMap:{value:null},aoMapIntensity:{value:1}};c.lightmap={lightMap:{value:null},lightMapIntensity:{value:1}};c.emissivemap={emissiveMap:{value:null}};c.bumpmap={bumpMap:{value:null},bumpScale:{value:1}};c.normalmap={normalMap:{value:null},normalScale:{value:new y(1,1)}};c.displacementmap={displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}};
c.roughnessmap={roughnessMap:{value:null}};c.metalnessmap={metalnessMap:{value:null}};c.gradientmap={gradientMap:{value:null}};c.fog={fogDensity:{value:2.5E-4},fogNear:{value:1},fogFar:{value:2E3},fogColor:{value:new h.Color(16777215)}};c.lights={ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},
position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],
properties:{color:{},position:{},width:{},height:{}}}};c.points={diffuse:{value:new h.Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Z}};return c}(),Ea=function(){function c(){}c.basic={uniforms:Q.merge([C.common,C.specularmap,C.envmap,C.aomap,C.lightmap,C.fog]),vertexShader:H.meshbasic_vert,fragmentShader:H.meshbasic_frag};c.lambert={uniforms:Q.merge([C.common,C.specularmap,C.envmap,C.aomap,C.lightmap,C.emissivemap,C.fog,C.lights,{emissive:{value:new h.Color(0)}}]),
vertexShader:H.meshlambert_vert,fragmentShader:H.meshlambert_frag};c.phong={uniforms:Q.merge([C.common,C.specularmap,C.envmap,C.aomap,C.lightmap,C.emissivemap,C.bumpmap,C.normalmap,C.displacementmap,C.gradientmap,C.fog,C.lights,{emissive:{value:new h.Color(0)},specular:{value:new h.Color(1118481)},shininess:{value:30}}]),vertexShader:H.meshphong_vert,fragmentShader:H.meshphong_frag};c.standard={uniforms:Q.merge([C.common,C.envmap,C.aomap,C.lightmap,C.emissivemap,C.bumpmap,C.normalmap,C.displacementmap,
C.roughnessmap,C.metalnessmap,C.fog,C.lights,{emissive:{value:new h.Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:H.meshphysical_vert,fragmentShader:H.meshphysical_frag};c.points={uniforms:Q.merge([C.points,C.fog]),vertexShader:H.points_vert,fragmentShader:H.points_frag};c.dashed={uniforms:Q.merge([C.common,C.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:H.linedashed_vert,fragmentShader:H.linedashed_frag};c.depth={uniforms:Q.merge([C.common,
C.displacementmap]),vertexShader:H.depth_vert,fragmentShader:H.depth_frag};c.normal={uniforms:Q.merge([C.common,C.bumpmap,C.normalmap,C.displacementmap,{opacity:{value:1}}]),vertexShader:H.normal_vert,fragmentShader:H.normal_frag};c.cube={uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:H.cube_vert,fragmentShader:H.cube_frag};c.equirect={uniforms:{tEquirect:{value:null}},vertexShader:H.equirect_vert,fragmentShader:H.equirect_frag};c.distanceRGBA={uniforms:Q.merge([C.common,
C.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1E3}}]),vertexShader:H.distanceRGBA_vert,fragmentShader:H.distanceRGBA_frag};c.shadow={uniforms:Q.merge([C.lights,C.fog,{color:{value:new h.Color(0)},opacity:{value:1}}]),vertexShader:H.shadow_vert,fragmentShader:H.shadow_frag};c.physical={uniforms:Q.merge([c.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:H.meshphysical_vert,fragmentShader:H.meshphysical_frag};return c}(),
Ac=function(c){function a(a,d,e,g,f,k,l,n,h){a=c.call(this,a,d,e,g,f,k,l,n,h)||this;a.needsUpdate=!0;return a}r(a,c);return a}(Y),Ce=function(){function c(a,b,d,e,c){this.spritePosition=new q;this.spriteRotation=new N;this.spriteScale=new q;this.renderer=a;this.gl=b;this.state=d;this.textures=e;this.capabilities=c}c.prototype.init=function(){var a=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),b=new Uint16Array([0,1,2,0,2,3]);this.vertexBuffer=this.gl.createBuffer();this.elementBuffer=
this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.elementBuffer);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,b,this.gl.STATIC_DRAW);this.program=this.createProgram();this.attributes={position:this.gl.getAttribLocation(this.program,"position"),uv:this.gl.getAttribLocation(this.program,"uv")};this.uniforms={uvOffset:this.gl.getUniformLocation(this.program,
"uvOffset"),uvScale:this.gl.getUniformLocation(this.program,"uvScale"),rotation:this.gl.getUniformLocation(this.program,"rotation"),center:this.gl.getUniformLocation(this.program,"center"),scale:this.gl.getUniformLocation(this.program,"scale"),color:this.gl.getUniformLocation(this.program,"color"),map:this.gl.getUniformLocation(this.program,"map"),opacity:this.gl.getUniformLocation(this.program,"opacity"),modelViewMatrix:this.gl.getUniformLocation(this.program,"modelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(this.program,
"projectionMatrix"),fogType:this.gl.getUniformLocation(this.program,"fogType"),fogDensity:this.gl.getUniformLocation(this.program,"fogDensity"),fogNear:this.gl.getUniformLocation(this.program,"fogNear"),fogFar:this.gl.getUniformLocation(this.program,"fogFar"),fogColor:this.gl.getUniformLocation(this.program,"fogColor"),fogDepth:this.gl.getUniformLocation(this.program,"fogDepth"),alphaTest:this.gl.getUniformLocation(this.program,"alphaTest")};a=document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas");a.width=8;a.height=8;b=a.getContext("2d");b.fillStyle="white";b.fillRect(0,0,8,8);this.texture=new Ac(a)};c.prototype.render=function(a,b,d){if(0!==a.length){void 0===this.program&&this.init();this.state.useProgram(this.program);this.state.initAttributes();this.state.enableAttribute(this.attributes.position);this.state.enableAttribute(this.attributes.uv);this.state.disableUnusedAttributes();this.state.disable(this.gl.CULL_FACE);this.state.enable(this.gl.BLEND);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
this.vertexBuffer);this.gl.vertexAttribPointer(this.attributes.position,2,this.gl.FLOAT,!1,16,0);this.gl.vertexAttribPointer(this.attributes.uv,2,this.gl.FLOAT,!1,16,8);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.elementBuffer);this.gl.uniformMatrix4fv(this.uniforms.projectionMatrix,!1,d.projectionMatrix.elements);this.state.activeTexture(this.gl.TEXTURE0);this.gl.uniform1i(this.uniforms.map,0);var e=0,c=0,f=b.fog;f?(this.gl.uniform3f(this.uniforms.fogColor,f.color.r,f.color.g,f.color.b),
f.isFog?(this.gl.uniform1f(this.uniforms.fogNear,f.near),this.gl.uniform1f(this.uniforms.fogFar,f.far),this.gl.uniform1i(this.uniforms.fogType,1),c=e=1):f.isFogExp2&&(this.gl.uniform1f(this.uniforms.fogDensity,f.density),this.gl.uniform1i(this.uniforms.fogType,2),c=e=2)):(this.gl.uniform1i(this.uniforms.fogType,0),c=e=0);f=0;for(var k=a.length;f<k;f++){var l=a[f];l.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,l.matrixWorld);l.z=-l.modelViewMatrix.elements[14]}a.sort(this.painterSortStable);
var n=[],h=[];f=0;for(k=a.length;f<k;f++){l=a[f];var m=l.material;if(!1!==m.visible){l.onBeforeRender(this.renderer,b,d,void 0,m,void 0);this.gl.uniform1f(this.uniforms.alphaTest,m.alphaTest);this.gl.uniformMatrix4fv(this.uniforms.modelViewMatrix,!1,l.modelViewMatrix.elements);l.matrixWorld.decompose(this.spritePosition,this.spriteRotation,this.spriteScale);n[0]=this.spriteScale.x;n[1]=this.spriteScale.y;h[0]=l.center.x-.5;h[1]=l.center.y-.5;var t=0;b.fog&&m.fog&&(t=c);e!==t&&(this.gl.uniform1i(this.uniforms.fogType,
t),e=t);null!==m.map?(this.gl.uniform2f(this.uniforms.uvOffset,m.map.offset.x,m.map.offset.y),this.gl.uniform2f(this.uniforms.uvScale,m.map.repeat.x,m.map.repeat.y)):(this.gl.uniform2f(this.uniforms.uvOffset,0,0),this.gl.uniform2f(this.uniforms.uvScale,1,1));this.gl.uniform1f(this.uniforms.opacity,m.opacity);this.gl.uniform3f(this.uniforms.color,m.color.r,m.color.g,m.color.b);this.gl.uniform1f(this.uniforms.rotation,m.rotation);this.gl.uniform2fv(this.uniforms.center,h);this.gl.uniform2fv(this.uniforms.scale,
n);this.state.setBlending(m.blending,m.blendEquation,m.blendSrc,m.blendDst,m.blendEquationAlpha,m.blendSrcAlpha,m.blendDstAlpha,m.premultipliedAlpha);this.state.buffers.depth.setTest(m.depthTest);this.state.buffers.depth.setMask(m.depthWrite);this.state.buffers.color.setMask(m.colorWrite);this.textures.setTexture2D(m.map||this.texture,0);this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0);l.onAfterRender(this.renderer,b,d,void 0,m,void 0)}}this.state.enable(this.gl.CULL_FACE);this.state.reset()}};
c.prototype.createProgram=function(){var a=this.gl.createProgram(),b=this.gl.createShader(this.gl.VERTEX_SHADER),d=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(b,["precision "+this.capabilities.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvUV = uvOffset + uv * uvScale;\n\tvec2 alignedPosition = ( position - center ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tvec4 mvPosition;\n\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\tfogDepth = - mvPosition.z;\n}"].join("\n"));
this.gl.shaderSource(d,["precision "+this.capabilities.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n\tvec4 texture = texture2D( map, vUV );\n\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n\tif ( gl_FragColor.a < alphaTest ) discard;\n\tif ( fogType > 0 ) {\n\t\tfloat fogFactor = 0.0;\n\t\tif ( fogType == 1 ) {\n\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t\t} else {\n\t\t\tconst float LOG2 = 1.442695;\n\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\t\t}\n\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\t}\n}"].join("\n"));
this.gl.compileShader(b);this.gl.compileShader(d);this.gl.attachShader(a,b);this.gl.attachShader(a,d);this.gl.linkProgram(a);return a};c.prototype.painterSortStable=function(a,b){return a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id};return c}();h.Material=function(c){function a(){var b=c.call(this)||this;b.id=a.materialId++;b.uuid=E.generateUUID();b.name="";b.type="Material";b.fog=!0;b.lights=!0;b.blending=1;b.side=0;b.flatShading=!1;b.vertexColors=0;b.opacity=
1;b.transparent=!1;b.blendSrc=204;b.blendDst=205;b.blendEquation=100;b.blendSrcAlpha=null;b.blendDstAlpha=null;b.blendEquationAlpha=null;b.depthFunc=3;b.depthTest=!0;b.depthWrite=!0;b.clippingPlanes=null;b.clipIntersection=!1;b.clipShadows=!1;b.shadowSide=null;b.colorWrite=!0;b.precision=null;b.polygonOffset=!1;b.polygonOffsetFactor=0;b.polygonOffsetUnits=0;b.dithering=!1;b.alphaTest=0;b.premultipliedAlpha=!1;b.overdraw=0;b.visible=!0;b.userData={};b.needsUpdate=!0;b.isMaterial=!0;return b}r(a,c);
a.prototype.onBeforeCompile=function(){};a.prototype.setValues=function(a){if(void 0!==a)for(var b in a){var e=a[b];if(void 0===e)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if("shading"===b)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e?!0:!1;else{var c=this[b];void 0===c?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):c&&c.isColor?c.set(e):c&&c.isVector3&&e&&e.isVector3?
c.copy(e):this[b]="overdraw"===b?Number(e):e}}};a.prototype.toJSON=function(b){function d(a){var b=[],d;for(d in a){var e=a[d];delete e.metadata;b.push(e)}return b}var e=void 0===b||"string"===typeof b;e&&(b={textures:{},images:{}});var c=new a.Data;c.metadata={version:4.5,type:"Material",generator:"Material.toJSON"};c.uuid=this.uuid;c.type=this.type;""!==this.name&&(c.name=this.name);this.color&&this.color.isColor&&(c.color=this.color.getHex());void 0!==this.roughness&&(c.roughness=this.roughness);
void 0!==this.metalness&&(c.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex());1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity);this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex());void 0!==this.shininess&&(c.shininess=this.shininess);void 0!==this.clearCoat&&(c.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(c.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(c.map=
this.map.toJSON(b).uuid);this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(b).uuid);this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(b).uuid);this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(b).uuid,c.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(b).uuid,c.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(b).uuid,
c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(b).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(b).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(b).uuid);this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(b).uuid);this.envMap&&this.envMap.isTexture&&
(c.envMap=this.envMap.toJSON(b).uuid,c.reflectivity=this.reflectivity);this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(b).uuid);void 0!==this.size&&(c.size=this.size);void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(c.blending=this.blending);!0===this.flatShading&&(c.flatShading=this.flatShading);0!==this.side&&(c.side=this.side);0!==this.vertexColors&&(c.vertexColors=this.vertexColors);1>this.opacity&&(c.opacity=this.opacity);
!0===this.transparent&&(c.transparent=this.transparent);c.depthFunc=this.depthFunc;c.depthTest=this.depthTest;c.depthWrite=this.depthWrite;0!==this.rotation&&(c.rotation=this.rotation);1!==this.linewidth&&(c.linewidth=this.linewidth);void 0!==this.dashSize&&(c.dashSize=this.dashSize);void 0!==this.gapSize&&(c.gapSize=this.gapSize);void 0!==this.scale&&(c.scale=this.scale);!0===this.dithering&&(c.dithering=!0);0<this.alphaTest&&(c.alphaTest=this.alphaTest);!0===this.premultipliedAlpha&&(c.premultipliedAlpha=
this.premultipliedAlpha);!0===this.wireframe&&(c.wireframe=this.wireframe);1<this.wireframeLinewidth&&(c.wireframeLinewidth=this.wireframeLinewidth);"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap);"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin);!0===this.morphTargets&&(c.morphTargets=!0);!0===this.skinning&&(c.skinning=!0);!1===this.visible&&(c.visible=!1);"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData);e&&(e=d(b.textures),
b=d(b.images),0<e.length&&(c.textures=e),0<b.length&&(c.images=b));return c};a.prototype.clone=function(){return(new this.constructor).copy(this)};a.prototype.copy=function(a){this.name=a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.flatShading=a.flatShading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;
this.blendDstAlpha=a.blendDstAlpha;this.blendEquationAlpha=a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.dithering=a.dithering;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.userData=
JSON.parse(JSON.stringify(a.userData));this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;var b=a.clippingPlanes,e=null;if(null!==b){var c=b.length;e=Array(c);for(var f=0;f!==c;++f)e[f]=b[f].clone()}this.clippingPlanes=e;this.shadowSide=a.shadowSide;return this};a.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};a.materialId=0;return a}(ma);(function(c){var a=function(){return function(){}}();c.Data=a})(h.Material||(h.Material={}));var hb=function(c){function a(a){var b=
c.call(this)||this;b.type="MeshDepthMaterial";b.isMeshDepthMaterial=!0;b.depthPacking=3200;b.skinning=!1;b.morphTargets=!1;b.map=null;b.alphaMap=null;b.displacementMap=null;b.displacementScale=1;b.displacementBias=0;b.wireframe=!1;b.wireframeLinewidth=1;b.fog=!1;b.lights=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=
a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return this};return a}(h.Material),ib=function(c){function a(a){var b=c.call(this)||this;b.type="MeshDistanceMaterial";b.isMeshDistanceMaterial=!0;b.referencePosition=new q;b.nearDistance=1;b.farDistance=1E3;b.skinning=!1;b.morphTargets=!1;b.map=null;b.alphaMap=null;b.displacementMap=null;b.displacementScale=1;b.displacementBias=
0;b.fog=!1;b.lights=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.referencePosition.copy(a.referencePosition);this.nearDistance=a.nearDistance;this.farDistance=a.farDistance;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;return this};return a}(h.Material),na=function(){function c(a,
b){this.isBox3=!0;this.min=void 0!==a?a:new q(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new q(-Infinity,-Infinity,-Infinity)}c.prototype.set=function(a,b){this.min.copy(a);this.max.copy(b);return this};c.prototype.setFromArray=function(a){for(var b=Infinity,d=Infinity,e=Infinity,c=-Infinity,f=-Infinity,k=-Infinity,l=0,n=a.length;l<n;l+=3){var h=a[l],m=a[l+1],t=a[l+2];h<b&&(b=h);m<d&&(d=m);t<e&&(e=t);h>c&&(c=h);m>f&&(f=m);t>k&&(k=t)}this.min.set(b,d,e);this.max.set(c,f,k);return this};c.prototype.setFromBufferAttribute=
function(a){for(var b=Infinity,d=Infinity,e=Infinity,c=-Infinity,f=-Infinity,k=-Infinity,l=0,n=a.count;l<n;l++){var h=a.getX(l),m=a.getY(l),t=a.getZ(l);h<b&&(b=h);m<d&&(d=m);t<e&&(e=t);h>c&&(c=h);m>f&&(f=m);t>k&&(k=t)}this.min.set(b,d,e);this.max.set(c,f,k);return this};c.prototype.setFromPoints=function(a){this.makeEmpty();for(var b=0,d=a.length;b<d;b++)this.expandByPoint(a[b]);return this};c.prototype.setFromCenterAndSize=function(a,b){b=(new q).copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);
this.max.copy(a).add(b);return this};c.prototype.setFromObject=function(a){this.makeEmpty();return this.expandByObject(a)};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.min.copy(a.min);this.max.copy(a.max);return this};c.prototype.makeEmpty=function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this};c.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z};c.prototype.getCenter=
function(a){a=a||new q;return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)};c.prototype.getSize=function(a){a=a||new q;return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)};c.prototype.expandByPoint=function(a){this.min.min(a);this.max.max(a);return this};c.prototype.expandByVector=function(a){this.min.sub(a);this.max.add(a);return this};c.prototype.expandByScalar=function(a){this.min.addScalar(-a);this.max.addScalar(a);return this};c.prototype.expandByObject=
function(a){var b,d,e=new q;var c=this;a.updateMatrixWorld(!0);a.traverse(function(a){var g=a.geometry;if(void 0!==g)if(g.isGeometry)for(g=g.vertices,b=0,d=g.length;b<d;b++)e.copy(g[b]),e.applyMatrix4(a.matrixWorld),c.expandByPoint(e);else if(g.isBufferGeometry&&(g=g.attributes.position,void 0!==g))for(b=0,d=g.count;b<d;b++)e.fromBufferAttribute(g,b).applyMatrix4(a.matrixWorld),c.expandByPoint(e)});return this};c.prototype.containsPoint=function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||
a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0};c.prototype.containsBox=function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z};c.prototype.getParameter=function(a,b){return(b||new q).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))};c.prototype.intersectsBox=function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<
this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0};c.prototype.intersectsSphere=function(a){var b=new q;this.clampPoint(a.center,b);return b.distanceToSquared(a.center)<=a.radius*a.radius};c.prototype.intersectsPlane=function(a){if(0<a.normal.x){var b=a.normal.x*this.min.x;var d=a.normal.x*this.max.x}else b=a.normal.x*this.max.x,d=a.normal.x*this.min.x;0<a.normal.y?(b+=a.normal.y*this.min.y,d+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,d+=a.normal.y*this.min.y);0<
a.normal.z?(b+=a.normal.z*this.min.z,d+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,d+=a.normal.z*this.min.z);return b<=a.constant&&d>=a.constant};c.prototype.intersectsTriangle=function(a){function b(a){var b;var g=0;for(b=a.length-3;g<=b;g+=3){n.fromArray(a,g);var f=m.x*Math.abs(n.x)+m.y*Math.abs(n.y)+m.z*Math.abs(n.z),k=d.dot(n),l=e.dot(n),h=c.dot(n);if(Math.max(-Math.max(k,l,h),Math.min(k,l,h))>f)return!1}return!0}var d=new q,e=new q,c=new q,f=new q,k=new q,l=new q,n=new q,h=new q,m=new q,
t=new q;if(this.isEmpty())return!1;this.getCenter(h);m.subVectors(this.max,h);d.subVectors(a.a,h);e.subVectors(a.b,h);c.subVectors(a.c,h);f.subVectors(e,d);k.subVectors(c,e);l.subVectors(d,c);a=[0,-f.z,f.y,0,-k.z,k.y,0,-l.z,l.y,f.z,0,-f.x,k.z,0,-k.x,l.z,0,-l.x,-f.y,f.x,0,-k.y,k.x,0,-l.y,l.x,0];if(!b(a))return!1;a=[1,0,0,0,1,0,0,0,1];if(!b(a))return!1;t.crossVectors(f,k);a=[t.x,t.y,t.z];return b(a)};c.prototype.clampPoint=function(a,b){return(b||new q).copy(a).clamp(this.min,this.max)};c.prototype.distanceToPoint=
function(a){return(new q).copy(a).clamp(this.min,this.max).sub(a).length()};c.prototype.getBoundingSphere=function(a){var b=new q;a=a||new ia;this.getCenter(a.center);a.radius=.5*this.getSize(b).length();return a};c.prototype.intersect=function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this};c.prototype.union=function(a){this.min.min(a.min);this.max.max(a.max);return this};c.prototype.applyMatrix4=function(a){var b=[new q,new q,new q,new q,new q,new q,new q,
new q];if(this.isEmpty())return this;b[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a);b[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a);b[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a);b[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a);b[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a);b[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a);b[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a);b[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a);
this.setFromPoints(b);return this};c.prototype.translate=function(a){this.min.add(a);this.max.add(a);return this};c.prototype.equals=function(a){return a.min.equals(this.min)&&a.max.equals(this.max)};return c}(),ia=function(){function c(a,b){void 0===b&&(b=0);this.center=void 0!==a?a:new q;this.radius=b}c.prototype.set=function(a,b){this.center.copy(a);this.radius=b;return this};c.prototype.setFromPoints=function(a,b){var d=new na,e=this.center;void 0!==b?e.copy(b):d.setFromPoints(a).getCenter(e);
d=b=0;for(var c=a.length;d<c;d++)b=Math.max(b,e.distanceToSquared(a[d]));this.radius=Math.sqrt(b);return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.center.copy(a.center);this.radius=a.radius;return this};c.prototype.empty=function(){return 0>=this.radius};c.prototype.containsPoint=function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius};c.prototype.distanceToPoint=function(a){return a.distanceTo(this.center)-this.radius};c.prototype.intersectsSphere=
function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b};c.prototype.intersectsBox=function(a){return a.intersectsSphere(this)};c.prototype.intersectsPlane=function(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius};c.prototype.clampPoint=function(a,b){var d=this.center.distanceToSquared(a);b=b||new q;b.copy(a);d>this.radius*this.radius&&(b.sub(this.center).normalize(),b.multiplyScalar(this.radius).add(this.center));return b};c.prototype.getBoundingBox=
function(a){a=a||new na;a.set(this.center,this.center);a.expandByScalar(this.radius);return a};c.prototype.applyMatrix4=function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this};c.prototype.translate=function(a){this.center.add(a);return this};c.prototype.equals=function(a){return a.center.equals(this.center)&&a.radius===this.radius};return c}(),aa=function(){function c(a,b){void 0===b&&(b=0);this.normal=void 0!==a?a:new q(1,0,0);this.constant=b}c.prototype.set=function(a,
b){this.normal.copy(a);this.constant=b;return this};c.prototype.setComponents=function(a,b,d,e){this.normal.set(a,b,d);this.constant=e;return this};c.prototype.setFromNormalAndCoplanarPoint=function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this};c.prototype.setFromCoplanarPoints=function(a,b,d){var e=new q,c=new q;b=e.subVectors(d,b).cross(c.subVectors(a,b)).normalize();this.setFromNormalAndCoplanarPoint(b,a);return this};c.prototype.clone=function(){return(new c).copy(this)};
c.prototype.copy=function(a){this.normal.copy(a.normal);this.constant=a.constant;return this};c.prototype.normalize=function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this};c.prototype.negate=function(){this.constant*=-1;this.normal.negate();return this};c.prototype.distanceToPoint=function(a){return this.normal.dot(a)+this.constant};c.prototype.distanceToSphere=function(a){return this.distanceToPoint(a.center)-a.radius};c.prototype.projectPoint=function(a,
b){return(b||new q).copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)};c.prototype.intersectLine=function(a,b){var d=new q;b=b||new q;d=a.delta(d);var e=this.normal.dot(d);if(0===e){if(0===this.distanceToPoint(a.start))return b.copy(a.start)}else if(e=-(a.start.dot(this.normal)+this.constant)/e,!(0>e||1<e))return b.copy(d).multiplyScalar(e).add(a.start)};c.prototype.intersectsLine=function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<
b};c.prototype.intersectsBox=function(a){return a.intersectsPlane(this)};c.prototype.intersectsSphere=function(a){return a.intersectsPlane(this)};c.prototype.coplanarPoint=function(a){return(a||new q).copy(this.normal).multiplyScalar(-this.constant)};c.prototype.applyMatrix4=function(a,b){var d=new q,e=new Z;b=b||e.getNormalMatrix(a);a=this.coplanarPoint(d).applyMatrix4(a);d=this.normal.applyMatrix3(b).normalize();this.constant=-a.dot(d);return this};c.prototype.translate=function(a){this.constant-=
a.dot(this.normal);return this};c.prototype.equals=function(a){return a.normal.equals(this.normal)&&a.constant===this.constant};return c}(),jb=function(){function c(a,b,d,e,c,f){this.planes=[void 0!==a?a:new aa,void 0!==b?b:new aa,void 0!==d?d:new aa,void 0!==e?e:new aa,void 0!==c?c:new aa,void 0!==f?f:new aa]}c.prototype.set=function(a,b,d,c,g,f){var e=this.planes;e[0].copy(a);e[1].copy(b);e[2].copy(d);e[3].copy(c);e[4].copy(g);e[5].copy(f);return this};c.prototype.clone=function(){return(new c).copy(this)};
c.prototype.copy=function(a){for(var b=this.planes,d=0;6>d;d++)b[d].copy(a.planes[d]);return this};c.prototype.setFromMatrix=function(a){var b=this.planes,d=a.elements;a=d[0];var e=d[1],c=d[2],f=d[3],k=d[4],l=d[5],n=d[6],h=d[7],m=d[8],t=d[9],v=d[10],u=d[11],q=d[12],r=d[13],B=d[14];d=d[15];b[0].setComponents(f-a,h-k,u-m,d-q).normalize();b[1].setComponents(f+a,h+k,u+m,d+q).normalize();b[2].setComponents(f+e,h+l,u+t,d+r).normalize();b[3].setComponents(f-e,h-l,u-t,d-r).normalize();b[4].setComponents(f-
c,h-n,u-v,d-B).normalize();b[5].setComponents(f+c,h+n,u+v,d+B).normalize();return this};c.prototype.intersectsObject=function(a){var b=new ia,d=a.geometry;null===d.boundingSphere&&d.computeBoundingSphere();b.copy(d.boundingSphere).applyMatrix4(a.matrixWorld);return this.intersectsSphere(b)};c.prototype.intersectsSprite=function(a){var b=new ia;b.center.set(0,0,0);b.radius=.7071067811865476;b.applyMatrix4(a.matrixWorld);return this.intersectsSphere(b)};c.prototype.intersectsSphere=function(a){var b=
this.planes,d=a.center;a=-a.radius;for(var c=0;6>c;c++)if(b[c].distanceToPoint(d)<a)return!1;return!0};c.prototype.intersectsBox=function(a){for(var b=new q,d=new q,c=this.planes,g=0;6>g;g++){var f=c[g];b.x=0<f.normal.x?a.min.x:a.max.x;d.x=0<f.normal.x?a.max.x:a.min.x;b.y=0<f.normal.y?a.min.y:a.max.y;d.y=0<f.normal.y?a.max.y:a.min.y;b.z=0<f.normal.z?a.min.z:a.max.z;d.z=0<f.normal.z?a.max.z:a.min.z;var k=f.distanceToPoint(b);f=f.distanceToPoint(d);if(0>k&&0>f)return!1}return!0};c.prototype.containsPoint=
function(a){for(var b=this.planes,d=0;6>d;d++)if(0>b[d].distanceToPoint(a))return!1;return!0};return c}(),Bc=function(){function c(a,b,d){this._frustum=new jb;this._projScreenMatrix=new F;this._shadowMapSize=new y;this._lookTarget=new q;this._lightPositionWorld=new q;this._MorphingFlag=1;this._SkinningFlag=2;this._materialCache={};this.shadowSide={0:1,1:0,2:2};this.cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)];this.cubeUps=[new q(0,1,0),new q(0,
1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)];this.cube2DViewPorts=[new J,new J,new J,new J,new J,new J];this._renderer=a;this._objects=b;this._maxShadowMapSize=new y(d,d);this._NumberOfMaterialVariants=(this._MorphingFlag|this._SkinningFlag)+1;this._depthMaterials=Array(this._NumberOfMaterialVariants);this._distanceMaterials=Array(this._NumberOfMaterialVariants);for(a=0;a!==this._NumberOfMaterialVariants;++a){b=0!==(a&this._MorphingFlag);d=0!==(a&this._SkinningFlag);var c=new hb({depthPacking:3201,
morphTargets:b,skinning:d});this._depthMaterials[a]=c;b=new ib({morphTargets:b,skinning:d});this._distanceMaterials[a]=b}this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1}c.prototype.render=function(a,b,d){if(!1!==this.enabled&&(!1!==this.autoUpdate||!1!==this.needsUpdate)&&0!==a.length){var c=this._renderer.state;c.disable(this._renderer.context.BLEND);c.buffers.color.setClear(1,1,1,1);c.buffers.depth.setTest(!0);c.setScissorTest(!1);for(var g,f=0,k=a.length;f<k;f++){var l=a[f];
g=l.shadow;var n=l&&l.isPointLight;if(void 0===g)console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");else{var h=g.camera;this._shadowMapSize.copy(g.mapSize);this._shadowMapSize.min(this._maxShadowMapSize);if(n){var m=this._shadowMapSize.x,t=this._shadowMapSize.y;this.cube2DViewPorts[0].set(2*m,t,m,t);this.cube2DViewPorts[1].set(0,t,m,t);this.cube2DViewPorts[2].set(3*m,t,m,t);this.cube2DViewPorts[3].set(m,t,m,t);this.cube2DViewPorts[4].set(3*m,0,m,t);this.cube2DViewPorts[5].set(m,0,m,t);this._shadowMapSize.x*=
4;this._shadowMapSize.y*=2}null===g.map&&(g.map=new Ja(this._shadowMapSize.x,this._shadowMapSize.y,{minFilter:1003,magFilter:1003,format:1023}),g.map.texture.name=l.name+".shadowMap",h.updateProjectionMatrix());g.isSpotLightShadow&&g.update(l);m=g.map;t=g.matrix;this._lightPositionWorld.setFromMatrixPosition(l.matrixWorld);h.position.copy(this._lightPositionWorld);n?(g=6,t.makeTranslation(-this._lightPositionWorld.x,-this._lightPositionWorld.y,-this._lightPositionWorld.z)):(g=1,this._lookTarget.setFromMatrixPosition(l.target.matrixWorld),
h.lookAt(this._lookTarget),h.updateMatrixWorld(),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(h.projectionMatrix),t.multiply(h.matrixWorldInverse));this._renderer.setRenderTarget(m);this._renderer.clear();for(l=0;l<g;l++)n&&(this._lookTarget.copy(h.position),this._lookTarget.add(this.cubeDirections[l]),h.up.copy(this.cubeUps[l]),h.lookAt(this._lookTarget),h.updateMatrixWorld(),c.viewport(this.cube2DViewPorts[l])),this._projScreenMatrix.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),
this._frustum.setFromMatrix(this._projScreenMatrix),this.renderObject(b,d,h,n)}}this.needsUpdate=!1}};c.prototype.getDepthMaterial=function(a,b,d,c,g,f){var e=a.geometry;var l=this._depthMaterials;var n=a.customDepthMaterial;d&&(l=this._distanceMaterials,n=a.customDistanceMaterial);n?l=n:(n=!1,b.morphTargets&&(e&&e.isBufferGeometry?n=e.morphAttributes&&e.morphAttributes.position&&0<e.morphAttributes.position.length:e&&e.isGeometry&&(n=e.morphTargets&&0<e.morphTargets.length)),a.isSkinnedMesh&&!1===
b.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",a),a=a.isSkinnedMesh&&b.skinning,e=0,n&&(e|=this._MorphingFlag),a&&(e|=this._SkinningFlag),l=l[e]);this._renderer.localClippingEnabled&&!0===b.clipShadows&&0!==b.clippingPlanes.length&&(e=l.uuid,n=b.uuid,a=this._materialCache[e],void 0===a&&(a={},this._materialCache[e]=a),e=a[n],void 0===e&&(e=l.clone(),a[n]=e),l=e);l.visible=b.visible;l.wireframe=b.wireframe;l.side=null!=b.shadowSide?b.shadowSide:
this.shadowSide[b.side];l.clipShadows=b.clipShadows;l.clippingPlanes=b.clippingPlanes;l.clipIntersection=b.clipIntersection;l.wireframeLinewidth=b.wireframeLinewidth;l.linewidth=b.linewidth;d&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(c),l.nearDistance=g,l.farDistance=f);return l};c.prototype.renderObject=function(a,b,d,c){if(!1!==a.visible){if(a.layers.test(b.layers)&&(a.isMesh||a.isLine||a.isPoints)&&a.castShadow&&(!a.frustumCulled||this._frustum.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,
a.matrixWorld);var e=this._objects.update(a),f=a.material;if(Array.isArray(f))for(var k=e.groups,l=0,n=k.length;l<n;l++){var h=k[l],m=f[h.materialIndex];m&&m.visible&&(m=this.getDepthMaterial(a,m,c,this._lightPositionWorld,d.near,d.far),this._renderer.renderBufferDirect(d,null,e,m,a,h))}else f.visible&&(m=this.getDepthMaterial(a,f,c,this._lightPositionWorld,d.near,d.far),this._renderer.renderBufferDirect(d,null,e,m,a,null))}a=a.children;e=0;for(f=a.length;e<f;e++)this.renderObject(a[e],b,d,c)}};return c}(),
De=function(){function c(a){this.buffers={};this.gl=a}c.prototype.createBuffer=function(a,b){var d=a.array,c=a.dynamic?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW,g=this.gl.createBuffer();this.gl.bindBuffer(b,g);this.gl.bufferData(b,d,c);a.onUploadCallback();b=this.gl.FLOAT;d instanceof Float32Array?b=this.gl.FLOAT:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?b=this.gl.UNSIGNED_SHORT:d instanceof Int16Array?b=
this.gl.SHORT:d instanceof Uint32Array?b=this.gl.UNSIGNED_INT:d instanceof Int32Array?b=this.gl.INT:d instanceof Int8Array?b=this.gl.BYTE:d instanceof Uint8Array&&(b=this.gl.UNSIGNED_BYTE);return{buffer:g,type:b,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version}};c.prototype.updateBuffer=function(a,b,d){var c=b.array,g=b.updateRange;this.gl.bindBuffer(d,a);!1===b.dynamic?this.gl.bufferData(d,c,this.gl.STATIC_DRAW):-1===g.count?this.gl.bufferSubData(d,0,c):0===g.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):
(this.gl.bufferSubData(d,g.offset*c.BYTES_PER_ELEMENT,c.subarray(g.offset,g.offset+g.count)),g.count=-1)};c.prototype.get=function(a){a.isInterleavedBufferAttribute&&(a=a.data);return this.buffers[a.uuid]};c.prototype.remove=function(a){a.isInterleavedBufferAttribute&&(a=a.data);var b=this.buffers[a.uuid];b&&(this.gl.deleteBuffer(b.buffer),delete this.buffers[a.uuid])};c.prototype.update=function(a,b){a.isInterleavedBufferAttribute&&(a=a.data);var d=this.buffers[a.uuid];void 0===d?this.buffers[a.uuid]=
this.createBuffer(a,b):d.version<a.version&&(this.updateBuffer(d.buffer,a,b),d.version=a.version)};return c}(),kb=function(){function c(a,b,d,e){void 0===a&&(a=0);void 0===b&&(b=0);void 0===d&&(d=0);void 0===e&&(e=c.DefaultOrder);this.isEuler=!0;this.onChangeCallback=function(){};this._x=a;this._y=b;this._z=d;this._order=e}Object.defineProperty(c.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"y",{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"z",{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"order",{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()},enumerable:!0,configurable:!0});c.prototype.set=function(a,b,d,c){this._x=a;this._y=b;this._z=d;
this._order=c||this._order;this.onChangeCallback();return this};c.prototype.clone=function(){return new c(this._x,this._y,this._z,this._order)};c.prototype.copy=function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this};c.prototype.setFromRotationMatrix=function(a,b,d){var c=E.clamp,g=a.elements;a=g[0];var f=g[4],k=g[8],l=g[1],n=g[5],h=g[9],m=g[2],t=g[6];g=g[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(k,-1,1)),.99999>Math.abs(k)?(this._x=Math.atan2(-h,
g),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(t,n),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(k,g),this._z=Math.atan2(l,n)):(this._y=Math.atan2(-m,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(t,-1,1)),.99999>Math.abs(t)?(this._y=Math.atan2(-m,g),this._z=Math.atan2(-f,n)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===b?(this._y=Math.asin(-c(m,-1,1)),.99999>Math.abs(m)?(this._x=Math.atan2(t,g),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-f,
n))):"YZX"===b?(this._z=Math.asin(c(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(-h,n),this._y=Math.atan2(-m,a)):(this._x=0,this._y=Math.atan2(k,g))):"XZY"===b?(this._z=Math.asin(-c(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(t,n),this._y=Math.atan2(k,a)):(this._x=Math.atan2(-h,g),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==d)this.onChangeCallback();return this};c.prototype.setFromQuaternion=function(a,b,d){var c=new F;
c.makeRotationFromQuaternion(a);return this.setFromRotationMatrix(c,b,d)};c.prototype.setFromVector3=function(a,b){return this.set(a.x,a.y,a.z,b||this._order)};c.prototype.reorder=function(a){var b=new N;b.setFromEuler(this);return this.setFromQuaternion(b,a)};c.prototype.equals=function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order};c.prototype.fromArray=function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]+"");this.onChangeCallback();
return this};c.prototype.toArray=function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a};c.prototype.toVector3=function(a){return a?a.set(this._x,this._y,this._z):new q(this._x,this._y,this._z)};c.prototype.onChange=function(a){this.onChangeCallback=a;return this};c.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");c.DefaultOrder="XYZ";return c}(),Cc=function(){function c(){this.mask=1}c.prototype.set=function(a){this.mask=1<<a|
0};c.prototype.enable=function(a){this.mask=this.mask|1<<a|0};c.prototype.toggle=function(a){this.mask^=1<<a|0};c.prototype.disable=function(a){this.mask&=~(1<<a|0)};c.prototype.test=function(a){return 0!==(this.mask&a.mask)};return c}();h.Object3D=function(c){function a(){var b=c.call(this)||this;b.uuid=E.generateUUID();b.name="";b.type="Object3D";b.parent=null;b.children=[];b.up=a.DefaultUp.clone();b.position=new q;b.rotation=new kb;b.quaternion=new N;b.scale=new q(1,1,1);b.matrix=new F;b.matrixWorld=
new F;b.matrixAutoUpdate=a.DefaultMatrixAutoUpdate;b.matrixWorldNeedsUpdate=!1;b.layers=new Cc;b.visible=!0;b.castShadow=!1;b.receiveShadow=!1;b.frustumCulled=!0;b.renderOrder=0;b.userData={};b.isObject3D=!0;b.modelViewMatrix=new F;b.normalMatrix=new Z;b.onBeforeRender=function(){};b.onAfterRender=function(){};b.id=a.object3DId++;b.rotation.onChange(function(){b.onRotationChange()});b.quaternion.onChange(function(){b.onQuaternionChange()});return b}r(a,c);a.prototype.onRotationChange=function(){this.quaternion.setFromEuler(this.rotation,
!1)};a.prototype.onQuaternionChange=function(){this.rotation.setFromQuaternion(this.quaternion,void 0,!1)};a.prototype.applyMatrix=function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)};a.prototype.applyQuaternion=function(a){this.quaternion.premultiply(a);return this};a.prototype.setRotationFromAxisAngle=function(a,d){this.quaternion.setFromAxisAngle(a,d)};a.prototype.setRotationFromEuler=function(a){this.quaternion.setFromEuler(a,
!0)};a.prototype.setRotationFromMatrix=function(a){this.quaternion.setFromRotationMatrix(a)};a.prototype.setRotationFromQuaternion=function(a){this.quaternion.copy(a)};a.prototype.rotateOnAxis=function(a,d){var b=new N;b.setFromAxisAngle(a,d);this.quaternion.multiply(b);return this};a.prototype.rotateOnWorldAxis=function(a,d){var b=new N;b.setFromAxisAngle(a,d);this.quaternion.premultiply(b);return this};a.prototype.rotateX=function(a){var b=new q(1,0,0);return this.rotateOnAxis(b,a)};a.prototype.rotateY=
function(a){var b=new q(0,1,0);return this.rotateOnAxis(b,a)};a.prototype.rotateZ=function(a){var b=new q(0,0,1);return this.rotateOnAxis(b,a)};a.prototype.translateOnAxis=function(a,d){var b=new q;b.copy(a).applyQuaternion(this.quaternion);this.position.add(b.multiplyScalar(d));return this};a.prototype.translateX=function(a){var b=new q(1,0,0);return this.translateOnAxis(b,a)};a.prototype.translateY=function(a){var b=new q(0,1,0);return this.translateOnAxis(b,a)};a.prototype.translateZ=function(a){var b=
new q(0,0,1);return this.translateOnAxis(b,a)};a.prototype.localToWorld=function(a){return a.applyMatrix4(this.matrixWorld)};a.prototype.worldToLocal=function(a){var b=new F;return a.applyMatrix4(b.getInverse(this.matrixWorld))};a.prototype.lookAt=function(a,d,c){var b=new F,e=new q;a.isVector3?e.copy(a):e.set(a,d,c);this.isCamera?b.lookAt(this.position,e,this.up):b.lookAt(e,this.position,this.up);this.quaternion.setFromRotationMatrix(b)};a.prototype.add=function(a){if(1<arguments.length){for(var b=
0;b<arguments.length;b++)this.add(arguments[b]);return this}if(a===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this;a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a);return this};a.prototype.remove=function(a){if(1<arguments.length){for(var b=0;b<arguments.length;b++)this.remove(arguments[b]);return this}b=
this.children.indexOf(a);-1!==b&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(b,1));return this};a.prototype.getObjectById=function(a){return this.getObjectByProperty("id",a)};a.prototype.getObjectByName=function(a){return this.getObjectByProperty("name",a)};a.prototype.getObjectByProperty=function(a,d){if(this[a]===d)return this;for(var b=0,c=this.children.length;b<c;b++){var f=this.children[b].getObjectByProperty(a,d);if(void 0!==f)return f}};a.prototype.getWorldPosition=
function(a){a=a||new q;this.updateMatrixWorld(!0);return a.setFromMatrixPosition(this.matrixWorld)};a.prototype.getWorldQuaternion=function(a){var b=new q,c=new q;a=a||new N;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,a,c);return a};a.prototype.getWorldRotation=function(a){var b=new N;a=a||new kb;this.getWorldQuaternion(b);return a.setFromQuaternion(b,this.rotation.order,!1)};a.prototype.getWorldScale=function(a){var b=new q,c=new N;a=a||new q;this.updateMatrixWorld(!0);this.matrixWorld.decompose(b,
c,a);return a};a.prototype.getWorldDirection=function(a){var b=new N;a=a||new q;this.getWorldQuaternion(b);return a.set(0,0,1).applyQuaternion(b)};a.prototype.raycast=function(a,d){return null};a.prototype.traverse=function(a){a(this);for(var b=this.children,c=0,g=b.length;c<g;c++)b[c].traverse(a)};a.prototype.traverseVisible=function(a){if(!1!==this.visible){a(this);for(var b=this.children,c=0,g=b.length;c<g;c++)b[c].traverseVisible(a)}};a.prototype.traverseAncestors=function(a){var b=this.parent;
null!==b&&(a(b),b.traverseAncestors(a))};a.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};a.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=this.children,c=0,g=b.length;c<g;c++)b[c].updateMatrixWorld(a)};
a.prototype.toJSON=function(b){function d(a,d){void 0===a[d.uuid]&&(a[d.uuid]=d.toJSON(b));return d.uuid}function c(a){var b=[],d;for(d in a){var c=a[d];delete c.metadata;b.push(c)}return b}var g=void 0===b||"string"===typeof b,f=new a.Data;g&&(b=new a.MetaData,f.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var k=new a.Obj;k.uuid=this.uuid;k.type=this.type;""!==this.name&&(k.name=this.name);!0===this.castShadow&&(k.castShadow=!0);!0===this.receiveShadow&&(k.receiveShadow=!0);
!1===this.visible&&(k.visible=!1);"{}"!==JSON.stringify(this.userData)&&(k.userData=this.userData);k.matrix=this.matrix.toArray();if(void 0!==this.geometry){k.geometry=d(b.geometries,this.geometry);var l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){var h=l.shapes;if(Array.isArray(h)){l=0;for(var p=h.length;l<p;l++)d(b.shapes,h[l])}else d(b.shapes,h)}}if(void 0!==this.material)if(Array.isArray(this.material)){h=[];l=0;for(p=this.material.length;l<p;l++)h.push(d(b.materials,this.material[l]));
k.material=h}else k.material=d(b.materials,this.material);if(0<this.children.length)for(k.children=[],l=0;l<this.children.length;l++)k.children.push(this.children[l].toJSON(b).object);if(g){g=c(b.geometries);l=c(b.materials);p=c(b.textures);h=c(b.images);var m=c(b.shapes);0<g.length&&(f.geometries=g);0<l.length&&(f.materials=l);0<p.length&&(f.textures=p);0<h.length&&(f.images=h);0<m.length&&(f.shapes=m)}f.object=k;return f};a.prototype.clone=function(b){return(new a).copy(this,b)};a.prototype.copy=
function(a,d){void 0===d&&(d=!0);this.name=a.name;this.up.copy(a.up);this.position.copy(a.position);this.quaternion.copy(a.quaternion);this.scale.copy(a.scale);this.matrix.copy(a.matrix);this.matrixWorld.copy(a.matrixWorld);this.matrixAutoUpdate=a.matrixAutoUpdate;this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;
this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===d)for(d=0;d<a.children.length;d++)this.add(a.children[d].clone());return this};a.object3DId=0;a.DefaultUp=new q(0,1,0);a.DefaultMatrixAutoUpdate=!0;return a}(ma);(function(c){var a=function(){return function(){this.geometries={};this.materials={};this.textures={};this.images={};this.shapes={}}}();c.MetaData=a;a=function(){return function(){}}();c.Data=a;a=function(){return function(){}}();c.Obj=a})(h.Object3D||(h.Object3D={}));h.Camera=
function(c){function a(){var a=c.call(this)||this;a.matrixWorldInverse=new F;a.projectionMatrix=new F;a.type="Camera";a.isCamera=!0;return a}r(a,c);a.prototype.copy=function(a,d){c.prototype.copy.call(this,a,d);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);return this};a.prototype.getWorldDirection=function(a){var b=new N;a=a||new q;this.getWorldQuaternion(b);return a.set(0,0,-1).applyQuaternion(b)};a.prototype.updateMatrixWorld=function(a){c.prototype.updateMatrixWorld.call(this,
a);this.matrixWorldInverse.getInverse(this.matrixWorld)};a.prototype.clone=function(){return(new a).copy(this)};return a}(h.Object3D);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Obj);c.Obj=a})(h.Camera||(h.Camera={}));h.OrthographicCamera=function(c){function a(a,d,e,g,f,k){void 0===f&&(f=.1);void 0===k&&(k=2E3);var b=c.call(this)||this;b.type="OrthographicCamera";b.zoom=1;b.view=null;b.isOrthographicCamera=!0;b.left=a;b.right=
d;b.top=e;b.bottom=g;b.near=f;b.far=k;b.updateProjectionMatrix();return b}r(a,c);a.prototype.clone=function(){var b=new a(this.left,this.right,this.top,this.bottom,this.near,this.far);b.copy(this);return b};a.prototype.copy=function(a,d){c.prototype.copy.call(this,a,d);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=null===a.view?null:Object.assign({},a.view);return this};a.prototype.setViewOffset=function(a,d,c,g,
f,k){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=d;this.view.offsetX=c;this.view.offsetY=g;this.view.width=f;this.view.height=k;this.updateProjectionMatrix()};a.prototype.clearViewOffset=function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()};a.prototype.updateProjectionMatrix=function(){var a=(this.right-this.left)/(2*this.zoom),d=(this.top-this.bottom)/
(2*this.zoom),c=(this.right+this.left)/2,g=(this.top+this.bottom)/2,f=c-a;c+=a;a=g+d;d=g-d;if(null!==this.view&&this.view.enabled){c=this.zoom/(this.view.width/this.view.fullWidth);d=this.zoom/(this.view.height/this.view.fullHeight);var k=(this.right-this.left)/this.view.width;g=(this.top-this.bottom)/this.view.height;f+=this.view.offsetX/c*k;c=f+this.view.width/c*k;a-=this.view.offsetY/d*g;d=a-this.view.height/d*g}this.projectionMatrix.makeOrthographic(f,c,a,d,this.near,this.far)};a.prototype.toJSON=
function(a){a=c.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=this.bottom;a.object.near=this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return a};return a}(h.Camera);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Data);c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||
this}r(b,a);return b}(h.Object3D.Obj);c.Obj=a})(h.OrthographicCamera||(h.OrthographicCamera={}));var oa=function(){function c(a,b,d,c,g,f){void 0===f&&(f=0);this.a=a;this.b=b;this.c=d;this.normal=c&&c.isVector3?c:new q;this.vertexNormals=Array.isArray(c)?c:[];this.color=g&&g.isColor?g:new h.Color;this.vertexColors=Array.isArray(g)?g:[];this.materialIndex=f}c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);
this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var b=0,d=a.vertexNormals.length;b<d;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(d=a.vertexColors.length;b<d;b++)this.vertexColors[b]=a.vertexColors[b].clone();return this};return c}();h.Geometry=function(c){function a(){var b=c.call(this)||this;b.uuid=E.generateUUID();b.name="";b.type="Geometry";b.vertices=[];b.colors=[];b.faces=[];b.faceVertexUvs=[[]];b.morphTargets=[];b.morphNormals=[];b.skinWeights=[];b.skinIndices=
[];b.lineDistances=[];b.boundingBox=null;b.boundingSphere=null;b.elementsNeedUpdate=!1;b.verticesNeedUpdate=!1;b.uvsNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.lineDistancesNeedUpdate=!1;b.groupsNeedUpdate=!1;b.isGeometry=!0;b.id=a.geometryId+=2;return b}r(a,c);a.prototype.applyMatrix=function(a){for(var b=(new Z).getNormalMatrix(a),c=0,g=this.vertices.length;c<g;c++)this.vertices[c].applyMatrix4(a);c=0;for(g=this.faces.length;c<g;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();
for(var f=0,k=a.vertexNormals.length;f<k;f++)a.vertexNormals[f].applyMatrix3(b).normalize()}null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();this.normalsNeedUpdate=this.verticesNeedUpdate=!0;return this};a.prototype.rotateX=function(a){var b=new F;b.makeRotationX(a);this.applyMatrix(b);return this};a.prototype.rotateY=function(a){var b=new F;b.makeRotationY(a);this.applyMatrix(b);return this};a.prototype.rotateZ=function(a){var b=new F;b.makeRotationZ(a);
this.applyMatrix(b);return this};a.prototype.translate=function(a,d,c){var b=new F;b.makeTranslation(a,d,c);this.applyMatrix(b);return this};a.prototype.scale=function(a,d,c){var b=new F;b.makeScale(a,d,c);this.applyMatrix(b);return this};a.prototype.lookAt=function(a){var b=new h.Object3D;b.lookAt(a);b.updateMatrix();this.applyMatrix(b.matrix)};a.prototype.fromBufferGeometry=function(a){function b(a,b,d,e){var g=void 0!==l?[t[a].clone(),t[b].clone(),t[d].clone()]:[],f=void 0!==n?[c.colors[a].clone(),
c.colors[b].clone(),c.colors[d].clone()]:[];e=new oa(a,b,d,g,f,e);c.faces.push(e);void 0!==p&&c.faceVertexUvs[0].push([v[a].clone(),v[b].clone(),v[d].clone()]);void 0!==m&&c.faceVertexUvs[1].push([u[a].clone(),u[b].clone(),u[d].clone()])}var c=this,g=null!==a.index?a.index.array:void 0,f=a.attributes,k=f.position.array,l=void 0!==f.normal?f.normal.array:void 0,n=void 0!==f.color?f.color.array:void 0,p=void 0!==f.uv?f.uv.array:void 0,m=void 0!==f.uv2?f.uv2.array:void 0;void 0!==m&&(this.faceVertexUvs[1]=
[]);for(var t=[],v=[],u=[],A=f=0;f<k.length;f+=3,A+=2)c.vertices.push(new q(k[f],k[f+1],k[f+2])),void 0!==l&&t.push(new q(l[f],l[f+1],l[f+2])),void 0!==n&&c.colors.push(new h.Color(n[f],n[f+1],n[f+2])),void 0!==p&&v.push(new y(p[A],p[A+1])),void 0!==m&&u.push(new y(m[A],m[A+1]));A=a.groups;if(0<A.length)for(f=0;f<A.length;f++){k=A[f];var r=k.start,B=r;for(r+=k.count;B<r;B+=3)void 0!==g?b(g[B],g[B+1],g[B+2],k.materialIndex):b(B,B+1,B+2,k.materialIndex)}else if(void 0!==g)for(f=0;f<g.length;f+=3)b(g[f],
g[f+1],g[f+2]);else for(f=0;f<k.length/3;f+=3)b(f,f+1,f+2);this.computeFaceNormals();null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());return this};a.prototype.center=function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a};a.prototype.normalize=function(){this.computeBoundingSphere();var a=this.boundingSphere.center,d=this.boundingSphere.radius;d=0===
d?1:1/d;var c=new F;c.set(d,0,0,-d*a.x,0,d,0,-d*a.y,0,0,d,-d*a.z,0,0,0,1);this.applyMatrix(c);return this};a.prototype.computeFaceNormals=function(){for(var a=new q,d=new q,c=0,g=this.faces.length;c<g;c++){var f=this.faces[c],k=this.vertices[f.a],l=this.vertices[f.b];a.subVectors(this.vertices[f.c],l);d.subVectors(k,l);a.cross(d);a.normalize();f.normal.copy(a)}};a.prototype.computeVertexNormals=function(a){void 0===a&&(a=!0);var b;var c=Array(this.vertices.length);var g=0;for(b=this.vertices.length;g<
b;g++)c[g]=new q;if(a){var f=new q,k=new q;a=0;for(g=this.faces.length;a<g;a++){b=this.faces[a];var l=this.vertices[b.a];var h=this.vertices[b.b];var p=this.vertices[b.c];f.subVectors(p,h);k.subVectors(l,h);f.cross(k);c[b.a].add(f);c[b.b].add(f);c[b.c].add(f)}}else for(this.computeFaceNormals(),a=0,g=this.faces.length;a<g;a++)b=this.faces[a],c[b.a].add(b.normal),c[b.b].add(b.normal),c[b.c].add(b.normal);g=0;for(b=this.vertices.length;g<b;g++)c[g].normalize();a=0;for(g=this.faces.length;a<g;a++)b=
this.faces[a],l=b.vertexNormals,3===l.length?(l[0].copy(c[b.a]),l[1].copy(c[b.b]),l[2].copy(c[b.c])):(l[0]=c[b.a].clone(),l[1]=c[b.b].clone(),l[2]=c[b.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)};a.prototype.computeFlatVertexNormals=function(){var a;this.computeFaceNormals();var d=0;for(a=this.faces.length;d<a;d++){var c=this.faces[d];var g=c.vertexNormals;3===g.length?(g[0].copy(c.normal),g[1].copy(c.normal),g[2].copy(c.normal)):(g[0]=c.normal.clone(),g[1]=c.normal.clone(),g[2]=
c.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)};a.prototype.computeMorphNormals=function(){var b,d;var c=0;for(d=this.faces.length;c<d;c++){var g=this.faces[c];g.__originalFaceNormal?g.__originalFaceNormal.copy(g.normal):g.__originalFaceNormal=g.normal.clone();g.__originalVertexNormals||(g.__originalVertexNormals=[]);var f=0;for(b=g.vertexNormals.length;f<b;f++)g.__originalVertexNormals[f]?g.__originalVertexNormals[f].copy(g.vertexNormals[f]):g.__originalVertexNormals[f]=g.vertexNormals[f].clone()}var k=
new a;k.faces=this.faces;f=0;for(b=this.morphTargets.length;f<b;f++){if(!this.morphNormals[f]){this.morphNormals[f]={};this.morphNormals[f].faceNormals=[];this.morphNormals[f].vertexNormals=[];g=this.morphNormals[f].faceNormals;var l=this.morphNormals[f].vertexNormals;c=0;for(d=this.faces.length;c<d;c++){var h=new q;var p={a:new q,b:new q,c:new q};g.push(h);l.push(p)}}l=this.morphNormals[f];k.vertices=this.morphTargets[f].vertices;k.computeFaceNormals();k.computeVertexNormals();c=0;for(d=this.faces.length;c<
d;c++)g=this.faces[c],h=l.faceNormals[c],p=l.vertexNormals[c],h.copy(g.normal),p.a.copy(g.vertexNormals[0]),p.b.copy(g.vertexNormals[1]),p.c.copy(g.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)g=this.faces[c],g.normal=g.__originalFaceNormal,g.vertexNormals=g.__originalVertexNormals};a.prototype.computeLineDistances=function(){for(var a=0,d=this.vertices,c=0,g=d.length;c<g;c++)0<c&&(a+=d[c].distanceTo(d[c-1])),this.lineDistances[c]=a};a.prototype.computeBoundingBox=function(){null===this.boundingBox&&
(this.boundingBox=new na);this.boundingBox.setFromPoints(this.vertices)};a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new ia);this.boundingSphere.setFromPoints(this.vertices)};a.prototype.merge=function(a,d,c){if(a&&a.isGeometry){var b,e=this.vertices.length,k=this.vertices,l=a.vertices,h=this.faces,p=a.faces,m=this.faceVertexUvs[0],t=a.faceVertexUvs[0],v=this.colors,u=a.colors;void 0===c&&(c=0);void 0!==d&&(b=(new Z).getNormalMatrix(d));a=0;for(var q=
l.length;a<q;a++){var r=l[a].clone();void 0!==d&&r.applyMatrix4(d);k.push(r)}a=0;for(q=u.length;a<q;a++)v.push(u[a].clone());a=0;for(q=p.length;a<q;a++){l=p[a];var B=l.vertexNormals;u=l.vertexColors;v=new oa(l.a+e,l.b+e,l.c+e);v.normal.copy(l.normal);void 0!==b&&v.normal.applyMatrix3(b).normalize();d=0;for(k=B.length;d<k;d++)r=B[d].clone(),void 0!==b&&r.applyMatrix3(b).normalize(),v.vertexNormals.push(r);v.color.copy(l.color);d=0;for(k=u.length;d<k;d++)r=u[d],v.vertexColors.push(r.clone());v.materialIndex=
l.materialIndex+c;h.push(v)}a=0;for(q=t.length;a<q;a++)if(c=t[a],b=[],void 0!==c){d=0;for(k=c.length;d<k;d++)b.push(c[d].clone());m.push(b)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)};a.prototype.mergeMesh=function(a){a&&a.isMesh?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)};a.prototype.mergeVertices=function(){var a={},d=[],c=[],g=Math.pow(10,
4),f;var k=0;for(f=this.vertices.length;k<f;k++){var l=this.vertices[k];l=Math.round(l.x*g)+"_"+Math.round(l.y*g)+"_"+Math.round(l.z*g);void 0===a[l]?(a[l]=k,d.push(this.vertices[k]),c[k]=d.length-1):c[k]=c[a[l]]}a=[];k=0;for(f=this.faces.length;k<f;k++)for(g=this.faces[k],g.a=c[g.a],g.b=c[g.b],g.c=c[g.c],g=[g.a,g.b,g.c],l=0;3>l;l++)if(g[l]===g[(l+1)%3]){a.push(k);break}for(k=a.length-1;0<=k;k--)for(g=a[k],this.faces.splice(g,1),c=0,f=this.faceVertexUvs.length;c<f;c++)this.faceVertexUvs[c].splice(g,
1);k=this.vertices.length-d.length;this.vertices=d;return k};a.prototype.setFromPoints=function(a){this.vertices=[];for(var b=0,c=a.length;b<c;b++){var g=a[b];this.vertices.push(new q(g.x,g.y,g.z||0))}return this};a.prototype.sortFacesByMaterialIndex=function(){for(var a=this.faces,d=a.length,c=0;c<d;c++)a[c]._id=c;a.sort(function(a,b){return a.materialIndex-b.materialIndex});var g=this.faceVertexUvs[0],f=this.faceVertexUvs[1],k,l;g&&g.length===d&&(k=[]);f&&f.length===d&&(l=[]);for(c=0;c<d;c++){var h=
a[c]._id;k&&k.push(g[h]);l&&l.push(f[h])}k&&(this.faceVertexUvs[0]=k);l&&(this.faceVertexUvs[1]=l)};a.prototype.toJSON=function(){function b(a,b,d){return d?a|1<<b:a&~(1<<b)}function d(a){var b=a.x.toString()+a.y.toString()+a.z.toString();if(void 0!==m[b])return m[b];m[b]=p.length/3;p.push(a.x,a.y,a.z);return m[b]}function c(a){var b=a.r.toString()+a.g.toString()+a.b.toString();if(void 0!==v[b])return v[b];v[b]=t.length;t.push(a.getHex());return v[b]}function g(a){var b=a.x.toString()+a.y.toString();
if(void 0!==q[b])return q[b];q[b]=u.length/2;u.push(a.x,a.y);return q[b]}var f=new a.Data;f.metadata={version:4.5,type:"Geometry",generator:"Geometry.toJSON"};f.uuid=this.uuid;f.type=this.type;f.data=new a.DataData;""!==this.name&&(f.name=this.name);if(void 0!==this.parameters){var k=this.parameters,l;for(l in k)void 0!==k[l]&&(f[l]=k[l]);return f}k=[];for(l=0;l<this.vertices.length;l++){var h=this.vertices[l];k.push(h.x,h.y,h.z)}h=[];var p=[],m={},t=[],v={},u=[],q={};for(l=0;l<this.faces.length;l++){var r=
this.faces[l],B=void 0!==this.faceVertexUvs[0][l],z=0<r.normal.length(),x=0<r.vertexNormals.length,y=1!==r.color.r||1!==r.color.g||1!==r.color.b,w=0<r.vertexColors.length,D=0;D=b(D,0,0);D=b(D,1,!0);D=b(D,2,!1);D=b(D,3,B);D=b(D,4,z);D=b(D,5,x);D=b(D,6,y);D=b(D,7,w);h.push(D);h.push(r.a,r.b,r.c);h.push(r.materialIndex);B&&(B=this.faceVertexUvs[0][l],h.push(g(B[0]),g(B[1]),g(B[2])));z&&h.push(d(r.normal));x&&(z=r.vertexNormals,h.push(d(z[0]),d(z[1]),d(z[2])));y&&h.push(c(r.color));w&&(r=r.vertexColors,
h.push(c(r[0]),c(r[1]),c(r[2])))}f.data.vertices=k;f.data.normals=p;0<t.length&&(f.data.colors=t);0<u.length&&(f.data.uvs=[u]);f.data.faces=h;return f};a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(b){var d,c,g;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=b.name;var f=b.vertices;var k=
0;for(d=f.length;k<d;k++)this.vertices.push(f[k].clone());f=b.colors;k=0;for(d=f.length;k<d;k++)this.colors.push(f[k].clone());f=b.faces;k=0;for(d=f.length;k<d;k++)this.faces.push(f[k].clone());k=0;for(d=b.faceVertexUvs.length;k<d;k++){var l=b.faceVertexUvs[k];void 0===this.faceVertexUvs[k]&&(this.faceVertexUvs[k]=[]);f=0;for(c=l.length;f<c;f++){var h=l[f],p=[];var m=0;for(g=h.length;m<g;m++)p.push(h[m].clone());this.faceVertexUvs[k].push(p)}}m=b.morphTargets;k=0;for(d=m.length;k<d;k++){g=new a.MorphTarget;
g.name=m[k].name;if(void 0!==m[k].vertices)for(g.vertices=[],f=0,c=m[k].vertices.length;f<c;f++)g.vertices.push(m[k].vertices[f].clone());if(void 0!==m[k].normals)for(g.normals=[],f=0,c=m[k].normals.length;f<c;f++)g.normals.push(m[k].normals[f].clone());this.morphTargets.push(g)}m=b.morphNormals;k=0;for(d=m.length;k<d;k++){g={};if(void 0!==m[k].vertexNormals)for(g.vertexNormals=[],f=0,c=m[k].vertexNormals.length;f<c;f++)l=m[k].vertexNormals[f],h={},h.a=l.a.clone(),h.b=l.b.clone(),h.c=l.c.clone(),
g.vertexNormals.push(h);if(void 0!==m[k].faceNormals)for(g.faceNormals=[],f=0,c=m[k].faceNormals.length;f<c;f++)g.faceNormals.push(m[k].faceNormals[f].clone());this.morphNormals.push(g)}f=b.skinWeights;k=0;for(d=f.length;k<d;k++)this.skinWeights.push(f[k].clone());f=b.skinIndices;k=0;for(d=f.length;k<d;k++)this.skinIndices.push(f[k].clone());f=b.lineDistances;k=0;for(d=f.length;k<d;k++)this.lineDistances.push(f[k]);k=b.boundingBox;null!==k&&(this.boundingBox=k.clone());k=b.boundingSphere;null!==k&&
(this.boundingSphere=k.clone());this.elementsNeedUpdate=b.elementsNeedUpdate;this.verticesNeedUpdate=b.verticesNeedUpdate;this.uvsNeedUpdate=b.uvsNeedUpdate;this.normalsNeedUpdate=b.normalsNeedUpdate;this.colorsNeedUpdate=b.colorsNeedUpdate;this.lineDistancesNeedUpdate=b.lineDistancesNeedUpdate;this.groupsNeedUpdate=b.groupsNeedUpdate;return this};a.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};a.geometryId=0;return a}(ma);(function(c){var a=function(){return function(){}}();
c.MorphTarget=a;a=function(){return function(){}}();c.Data=a;a=function(){return function(){}}();c.DataData=a})(h.Geometry||(h.Geometry={}));var G=function(){function c(a,b,d){this.uuid=E.generateUUID();this.name="";this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.isBufferAttribute=!0;this.onUploadCallback=function(){};if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.array=a;this.itemSize=b;this.count=void 0!==a?a.length/
b:0;this.normalized=!0===d}Object.defineProperty(c.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++},enumerable:!0,configurable:!0});c.prototype.setArray=function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0;this.array=a};c.prototype.setDynamic=function(a){this.dynamic=a;return this};c.prototype.copy=function(a){this.array=new a.array.constructor(a.array);this.itemSize=a.itemSize;this.count=
a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return this};c.prototype.copyAt=function(a,b,d){a*=this.itemSize;d*=b.itemSize;for(var c=0,g=this.itemSize;c<g;c++)this.array[a+c]=b.array[d+c];return this};c.prototype.copyArray=function(a){this.array.set(a);return this};c.prototype.copyColorsArray=function(a){for(var b=this.array,d=0,c=0,g=a.length;c<g;c++){var f=a[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",c),f=new h.Color);b[d++]=f.r;b[d++]=
f.g;b[d++]=f.b}return this};c.prototype.copyIndicesArray=function(a){for(var b=this.array,d=0,c=0,g=a.length;c<g;c++){var f=a[c];b[d++]=f.a;b[d++]=f.b;b[d++]=f.c}return this};c.prototype.copyVector2sArray=function(a){for(var b=this.array,d=0,c=0,g=a.length;c<g;c++){var f=a[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",c),f=new y);b[d++]=f.x;b[d++]=f.y}return this};c.prototype.copyVector3sArray=function(a){for(var b=this.array,d=0,c=0,g=a.length;c<g;c++){var f=
a[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",c),f=new q);b[d++]=f.x;b[d++]=f.y;b[d++]=f.z}return this};c.prototype.copyVector4sArray=function(a){for(var b=this.array,d=0,c=0,g=a.length;c<g;c++){var f=a[c];void 0===f&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",c),f=new J);b[d++]=f.x;b[d++]=f.y;b[d++]=f.z;b[d++]=f.w}return this};c.prototype.set=function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this};c.prototype.getX=
function(a){return this.array[a*this.itemSize]};c.prototype.setX=function(a,b){this.array[a*this.itemSize]=b;return this};c.prototype.getY=function(a){return this.array[a*this.itemSize+1]};c.prototype.setY=function(a,b){this.array[a*this.itemSize+1]=b;return this};c.prototype.getZ=function(a){return this.array[a*this.itemSize+2]};c.prototype.setZ=function(a,b){this.array[a*this.itemSize+2]=b;return this};c.prototype.getW=function(a){return this.array[a*this.itemSize+3]};c.prototype.setW=function(a,
b){this.array[a*this.itemSize+3]=b;return this};c.prototype.setXY=function(a,b,d){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;return this};c.prototype.setXYZ=function(a,b,d,c){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;this.array[a+2]=c;return this};c.prototype.setXYZW=function(a,b,d,c,g){a*=this.itemSize;this.array[a+0]=b;this.array[a+1]=d;this.array[a+2]=c;this.array[a+3]=g;return this};c.prototype.onUpload=function(a){this.onUploadCallback=a;return this};c.prototype.clone=function(){return(new c(this.array,
this.itemSize)).copy(this)};return c}(),Dc=function(c){function a(a,d,e){return c.call(this,new Int8Array(a),d,e)||this}r(a,c);return a}(G),Ec=function(c){function a(a,d,e){return c.call(this,new Uint8Array(a),d,e)||this}r(a,c);return a}(G),Fc=function(c){function a(a,d,e){return c.call(this,new Uint8ClampedArray(a),d,e)||this}r(a,c);return a}(G),Gc=function(c){function a(a,d,e){return c.call(this,new Int16Array(a),d,e)||this}r(a,c);return a}(G),La=function(c){function a(a,d,e){return c.call(this,
new Uint16Array(a),d,e)||this}r(a,c);return a}(G),Hc=function(c){function a(a,d,e){return c.call(this,new Int32Array(a),d,e)||this}r(a,c);return a}(G),Ma=function(c){function a(a,d,e){return c.call(this,new Uint32Array(a),d,e)||this}r(a,c);return a}(G),w=function(c){function a(a,d,e){return c.call(this,new Float32Array(a),d,e)||this}r(a,c);return a}(G),Ic=function(c){function a(a,d,e){return c.call(this,new Float64Array(a),d,e)||this}r(a,c);return a}(G),Ee=function(){function c(){this.indices=[];
this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}c.prototype.computeGroups=function(a){var b=[],d=void 0;a=a.faces;var c;for(c=0;c<a.length;c++){var g=a[c];if(g.materialIndex!==d){d=g.materialIndex;void 0!==f&&(f.count=3*c-f.start,b.push(f));var f=
{start:3*c,materialIndex:d}}}void 0!==f&&(f.count=3*c-f.start,b.push(f));this.groups=b};c.prototype.fromGeometry=function(a){var b=a.faces,d=a.vertices,c=a.faceVertexUvs,g=c[0]&&0<c[0].length,f=c[1]&&0<c[1].length,k=a.morphTargets,l=k.length;if(0<l){var h=[];for(var p=0;p<l;p++)h[p]=[];this.morphTargets.position=h}var m=a.morphNormals,t=m.length;if(0<t){var v=[];for(p=0;p<t;p++)v[p]=[];this.morphTargets.normal=v}var u=a.skinIndices,q=a.skinWeights,r=u.length===d.length,B=q.length===d.length;for(p=
0;p<b.length;p++){var z=b[p];this.vertices.push(d[z.a],d[z.b],d[z.c]);var x=z.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(x=z.normal,this.normals.push(x,x,x));x=z.vertexColors;3===x.length?this.colors.push(x[0],x[1],x[2]):(x=z.color,this.colors.push(x,x,x));!0===g&&(x=c[0][p],void 0!==x?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",p),this.uvs.push(new y,new y,new y)));!0===f&&(x=c[1][p],void 0!==x?this.uvs2.push(x[0],x[1],
x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",p),this.uvs2.push(new y,new y,new y)));for(x=0;x<l;x++){var w=k[x].vertices;h[x].push(w[z.a],w[z.b],w[z.c])}for(x=0;x<t;x++)w=m[x].vertexNormals[p],v[x].push(w.a,w.b,w.c);r&&this.skinIndices.push(u[z.a],u[z.b],u[z.c]);B&&this.skinWeights.push(q[z.a],q[z.b],q[z.c])}this.computeGroups(a);this.verticesNeedUpdate=a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=
a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return this};return c}();h.BufferGeometry=function(c){function a(){var b=c.call(this)||this;b.uuid=E.generateUUID();b.name="";b.type="BufferGeometry";b.index=null;b.attributes={};b.morphAttributes={};b.groups=[];b.boundingBox=null;b.boundingSphere=null;b.drawRange={start:0,count:Infinity};b.isBufferGeometry=!0;b.id=a.bufferGeometryId+=2;return b}r(a,c);a.prototype.getIndex=function(){return this.index};a.prototype.setIndex=function(a){Array.isArray(a)?
this.index=new (65535<Za(a)?Ma:La)(a,1,null):this.index=a};a.prototype.addAttribute=function(a,d,c){if(d&&d.isBufferAttribute||d&&d.isInterleavedBufferAttribute)if("index"===a)console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(d);else return this.attributes[a]=d,this;else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(a,new G(d,c))};a.prototype.getAttribute=function(a){return this.attributes[a]};
a.prototype.removeAttribute=function(a){delete this.attributes[a];return this};a.prototype.addGroup=function(a,d,c){this.groups.push({start:a,count:d,materialIndex:void 0!==c?c:0})};a.prototype.clearGroups=function(){this.groups=[]};a.prototype.setDrawRange=function(a,d){this.drawRange.start=a;this.drawRange.count=d};a.prototype.applyMatrix=function(a){var b=this.attributes.position;void 0!==b&&(a.applyToBufferAttribute(b),b.needsUpdate=!0);b=this.attributes.normal;void 0!==b&&((new Z).getNormalMatrix(a).applyToBufferAttribute(b),
b.needsUpdate=!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return this};a.prototype.rotateX=function(a){var b=new F;b.makeRotationX(a);this.applyMatrix(b);return this};a.prototype.rotateY=function(a){var b=new F;b.makeRotationY(a);this.applyMatrix(b);return this};a.prototype.rotateZ=function(a){var b=new F;b.makeRotationZ(a);this.applyMatrix(b);return this};a.prototype.translate=function(a,d,c){var b=new F;b.makeTranslation(a,d,c);
this.applyMatrix(b);return this};a.prototype.scale=function(a,d,c){var b=new F;b.makeScale(a,d,c);this.applyMatrix(b);return this};a.prototype.lookAt=function(a){var b=new h.Object3D;b.lookAt(a);b.updateMatrix();this.applyMatrix(b.matrix)};a.prototype.center=function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();this.translate(a.x,a.y,a.z);return a};a.prototype.setFromObject=function(a){var b=a.geometry;if(a.isPoints||a.isLine){a=new w(3*b.vertices.length,3);var c=new w(3*
b.colors.length,3);this.addAttribute("position",a.copyVector3sArray(b.vertices));this.addAttribute("color",c.copyColorsArray(b.colors));b.lineDistances&&b.lineDistances.length===b.vertices.length&&(a=new w(b.lineDistances.length,1),this.addAttribute("lineDistance",a.copyArray(b.lineDistances)));null!==b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());null!==b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else a.isMesh&&b&&b.isGeometry&&this.fromGeometry(b);return this};a.prototype.setFromPoints=
function(a){for(var b=[],c=0,g=a.length;c<g;c++){var f=a[c];b.push(f.x,f.y,f.z||0)}this.addAttribute("position",new w(b,3));return this};a.prototype.updateFromObject=function(a){var b=a.geometry;if(a.isMesh){var c=b.__directGeometry;!0===b.elementsNeedUpdate&&(c=void 0,b.elementsNeedUpdate=!1);if(void 0===c)return this.fromGeometry(b);c.verticesNeedUpdate=b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=
b.groupsNeedUpdate;b.verticesNeedUpdate=!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void 0!==c&&(c.copyVector3sArray(b.vertices),c.needsUpdate=!0),b.verticesNeedUpdate=!1);!0===b.normalsNeedUpdate&&(c=this.attributes.normal,void 0!==c&&(c.copyVector3sArray(b.normals),c.needsUpdate=!0),b.normalsNeedUpdate=!1);!0===b.colorsNeedUpdate&&(c=this.attributes.color,void 0!==c&&(c.copyColorsArray(b.colors),
c.needsUpdate=!0),b.colorsNeedUpdate=!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void 0!==c&&(c.copyVector2sArray(b.uvs),c.needsUpdate=!0),b.uvsNeedUpdate=!1);b.lineDistancesNeedUpdate&&(c=this.attributes.lineDistance,void 0!==c&&(c.copyArray(b.lineDistances),c.needsUpdate=!0),b.lineDistancesNeedUpdate=!1);b.groupsNeedUpdate&&(b.computeGroups(a.geometry),this.groups=b.groups,b.groupsNeedUpdate=!1);return this};a.prototype.fromGeometry=function(a){a.__directGeometry=(new Ee).fromGeometry(a);return this.fromDirectGeometry(a.__directGeometry)};
a.prototype.fromDirectGeometry=function(a){var b=new Float32Array(3*a.vertices.length);this.addAttribute("position",(new G(b,3)).copyVector3sArray(a.vertices));0<a.normals.length&&(b=new Float32Array(3*a.normals.length),this.addAttribute("normal",(new G(b,3)).copyVector3sArray(a.normals)));0<a.colors.length&&(b=new Float32Array(3*a.colors.length),this.addAttribute("color",(new G(b,3)).copyColorsArray(a.colors)));0<a.uvs.length&&(b=new Float32Array(2*a.uvs.length),this.addAttribute("uv",(new G(b,2)).copyVector2sArray(a.uvs)));
0<a.uvs2.length&&(b=new Float32Array(2*a.uvs2.length),this.addAttribute("uv2",(new G(b,2)).copyVector2sArray(a.uvs2)));0<a.indices.length&&(b=new (65535<Za(a.indices)?Uint32Array:Uint16Array)(3*a.indices.length),this.setIndex((new G(b,1)).copyIndicesArray(a.indices)));this.groups=a.groups;for(var c in a.morphTargets){b=[];for(var g=a.morphTargets[c],f=0,k=g.length;f<k;f++){var l=g[f],h=new w(3*l.length,3);b.push(h.copyVector3sArray(l))}this.morphAttributes[c]=b}0<a.skinIndices.length&&(c=new w(4*
a.skinIndices.length,4),this.addAttribute("skinIndex",c.copyVector4sArray(a.skinIndices)));0<a.skinWeights.length&&(c=new w(4*a.skinWeights.length,4),this.addAttribute("skinWeight",c.copyVector4sArray(a.skinWeights)));null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return this};a.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new na);var a=this.attributes.position;void 0!==a?
this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)};a.prototype.computeBoundingSphere=function(){var a=new na,d=new q;null===this.boundingSphere&&(this.boundingSphere=new ia);var c=this.attributes.position;if(c){var g=this.boundingSphere.center;
a.setFromBufferAttribute(c);a.getCenter(g);for(var f=a=0,k=c.count;f<k;f++)d.x=c.getX(f),d.y=c.getY(f),d.z=c.getZ(f),a=Math.max(a,g.distanceToSquared(d));this.boundingSphere.radius=Math.sqrt(a);isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}};a.prototype.computeFaceNormals=function(){};a.prototype.computeVertexNormals=function(){var a=this.index,d=this.attributes,
c=this.groups;if(d.position){var g=d.position.array;if(void 0===d.normal)this.addAttribute("normal",new G(new Float32Array(g.length),3));else for(var f=d.normal.array,k=0,l=f.length;k<l;k++)f[k]=0;f=d.normal.array;var h=new q,p=new q,m=new q,t=new q,v=new q;if(a){a=a.array;0===c.length&&this.addGroup(0,a.length);for(var u=0,A=c.length;u<A;++u){k=c[u];l=k.start;var r=k.count;k=l;for(l+=r;k<l;k+=3){r=3*a[k+0];var B=3*a[k+1];var z=3*a[k+2];h.fromArray(g,r);p.fromArray(g,B);m.fromArray(g,z);t.subVectors(m,
p);v.subVectors(h,p);t.cross(v);f[r]+=t.x;f[r+1]+=t.y;f[r+2]+=t.z;f[B]+=t.x;f[B+1]+=t.y;f[B+2]+=t.z;f[z]+=t.x;f[z+1]+=t.y;f[z+2]+=t.z}}}else for(k=0,l=g.length;k<l;k+=9)h.fromArray(g,k),p.fromArray(g,k+3),m.fromArray(g,k+6),t.subVectors(m,p),v.subVectors(h,p),t.cross(v),f[k]=t.x,f[k+1]=t.y,f[k+2]=t.z,f[k+3]=t.x,f[k+4]=t.y,f[k+5]=t.z,f[k+6]=t.x,f[k+7]=t.y,f[k+8]=t.z;this.normalizeNormals();d.normal.needsUpdate=!0}};a.prototype.merge=function(a,d){if(a&&a.isBufferGeometry){void 0===d&&(d=0);var b=this.attributes,
c;for(c in b)if(void 0!==a.attributes[c]){var f=b[c].array,k=a.attributes[c],l=k.array,h=0;for(k=k.itemSize*d;h<l.length;h++,k++)f[k]=l[h]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)};a.prototype.normalizeNormals=function(){for(var a=new q,d=this.attributes.normal,c=0,g=d.count;c<g;c++)a.x=d.getX(c),a.y=d.getY(c),a.z=d.getZ(c),a.normalize(),d.setXYZ(c,a.x,a.y,a.z)};a.prototype.toNonIndexed=function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),
this;var b=new a,d=this.index.array,c=this.attributes,g;for(g in c){var f=c[g],k=f.array;f=f.itemSize;for(var l=new k.constructor(d.length*f),h,p=0,m=0,t=d.length;m<t;m++){h=d[m]*f;for(var v=0;v<f;v++)l[p++]=k[h++]}b.addAttribute(g,new G(l,f))}return b};a.prototype.toJSON=function(){var b=new a.Data;b.metadata={version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"};b.uuid=this.uuid;b.type=this.type;b.name="";""!==this.name&&(b.name=this.name);if(void 0!==this.parameters){var d=this.parameters;
for(f in d)void 0!==d[f]&&(b[f]=d[f]);return b}b.data=new a.DataData;var c=this.index;null!==c&&(d=Array.prototype.slice.call(c.array),b.data.index={type:c.array.constructor.name,array:d});c=this.attributes;for(f in c){var g=c[f];d=Array.prototype.slice.call(g.array);b.data.attributes[f]={itemSize:g.itemSize,type:g.array.constructor.name,array:d,normalized:g.normalized}}var f=this.groups;0<f.length&&(b.data.groups=JSON.parse(JSON.stringify(f)));f=this.boundingSphere;null!==f&&(b.data.boundingSphere=
{center:f.center.toArray(),radius:f.radius});return b};a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){var b;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;var c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(l in c)this.addAttribute(l,c[l].clone());var g=a.morphAttributes;for(l in g){var f=[],k=g[l];c=0;for(b=k.length;c<b;c++)f.push(k[c].clone());this.morphAttributes[l]=
f}var l=a.groups;c=0;for(b=l.length;c<b;c++)g=l[c],this.addGroup(g.start,g.count,g.materialIndex);l=a.boundingBox;null!==l&&(this.boundingBox=l.clone());l=a.boundingSphere;null!==l&&(this.boundingSphere=l.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return this};a.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};a.bufferGeometryId=1;return a}(ma);(function(c){var a=function(){return function(){}}();c.Data=a;a=function(){return function(){this.attributes=
{}}}();c.DataData=a})(h.BufferGeometry||(h.BufferGeometry={}));var lb=function(c){function a(a,d,e,g,f,k){var b=c.call(this)||this;b.type="BoxGeometry";b.parameters={width:a,height:d,depth:e,widthSegments:g,heightSegments:f,depthSegments:k};b.fromBufferGeometry(new Na(a,d,e,g,f,k));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Na=function(c){function a(a,d,e,g,f,k){void 0===a&&(a=1);void 0===d&&(d=1);void 0===e&&(e=1);void 0===g&&(g=1);void 0===f&&(f=1);void 0===k&&(k=1);var b=c.call(this)||
this;b.type="BoxBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.numberOfVertices=0;b.groupStart=0;b.parameters={width:a,height:d,depth:e,widthSegments:g,heightSegments:f,depthSegments:k};g=Math.floor(g);f=Math.floor(f);k=Math.floor(k);b.buildPlane("z","y","x",-1,-1,e,d,a,k,f,0);b.buildPlane("z","y","x",1,-1,e,d,-a,k,f,1);b.buildPlane("x","z","y",1,1,a,e,d,g,k,2);b.buildPlane("x","z","y",1,-1,a,e,-d,g,k,3);b.buildPlane("x","y","z",1,-1,a,d,e,g,f,4);b.buildPlane("x","y","z",-1,-1,
a,d,-e,g,f,5);b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.width,this.parameters.height,this.parameters.depth,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.depthSegments)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.indices=a.indices;return this};a.prototype.buildPlane=
function(a,d,c,g,f,k,l,h,p,m,t){var b=k/p,e=l/m,n=k/2,r=l/2,B=h/2;l=p+1;var z=m+1,x=k=0,y,w,D=new q;for(w=0;w<z;w++){var C=w*e-r;for(y=0;y<l;y++)D[a]=(y*b-n)*g,D[d]=C*f,D[c]=B,this.vertices.push(D.x,D.y,D.z),D[a]=0,D[d]=0,D[c]=0<h?1:-1,this.normals.push(D.x,D.y,D.z),this.uvs.push(y/p),this.uvs.push(1-w/m),k+=1}for(w=0;w<m;w++)for(y=0;y<p;y++)a=this.numberOfVertices+y+l*(w+1),d=this.numberOfVertices+(y+1)+l*(w+1),c=this.numberOfVertices+(y+1)+l*w,this.indices.push(this.numberOfVertices+y+l*w,a,c),
this.indices.push(a,d,c),x+=6;this.addGroup(this.groupStart,x,t);this.groupStart+=x;this.numberOfVertices+=k};return a}(h.BufferGeometry),Jc=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="PlaneGeometry";b.parameters={width:a,height:d,widthSegments:e,heightSegments:g};b.fromBufferGeometry(new Oa(a,d,e,g));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Oa=function(c){function a(a,d,e,g){void 0===a&&(a=1);void 0===d&&(d=1);void 0===e&&(e=1);void 0===g&&(g=1);var b=c.call(this)||
this;b.type="PlaneBufferGeometry";b.parameters={width:a,height:d,widthSegments:e,heightSegments:g};var k=a/2,l=d/2;e=Math.floor(e);g=Math.floor(g);var h=e+1,p=g+1,m=a/e,t=d/g,v=[],u=[],q=[],r=[];for(a=0;a<p;a++){var B=a*t-l;for(d=0;d<h;d++)u.push(d*m-k,-B,0),q.push(0,0,1),r.push(d/e),r.push(1-a/g)}for(a=0;a<g;a++)for(d=0;d<e;d++)k=d+h*(a+1),l=d+1+h*(a+1),p=d+1+h*a,v.push(d+h*a,k,p),v.push(k,l,p);b.setIndex(v);b.addAttribute("position",new w(u,3));b.addAttribute("normal",new w(q,3));b.addAttribute("uv",
new w(r,2));return b}r(a,c);return a}(h.BufferGeometry),pa=function(c){function a(a){var b=c.call(this)||this;b.type="MeshBasicMaterial";b.color=new h.Color(16777215);b.map=null;b.lightMap=null;b.lightMapIntensity=1;b.aoMap=null;b.aoMapIntensity=1;b.specularMap=null;b.alphaMap=null;b.envMap=null;b.combine=0;b.reflectivity=1;b.refractionRatio=.98;b.wireframe=!1;b.wireframeLinewidth=1;b.wireframeLinecap="round";b.wireframeLinejoin="round";b.skinning=!1;b.morphTargets=!1;b.lights=!1;b.isMeshBasicMaterial=
!0;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;
this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return this};return a}(h.Material);h.ShaderMaterial=function(c){function a(a){var b=c.call(this)||this;b.type="ShaderMaterial";b.isShaderMaterial=!0;b.defines={};b.uniforms={};b.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";b.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";
b.linewidth=1;b.wireframe=!1;b.wireframeLinewidth=1;b.fog=!1;b.lights=!1;b.clipping=!1;b.skinning=!1;b.morphTargets=!1;b.morphNormals=!1;b.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};b.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};b.index0AttributeName=void 0;b.uniformsNeedUpdate=!1;void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),b.setValues(a));return b}r(a,c);
a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=a.vertexShader;this.uniforms=Q.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return this};a.prototype.toJSON=function(a){a=c.prototype.toJSON.call(this,a);
a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return a};return a}(h.Material);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Material.Data);c.Data=a})(h.ShaderMaterial||(h.ShaderMaterial={}));var va=function(){function c(a,b){this.origin=void 0!==a?a:new q;this.direction=void 0!==b?b:new q}c.prototype.set=function(a,b){this.origin.copy(a);this.direction.copy(b);return this};c.prototype.clone=
function(){return(new c).copy(this)};c.prototype.copy=function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this};c.prototype.at=function(a,b){return(b||new q).copy(this.direction).multiplyScalar(a).add(this.origin)};c.prototype.lookAt=function(a){this.direction.copy(a).sub(this.origin).normalize();return this};c.prototype.recast=function(a){var b=new q;this.origin.copy(this.at(a,b));return this};c.prototype.closestPointToPoint=function(a,b){b=b||new q;b.subVectors(a,this.origin);
a=b.dot(this.direction);return 0>a?b.copy(this.origin):b.copy(this.direction).multiplyScalar(a).add(this.origin)};c.prototype.distanceToPoint=function(a){return Math.sqrt(this.distanceSqToPoint(a))};c.prototype.distanceSqToPoint=function(a){var b=new q,d=b.subVectors(a,this.origin).dot(this.direction);if(0>d)return this.origin.distanceToSquared(a);b.copy(this.direction).multiplyScalar(d).add(this.origin);return b.distanceToSquared(a)};c.prototype.distanceSqToSegment=function(a,b,d,c){var e=new q,
f=new q,k=new q;e.copy(a).add(b).multiplyScalar(.5);f.copy(b).sub(a).normalize();k.copy(this.origin).sub(e);var l=.5*a.distanceTo(b);a=-this.direction.dot(f);b=k.dot(this.direction);var h=-k.dot(f),p=k.lengthSq(),m=Math.abs(1-a*a);if(0<m){k=a*h-b;var t=a*b-h;var v=l*m;0<=k?t>=-v?t<=v?(l=1/m,k*=l,t*=l,a=k*(k+a*t+2*b)+t*(a*k+t+2*h)+p):(t=l,k=Math.max(0,-(a*t+b)),a=-k*k+t*(t+2*h)+p):(t=-l,k=Math.max(0,-(a*t+b)),a=-k*k+t*(t+2*h)+p):t<=-v?(k=Math.max(0,-(-a*l+b)),t=0<k?-l:Math.min(Math.max(-l,-h),l),a=
-k*k+t*(t+2*h)+p):t<=v?(k=0,t=Math.min(Math.max(-l,-h),l),a=t*(t+2*h)+p):(k=Math.max(0,-(a*l+b)),t=0<k?l:Math.min(Math.max(-l,-h),l),a=-k*k+t*(t+2*h)+p)}else t=0<a?-l:l,k=Math.max(0,-(a*t+b)),a=-k*k+t*(t+2*h)+p;d&&d.copy(this.direction).multiplyScalar(k).add(this.origin);c&&c.copy(f).multiplyScalar(t).add(e);return a};c.prototype.intersectSphere=function(a,b){var d=new q;d.subVectors(a.center,this.origin);var c=d.dot(this.direction);d=d.dot(d)-c*c;a=a.radius*a.radius;if(d>a)return null;d=Math.sqrt(a-
d);a=c-d;c+=d;return 0>a&&0>c?null:0>a?this.at(c,b):this.at(a,b)};c.prototype.intersectsSphere=function(a){return this.distanceToPoint(a.center)<=a.radius};c.prototype.distanceToPlane=function(a){var b=a.normal.dot(this.direction);if(0===b)return 0===a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return 0<=a?a:null};c.prototype.intersectPlane=function(a,b){a=this.distanceToPlane(a);return null===a?null:this.at(a,b)};c.prototype.intersectsPlane=function(a){var b=
a.distanceToPoint(this.origin);return 0===b||0>a.normal.dot(this.direction)*b?!0:!1};c.prototype.intersectBox=function(a,b){var d=1/this.direction.x;var c=1/this.direction.y;var g=1/this.direction.z,f=this.origin;if(0<=d){var k=(a.min.x-f.x)*d;d*=a.max.x-f.x}else k=(a.max.x-f.x)*d,d*=a.min.x-f.x;if(0<=c){var l=(a.min.y-f.y)*c;c*=a.max.y-f.y}else l=(a.max.y-f.y)*c,c*=a.min.y-f.y;if(k>c||l>d)return null;if(l>k||k!==k)k=l;if(c<d||d!==d)d=c;0<=g?(l=(a.min.z-f.z)*g,a=(a.max.z-f.z)*g):(l=(a.max.z-f.z)*
g,a=(a.min.z-f.z)*g);if(k>a||l>d)return null;if(l>k||k!==k)k=l;if(a<d||d!==d)d=a;return 0>d?null:this.at(0<=k?k:d,b)};c.prototype.intersectsBox=function(a){var b=new q;return null!==this.intersectBox(a,b)};c.prototype.intersectTriangle=function(a,b,d,c,g){var e=new q,k=new q,l=new q,h=new q;k.subVectors(b,a);l.subVectors(d,a);h.crossVectors(k,l);b=this.direction.dot(h);if(0<b){if(c)return null;c=1}else if(0>b)c=-1,b=-b;else return null;e.subVectors(this.origin,a);a=c*this.direction.dot(l.crossVectors(e,
l));if(0>a)return null;k=c*this.direction.dot(k.cross(e));if(0>k||a+k>b)return null;e=-c*e.dot(h);return 0>e?null:this.at(e/b,g)};c.prototype.applyMatrix4=function(a){this.origin.applyMatrix4(a);this.direction.transformDirection(a);return this};c.prototype.equals=function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)};return c}(),Fa=function(){function c(a,b){this.start=void 0!==a?a:new q;this.end=void 0!==b?b:new q}c.prototype.set=function(a,b){this.start.copy(a);this.end.copy(b);
return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.start.copy(a.start);this.end.copy(a.end);return this};c.prototype.getCenter=function(a){return(a||new q).addVectors(this.start,this.end).multiplyScalar(.5)};c.prototype.delta=function(a){return(a||new q).subVectors(this.end,this.start)};c.prototype.distanceSq=function(){return this.start.distanceToSquared(this.end)};c.prototype.distance=function(){return this.start.distanceTo(this.end)};c.prototype.at=
function(a,b){b=b||new q;return this.delta(b).multiplyScalar(a).add(this.start)};c.prototype.closestPointToPointParameter=function(a,b){var d=new q,c=new q;d.subVectors(a,this.start);c.subVectors(this.end,this.start);a=c.dot(c);d=c.dot(d)/a;b&&(d=E.clamp(d,0,1));return d};c.prototype.closestPointToPoint=function(a,b,d){a=this.closestPointToPointParameter(a,b);d=d||new q;return this.delta(d).multiplyScalar(a).add(this.start)};c.prototype.applyMatrix4=function(a){this.start.applyMatrix4(a);this.end.applyMatrix4(a);
return this};c.prototype.equals=function(a){return a.start.equals(this.start)&&a.end.equals(this.end)};return c}(),mb=function(){function c(a,b,d){this.a=void 0!==a?a:new q;this.b=void 0!==b?b:new q;this.c=void 0!==d?d:new q}c.normal=function(a,b,d,c){var e=new q;c=c||new q;c.subVectors(d,b);e.subVectors(a,b);c.cross(e);a=c.lengthSq();return 0<a?c.multiplyScalar(1/Math.sqrt(a)):c.set(0,0,0)};c.barycoordFromPoint=function(a,b,d,c,g){var e=new q,k=new q,l=new q;e.subVectors(c,b);k.subVectors(d,b);l.subVectors(a,
b);a=e.dot(e);b=e.dot(k);e=e.dot(l);d=k.dot(k);k=k.dot(l);l=a*d-b*b;g=g||new q;if(0===l)return g.set(-2,-1,-1);l=1/l;d=(d*e-b*k)*l;a=(a*k-b*e)*l;return g.set(1-d-a,a,d)};c.containsPoint=function(a,b,d,e){var g=new q;a=c.barycoordFromPoint(a,b,d,e,g);return 0<=a.x&&0<=a.y&&1>=a.x+a.y};c.prototype.set=function(a,b,d){this.a.copy(a);this.b.copy(b);this.c.copy(d);return this};c.prototype.setFromPointsAndIndices=function(a,b,d,c){this.a.copy(a[b]);this.b.copy(a[d]);this.c.copy(a[c]);return this};c.prototype.clone=
function(){return(new c).copy(this)};c.prototype.copy=function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this};c.prototype.area=function(){var a=new q,b=new q;a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()};c.prototype.midpoint=function(a){return(a||new q).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)};c.prototype.normal=function(a){return c.normal(this.a,this.b,this.c,a)};c.prototype.plane=function(a){return(a||new aa).setFromCoplanarPoints(this.a,
this.b,this.c)};c.prototype.barycoordFromPoint=function(a,b){return c.barycoordFromPoint(a,this.a,this.b,this.c,b)};c.prototype.containsPoint=function(a){return c.containsPoint(a,this.a,this.b,this.c)};c.prototype.intersectsBox=function(a){return a.intersectsTriangle(this)};c.prototype.closestPointToPoint=function(a,b){var d=new aa,c=[new Fa,new Fa,new Fa],g=new q,f=new q;b=b||new q;var k=Infinity;d.setFromCoplanarPoints(this.a,this.b,this.c);d.projectPoint(a,g);if(!0===this.containsPoint(g))b.copy(g);
else for(c[0].set(this.a,this.b),c[1].set(this.b,this.c),c[2].set(this.c,this.a),a=0;a<c.length;a++)c[a].closestPointToPoint(g,!0,f),d=g.distanceToSquared(f),d<k&&(k=d,b.copy(f));return b};c.prototype.equals=function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)};return c}(),fa=function(c){function a(a,d){var b=c.call(this)||this;b.type="Mesh";b.isMesh=!0;b.geometry=void 0!==a?a:new h.BufferGeometry;b.material=void 0!==d?d:new pa({color:16777215*Math.random()});b.drawMode=0;
b.updateMorphTargets();return b}r(a,c);a.prototype.setDrawMode=function(a){this.drawMode=a};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.drawMode=a.drawMode;void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice());void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary));return this};a.prototype.updateMorphTargets=function(){var a=this.geometry;if(a.isBufferGeometry){a=a.morphAttributes;var d=Object.keys(a);
if(0<d.length){var c=a[d[0]];if(void 0!==c)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,d=c.length;a<d;a++){var g=c[a].name||String(a);this.morphTargetInfluences.push(0);this.morphTargetDictionary[g]=a}}}else if(c=a.morphTargets,void 0!==c&&0<c.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},a=0,d=c.length;a<d;a++)g=c[a].name||String(a),this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=a};a.prototype.raycast=function(a,d){function b(a,b,
d,c,e,g,f){mb.barycoordFromPoint(a,b,d,c,x);e.multiplyScalar(x.x);g.multiplyScalar(x.y);f.multiplyScalar(x.z);e.add(g).add(f);return e.clone()}function c(a,b,d,c,e,g,f,k){if(null===(1===b.side?c.intersectTriangle(f,g,e,!0,k):c.intersectTriangle(e,g,f,2!==b.side,k)))return null;C.copy(k);C.applyMatrix4(a.matrixWorld);b=d.ray.origin.distanceTo(C);return b<d.near||b>d.far?null:{distance:b,point:C.clone(),object:a}}function f(a,d,e,g,f,k,l,h){p.fromBufferAttribute(g,k);m.fromBufferAttribute(g,l);t.fromBufferAttribute(g,
h);if(a=c(a,a.material,d,e,p,m,t,w))f&&(r.fromBufferAttribute(f,k),B.fromBufferAttribute(f,l),z.fromBufferAttribute(f,h),a.uv=b(w,p,m,t,r,B,z)),a.face=new oa(k,l,h,mb.normal(p,m,t)),a.faceIndex=k;return a}var k=new F,l=new va,h=new ia,p=new q,m=new q,t=new q,v=new q,u=new q,A=new q,r=new y,B=new y,z=new y,x=new q,w=new q,C=new q,D=this.geometry,E=this.material,H=this.matrixWorld;if(void 0!==E&&(null===D.boundingSphere&&D.computeBoundingSphere(),h.copy(D.boundingSphere),h.applyMatrix4(H),!1!==a.ray.intersectsSphere(h)&&
(k.getInverse(H),l.copy(a.ray).applyMatrix4(k),null===D.boundingBox||!1!==l.intersectsBox(D.boundingBox)))){var G;if(D.isBufferGeometry)if(k=E=v=void 0,u=D.index,A=D.attributes.position,D=D.attributes.uv,H=h=void 0,null!==u)for(h=0,H=u.count;h<H;h+=3){if(v=u.getX(h),E=u.getX(h+1),k=u.getX(h+2),G=f(this,a,l,A,D,v,E,k))G.faceIndex=Math.floor(h/3),d.push(G)}else{if(void 0!==A)for(h=0,H=A.count;h<H;h+=3)if(v=h,E=h+1,k=h+2,G=f(this,a,l,A,D,v,E,k))G.index=v,d.push(G)}else if(D.isGeometry){var J=void 0,
L=void 0,N=void 0;k=Array.isArray(E);h=D.vertices;H=D.faces;var M=void 0;J=D.faceVertexUvs[0];0<J.length&&(M=J);for(var S=0,O=H.length;S<O;S++){var P=H[S];G=k?E[P.materialIndex]:E;if(void 0!==G){J=h[P.a];L=h[P.b];N=h[P.c];if(!0===G.morphTargets){var K=D.morphTargets,X=this.morphTargetInfluences;p.set(0,0,0);m.set(0,0,0);t.set(0,0,0);for(var R=0,Q=K.length;R<Q;R++){var U=X[R];if(0!==U){var V=K[R].vertices;p.addScaledVector(v.subVectors(V[P.a],J),U);m.addScaledVector(u.subVectors(V[P.b],L),U);t.addScaledVector(A.subVectors(V[P.c],
N),U)}}p.add(J);m.add(L);t.add(N);J=p;L=m;N=t}if(G=c(this,G,a,l,J,L,N,w))M&&M[S]&&(K=M[S],r.copy(K[0]),B.copy(K[1]),z.copy(K[2]),G.uv=b(w,J,L,N,r,B,z)),G.face=P,G.faceIndex=S,d.push(G)}}}}};a.prototype.clone=function(){return(new a(this.geometry,this.material)).copy(this)};return a}(h.Object3D),Fe=function(){function c(a,b,d,c){this.clearColor=new h.Color(0);this.clearAlpha=0;this.renderer=a;this.state=b;this.geometries=d;this.premultipliedAlpha=c}c.prototype.render=function(a,b,d,c){b=b.background;
null===b?this.setClear(this.clearColor,this.clearAlpha):b&&b.isColor&&(this.setClear(b,1),c=!0);(this.renderer.autoClear||c)&&this.renderer.clear(this.renderer.autoClearColor,this.renderer.autoClearDepth,this.renderer.autoClearStencil);b&&b.isCubeTexture?(void 0===this.boxMesh&&(this.boxMesh=new fa(new Na(1,1,1),new h.ShaderMaterial({uniforms:Ea.cube.uniforms,vertexShader:Ea.cube.vertexShader,fragmentShader:Ea.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),this.boxMesh.geometry.removeAttribute("normal"),
this.boxMesh.geometry.removeAttribute("uv"),this.boxMesh.onBeforeRender=function(a,b,d){this.matrixWorld.copyPosition(d.matrixWorld)},this.geometries.update(this.boxMesh.geometry)),this.boxMesh.material.uniforms.tCube.value=b,a.push(this.boxMesh,this.boxMesh.geometry,this.boxMesh.material,0,null)):b&&b.isTexture&&(void 0===this.planeCamera&&(this.planeCamera=new h.OrthographicCamera(-1,1,1,-1,0,1),this.planeMesh=new fa(new Oa(2,2),new pa({depthTest:!1,depthWrite:!1,fog:!1})),this.geometries.update(this.planeMesh.geometry)),
this.planeMesh.material.map=b,this.renderer.renderBufferDirect(this.planeCamera,null,this.planeMesh.geometry,this.planeMesh.material,this.planeMesh,null))};c.prototype.setClear=function(a,b){this.state.buffers.color.setClear(a.r,a.g,a.b,b,this.premultipliedAlpha)};c.prototype.getClearColor=function(){return this.clearColor};c.prototype.setClearColor=function(a,b){this.clearColor.set(a);this.clearAlpha=void 0!==b?b:1;this.setClear(this.clearColor,this.clearAlpha)};c.prototype.getClearAlpha=function(){return this.clearAlpha};
c.prototype.setClearAlpha=function(a){this.clearAlpha=a;this.setClear(this.clearColor,this.clearAlpha)};return c}(),Ge=function(){function c(){this.renderItems=[];this.renderItemsIndex=0;this.opaque=[];this.transparent=[]}c.prototype.init=function(){this.renderItemsIndex=0;this.opaque.length=0;this.transparent.length=0};c.prototype.push=function(a,b,d,c,g){var e=this.renderItems[this.renderItemsIndex];void 0===e?(e={id:a.id,object:a,geometry:b,material:d,program:d.program,renderOrder:a.renderOrder,
z:c,group:g},this.renderItems[this.renderItemsIndex]=e):(e.id=a.id,e.object=a,e.geometry=b,e.material=d,e.program=d.program,e.renderOrder=a.renderOrder,e.z=c,e.group=g);(!0===d.transparent?this.transparent:this.opaque).push(e);this.renderItemsIndex++};c.prototype.sort=function(){1<this.opaque.length&&this.opaque.sort(re);1<this.transparent.length&&this.transparent.sort(se)};return c}(),He=function(){function c(){this.lists={}}c.prototype.get=function(a,b){a=a.id+","+b.id;b=this.lists[a];void 0===
b&&(b=new Ge,this.lists[a]=b);return b};c.prototype.dispose=function(){this.lists={}};return c}(),Ie=function(){function c(a){this.influencesList={};this.morphInfluences=new Float32Array(8);this.gl=a}c.prototype.update=function(a,b,d,c){var e=a.morphTargetInfluences,f=e.length;a=this.influencesList[b.id];if(void 0===a){a=[];for(var k=0;k<f;k++)a[k]=[k,0];this.influencesList[b.id]=a}var l=d.morphTargets&&b.morphAttributes.position;d=d.morphNormals&&b.morphAttributes.normal;for(k=0;k<f;k++){var h=a[k];
0!==h[1]&&(l&&b.removeAttribute("morphTarget"+k),d&&b.removeAttribute("morphNormal"+k))}for(k=0;k<f;k++)h=a[k],h[0]=k,h[1]=e[k];a.sort(te);for(k=0;8>k;k++){if(h=a[k])if(e=h[0],f=h[1]){l&&b.addAttribute("morphTarget"+k,l[e]);d&&b.addAttribute("morphNormal"+k,d[e]);this.morphInfluences[k]=f;continue}this.morphInfluences[k]=0}c.getUniforms().setValue(this.gl,"morphTargetInfluences",this.morphInfluences)};return c}(),Je=function(){function c(a,b,d){this.gl=a;this.extensions=b;this.infoRender=d}c.prototype.setMode=
function(a){this.mode=a};c.prototype.setIndex=function(a){this.type=a.type;this.bytesPerElement=a.bytesPerElement};c.prototype.render=function(a,b){this.gl.drawElements(this.mode,b,this.type,a*this.bytesPerElement);this.infoRender.calls++;this.infoRender.vertices+=b;this.mode===this.gl.TRIANGLES?this.infoRender.faces+=b/3:this.mode===this.gl.POINTS&&(this.infoRender.points+=b)};c.prototype.renderInstances=function(a,b,d){var c=this.extensions.get("ANGLE_instanced_arrays");null===c?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):
(c.drawElementsInstancedANGLE(this.mode,d,this.type,b*this.bytesPerElement,a.maxInstancedCount),this.infoRender.calls++,this.infoRender.vertices+=d*a.maxInstancedCount,this.mode===this.gl.TRIANGLES?this.infoRender.faces+=a.maxInstancedCount*d/3:this.mode===this.gl.POINTS&&(this.infoRender.points+=a.maxInstancedCount*d))};return c}(),Ke=function(){function c(a,b,d){this.gl=a;this.extensions=b;this.infoRender=d}c.prototype.setMode=function(a){this.mode=a};c.prototype.render=function(a,b){this.gl.drawArrays(this.mode,
a,b);this.infoRender.calls++;this.infoRender.vertices+=b;this.mode===this.gl.TRIANGLES?this.infoRender.faces+=b/3:this.mode===this.gl.POINTS&&(this.infoRender.points+=b)};c.prototype.renderInstances=function(a,b,d){var c=this.extensions.get("ANGLE_instanced_arrays");if(null===c)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var g=a.attributes.position;g.isInterleavedBufferAttribute?(d=g.data.count,
c.drawArraysInstancedANGLE(this.mode,0,d,a.maxInstancedCount)):c.drawArraysInstancedANGLE(this.mode,b,d,a.maxInstancedCount);this.infoRender.calls++;this.infoRender.vertices+=d*a.maxInstancedCount;this.mode===this.gl.TRIANGLES?this.infoRender.faces+=a.maxInstancedCount*d/3:this.mode===this.gl.POINTS&&(this.infoRender.points+=a.maxInstancedCount*d)}};return c}(),Le=function(){function c(a,b,d){this.geometries={};this.wireframeAttributes={};this.onGeometryDispose=function(a){return function(b){b=b.target;
var d=a.geometries[b.id];null!==d.index&&a.attributes.remove(d.index);for(var c in d.attributes)a.attributes.remove(d.attributes[c]);b.removeEventListener("dispose",a.onGeometryDispose);delete a.geometries[b.id];if(c=a.wireframeAttributes[b.id])a.attributes.remove(c),delete a.wireframeAttributes[b.id];if(c=a.wireframeAttributes[d.id])a.attributes.remove(c),delete a.wireframeAttributes[d.id];a.infoMemory.geometries--}}(this);this.gl=a;this.attributes=b;this.infoMemory=d}c.prototype.get=function(a,
b){var d=this.geometries[b.id];if(d)return d;b.addEventListener("dispose",this.onGeometryDispose);b.isBufferGeometry?d=b:b.isGeometry&&(void 0===b._bufferGeometry&&(b._bufferGeometry=(new h.BufferGeometry).setFromObject(a)),d=b._bufferGeometry);this.geometries[b.id]=d;this.infoMemory.geometries++;return d};c.prototype.update=function(a){var b=a.index,d=a.attributes;null!==b&&this.attributes.update(b,this.gl.ELEMENT_ARRAY_BUFFER);for(var c in d)this.attributes.update(d[c],this.gl.ARRAY_BUFFER);a=a.morphAttributes;
for(var g in a)for(b=a[g],d=0,c=b.length;d<c;d++)this.attributes.update(b[d],this.gl.ARRAY_BUFFER)};c.prototype.getWireframeAttribute=function(a){var b=this.wireframeAttributes[a.id];if(b)return b;b=[];var d=a.index,c=a.attributes;if(null!==d){c=d.array;d=0;for(var g=c.length;d<g;d+=3){var f=c[d+0],k=c[d+1],l=c[d+2];b.push(f,k,k,l,l,f)}}else for(c=c.position.array,d=0,c=c.length/3-1;d<c;d+=3)g=d+0,f=d+1,k=d+2,b.push(g,f,f,k,k,g);b=new (65535<Za(b)?Ma:La)(b,1);this.attributes.update(b,this.gl.ELEMENT_ARRAY_BUFFER);
return this.wireframeAttributes[a.id]=b};return c}(),Me=function(){function c(a,b){this.updateList={};this.geometries=a;this.infoRender=b}c.prototype.update=function(a){var b=this.infoRender.frame,d=a.geometry,c=this.geometries.get(a,d);this.updateList[c.id]!==b&&(d.isGeometry&&c.updateFromObject(a),this.geometries.update(c),this.updateList[c.id]=b);return c};c.prototype.dispose=function(){this.updateList={}};return c}(),Ne=function(){function c(a,b,d,e,g,f){this.gl=a.context;this.renderer=a;var k=
e.defines;d=g.vertexShader;var l=g.fragmentShader,h="SHADOWMAP_TYPE_BASIC";1===f.shadowMapType?h="SHADOWMAP_TYPE_PCF":2===f.shadowMapType&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",m="ENVMAP_MODE_REFLECTION",t="ENVMAP_BLENDING_MULTIPLY";if(f.envMap){switch(e.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(e.envMap.mapping){case 302:case 304:m=
"ENVMAP_MODE_REFRACTION"}switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}}a=0<a.gammaFactor?a.gammaFactor:1;var v=(v=e.extensions)||{};v=[v.derivatives||f.envMapCubeUV||f.bumpMap||f.normalMap||f.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(v.fragDepth||f.logarithmicDepthBuffer)&&b.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",v.drawBuffers&&b.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":
"",(v.shaderTextureLOD||f.envMap)&&b.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xa).join("\n");var u=[];for(r in k){var q=k[r];!1!==q&&u.push("#define "+r+" "+q)}k=u.join("\n");this.program=this.gl.createProgram();if(e.isRawShaderMaterial){var r=[k].filter(xa).join("\n");0<r.length&&(r+="\n");b=[v,k].filter(xa).join("\n");0<b.length&&(b+="\n")}else r=["precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+g.name,k,f.supportsVertexTextures?
"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+a,"#define MAX_BONES "+f.maxBones,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?"#define "+m:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.displacementMap&&f.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":
"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.flatShading?"#define FLAT_SHADED":"",f.skinning?"#define USE_SKINNING":"",f.useVertexTexture?"#define BONE_TEXTURE":"",f.morphTargets?"#define USE_MORPHTARGETS":"",f.morphNormals&&!1===f.flatShading?"#define USE_MORPHNORMALS":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":
"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+h:"",f.sizeAttenuation?"#define USE_SIZEATTENUATION":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;",
"attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;",
"\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xa).join("\n"),b=[v,"precision "+f.precision+" float;","precision "+f.precision+" int;","#define SHADER_NAME "+g.name,k,f.alphaTest?"#define ALPHATEST "+f.alphaTest:"","#define GAMMA_FACTOR "+a,f.useFog&&f.fog?"#define USE_FOG":"",f.useFog&&f.fogExp?"#define FOG_EXP2":"",f.map?"#define USE_MAP":"",f.envMap?"#define USE_ENVMAP":"",f.envMap?
"#define "+p:"",f.envMap?"#define "+m:"",f.envMap?"#define "+t:"",f.lightMap?"#define USE_LIGHTMAP":"",f.aoMap?"#define USE_AOMAP":"",f.emissiveMap?"#define USE_EMISSIVEMAP":"",f.bumpMap?"#define USE_BUMPMAP":"",f.normalMap?"#define USE_NORMALMAP":"",f.specularMap?"#define USE_SPECULARMAP":"",f.roughnessMap?"#define USE_ROUGHNESSMAP":"",f.metalnessMap?"#define USE_METALNESSMAP":"",f.alphaMap?"#define USE_ALPHAMAP":"",f.vertexColors?"#define USE_COLOR":"",f.gradientMap?"#define USE_GRADIENTMAP":"",
f.flatShading?"#define FLAT_SHADED":"",f.doubleSided?"#define DOUBLE_SIDED":"",f.flipSided?"#define FLIP_SIDED":"",f.shadowMapEnabled?"#define USE_SHADOWMAP":"",f.shadowMapEnabled?"#define "+h:"",f.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",f.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",f.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",f.logarithmicDepthBuffer&&b.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",f.envMap&&b.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":
"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==f.toneMapping?"#define TONE_MAPPING":"",0!==f.toneMapping?H.tonemapping_pars_fragment:"",0!==f.toneMapping?we("toneMapping",f.toneMapping):"",f.dithering?"#define DITHERING":"",f.outputEncoding||f.mapEncoding||f.envMapEncoding||f.emissiveMapEncoding?H.encodings_pars_fragment:"",f.mapEncoding?$a("mapTexelToLinear",f.mapEncoding):"",f.envMapEncoding?$a("envMapTexelToLinear",f.envMapEncoding):"",f.emissiveMapEncoding?$a("emissiveMapTexelToLinear",
f.emissiveMapEncoding):"",f.outputEncoding?ve("linearToOutputTexel",f.outputEncoding):"",f.depthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(xa).join("\n");d=ab(d);d=kc(d,f);d=lc(d,f);l=ab(l);l=kc(l,f);l=lc(l,f);d=mc(d);l=mc(l);g=b+l;d=ic(this.gl,this.gl.VERTEX_SHADER,r+d);g=ic(this.gl,this.gl.FRAGMENT_SHADER,g);this.gl.attachShader(this.program,d);this.gl.attachShader(this.program,g);void 0!==e.index0AttributeName?this.gl.bindAttribLocation(this.program,0,e.index0AttributeName):
!0===f.morphTargets&&this.gl.bindAttribLocation(this.program,0,"position");this.gl.linkProgram(this.program);f=this.gl.getProgramInfoLog(this.program).trim();l=this.gl.getShaderInfoLog(d).trim();h=this.gl.getShaderInfoLog(g).trim();m=p=!0;if(!1===this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))p=!1,console.error("THREE.WebGLProgram: shader error: ",this.gl.getError(),"gl.VALIDATE_STATUS",this.gl.getProgramParameter(this.program,this.gl.VALIDATE_STATUS),"gl.getProgramInfoLog",f,l,h);
else if(""!==f)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",f);else if(""===l||""===h)m=!1;m&&(this.diagnostics={runnable:p,material:e,programLog:f,vertexShader:{log:l,prefix:r},fragmentShader:{log:h,prefix:b}});this.gl.deleteShader(d);this.gl.deleteShader(g);this.id=c.programIdCount++;this.usedTimes=1;this.vertexShader=d;this.fragmentShader=g}c.prototype.getUniforms=function(){void 0===this.cachedUniforms&&(this.cachedUniforms=new Ka(this.gl,this.program,this.renderer));return this.cachedUniforms};
c.prototype.getAttributes=function(){if(void 0===this.cachedAttributes){for(var a=this.gl,b=this.program,d={},c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),g=0;g<c;g++){var f=a.getActiveAttrib(b,g).name;d[f]=a.getAttribLocation(b,f)}this.cachedAttributes=d}return this.cachedAttributes};c.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.program=void 0};Object.defineProperty(c.prototype,"uniforms",{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");
return this.getUniforms()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"attributes",{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()},enumerable:!0,configurable:!0});c.programIdCount=0;return c}(),Oe=function(){function c(a,b,d){this.programs=[];this.shaderIDs={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",
MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};this.parameterNames="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");
this.renderer=a;this.extensions=b;this.capabilities=d}c.prototype.allocateBones=function(a){a=a.skeleton.bones;if(this.capabilities.floatVertexTextures)return 1024;var b=Math.min(Math.floor((this.capabilities.maxVertexUniforms-20)/4),a.length);return b<a.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+a.length+" bones. This GPU supports "+b+"."),0):b};c.prototype.getTextureEncodingFromMap=function(a,b){if(a)a.isTexture?d=a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),
d=a.texture.encoding);else var d=3E3;3E3===d&&b&&(d=3007);return d};c.prototype.getParameters=function(a,b,d,c,g,f,k){var e=this.shaderIDs[a.type],h=k.isSkinnedMesh?this.allocateBones(k):0,p=this.capabilities.precision;null!==a.precision&&(p=this.capabilities.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));var m=this.renderer.getRenderTarget();return{shaderID:e,precision:p,supportsVertexTextures:this.capabilities.vertexTextures,
outputEncoding:this.getTextureEncodingFromMap(m?m.texture:null,this.renderer.gammaOutput),map:!!a.map,mapEncoding:this.getTextureEncodingFromMap(a.map,this.renderer.gammaInput),envMap:!!a.envMap,envMapMode:a.envMap&&a.envMap.mapping,envMapEncoding:this.getTextureEncodingFromMap(a.envMap,this.renderer.gammaInput),envMapCubeUV:!!a.envMap&&(306===a.envMap.mapping||307===a.envMap.mapping),lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:this.getTextureEncodingFromMap(a.emissiveMap,
this.renderer.gammaInput),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,alphaMap:!!a.alphaMap,gradientMap:!!a.gradientMap,combine:a.combine,vertexColors:a.vertexColors,fog:!!c,useFog:a.fog,fogExp:c&&c.isFogExp2,flatShading:a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:this.capabilities.logarithmicDepthBuffer,skinning:a.skinning&&0<h,maxBones:h,useVertexTexture:this.capabilities.floatVertexTextures,
morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.renderer.maxMorphTargets,maxMorphNormals:this.renderer.maxMorphNormals,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numClippingPlanes:g,numClipIntersection:f,dithering:a.dithering,shadowMapEnabled:this.renderer.shadowMap.enabled&&k.receiveShadow&&0<d.length,shadowMapType:this.renderer.shadowMap.type,toneMapping:this.renderer.toneMapping,
physicallyCorrectLights:this.renderer.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,alphaTest:a.alphaTest,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking?a.depthPacking:!1}};c.prototype.getProgramCode=function(a,b){var d=[];b.shaderID?d.push(b.shaderID):(d.push(a.fragmentShader),d.push(a.vertexShader));if(void 0!==a.defines)for(var c in a.defines)d.push(c),d.push(a.defines[c]);for(c=0;c<this.parameterNames.length;c++)d.push(b[this.parameterNames[c]]);
d.push(a.onBeforeCompile.toString());d.push(this.renderer.gammaOutput);return d.join()};c.prototype.acquireProgram=function(a,b,d,c){for(var e,f=0,k=this.programs.length;f<k;f++){var l=this.programs[f];if(l.code===c){e=l;++e.usedTimes;break}}void 0===e&&(e=new Ne(this.renderer,this.extensions,c,a,b,d),this.programs.push(e));return e};c.prototype.releaseProgram=function(a){if(0===--a.usedTimes){var b=this.programs.indexOf(a);this.programs[b]=this.programs[this.programs.length-1];this.programs.pop();
a.destroy()}};return c}(),Pe=function(){function c(a,b,d,c,g,f,k,l){this._videoTextures=[];this.onTextureDispose=function(a){return function(b){b=b.target;b.removeEventListener("dispose",a.onTextureDispose);a.deallocateTexture(b);b.isVideoTexture&&delete a._videoTextures[b.id];a.infoMemory.textures--}}(this);this.onRenderTargetDispose=function(a){return function(b){b=b.target;b.removeEventListener("dispose",a.onRenderTargetDispose);a.deallocateRenderTarget(b);a.infoMemory.textures--}}(this);this._gl=
a;this.extensions=b;this.properties=c;this.capabilities=g;this.state=d;this.utils=f;this.infoMemory=k;this.infoRender=l;this._isWebGL2=!1}c.prototype.clampToMaxSize=function(a,b){if(a.width>b||a.height>b){b/=Math.max(a.width,a.height);var d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=Math.floor(a.width*b);d.height=Math.floor(a.height*b);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+
"x"+a.height+"). Resized to "+d.width+"x"+d.height,a);return d}return a};c.prototype.isPowerOfTwo=function(a){return E.isPowerOfTwo(a.width)&&E.isPowerOfTwo(a.height)};c.prototype.makePowerOfTwo=function(a){return a instanceof HTMLImageElement||a instanceof HTMLCanvasElement?(void 0===this._canvas&&(this._canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),this._canvas.width=E.floorPowerOfTwo(a.width),this._canvas.height=E.floorPowerOfTwo(a.height),this._canvas.getContext("2d").drawImage(a,
0,0,this._canvas.width,this._canvas.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+a.width+"x"+a.height+"). Resized to "+this._canvas.width+"x"+this._canvas.height,a),this._canvas):a};c.prototype.textureNeedsPowerOfTwo=function(a){return 1001!==a.wrapS||1001!==a.wrapT||1003!==a.minFilter&&1006!==a.minFilter};c.prototype.textureNeedsGenerateMipmaps=function(a,b){return a.generateMipmaps&&b&&1003!==a.minFilter&&1006!==a.minFilter};c.prototype.filterFallback=function(a){return 1003===
a||1004===a||1005===a?this._gl.NEAREST:this._gl.LINEAR};c.prototype.deallocateTexture=function(a){var b=this.properties.get(a);if(a.image&&b.__image__webglTextureCube)this._gl.deleteTexture(b.__image__webglTextureCube);else{if(void 0===b.__webglInit)return;this._gl.deleteTexture(b.__webglTexture)}this.properties.remove(a)};c.prototype.deallocateRenderTarget=function(a){var b=this.properties.get(a),d=this.properties.get(a.texture);if(a){void 0!==d.__webglTexture&&this._gl.deleteTexture(d.__webglTexture);
a.depthTexture&&a.depthTexture.dispose();if(a.isWebGLRenderTargetCube)for(d=0;6>d;d++)this._gl.deleteFramebuffer(b.__webglFramebuffer[d]),b.__webglDepthbuffer&&this._gl.deleteRenderbuffer(b.__webglDepthbuffer[d]);else this._gl.deleteFramebuffer(b.__webglFramebuffer),b.__webglDepthbuffer&&this._gl.deleteRenderbuffer(b.__webglDepthbuffer);this.properties.remove(a.texture);this.properties.remove(a)}};c.prototype.setTexture2D=function(a,b){var d=this.properties.get(a);a.isVideoTexture&&this.updateVideoTexture(a);
if(0<a.version&&d.__version!==a.version){var c=a.image;if(void 0===c)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",a);else if(!1===c.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",a);else{this.uploadTexture(d,a,b);return}}this.state.activeTexture(this._gl.TEXTURE0+b);this.state.bindTexture(this._gl.TEXTURE_2D,d.__webglTexture)};c.prototype.setTextureCube=function(a,b){var d=this.properties.get(a);if(6===a.image.length)if(0<
a.version&&d.__version!==a.version){d.__image__webglTextureCube||(a.addEventListener("dispose",this.onTextureDispose),d.__image__webglTextureCube=this._gl.createTexture(),this.infoMemory.textures++);this.state.activeTexture(this._gl.TEXTURE0+b);this.state.bindTexture(this._gl.TEXTURE_CUBE_MAP,d.__image__webglTextureCube);this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,a.flipY);b=a&&a.isCompressedTexture;for(var c=a.image[0]&&a.image[0].isDataTexture,g=[],f=0;6>f;f++)g[f]=b||c?c?a.image[f].image:
a.image[f]:this.clampToMaxSize(a.image[f],this.capabilities.maxCubemapSize);var k=this.isPowerOfTwo(g[0]),l=this.utils.convert(a.format),h=this.utils.convert(a.type);this.setTextureParameters(this._gl.TEXTURE_CUBE_MAP,a,k);for(f=0;6>f;f++)if(b)for(var p,m=g[f].mipmaps,t=0,v=m.length;t<v;t++)p=m[t],1023!==a.format&&1022!==a.format?-1<this.state.getCompressedTextureFormats().indexOf(l)?this.state.compressedTexImage2D(this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,l,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):
this.state.texImage2D(this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+f,t,l,p.width,p.height,0,l,h,p.data);else c?this.state.texImage2D(this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,l,g[f].width,g[f].height,0,l,h,g[f].data):this.state.texImage2D(this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,l,l,h,g[f]);this.textureNeedsGenerateMipmaps(a,k)&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP);d.__version=a.version;if(a.onUpdate)a.onUpdate(a)}else this.state.activeTexture(this._gl.TEXTURE0+b),this.state.bindTexture(this._gl.TEXTURE_CUBE_MAP,
d.__image__webglTextureCube)};c.prototype.setTextureCubeDynamic=function(a,b){this.state.activeTexture(this._gl.TEXTURE0+b);this.state.bindTexture(this._gl.TEXTURE_CUBE_MAP,this.properties.get(a).__webglTexture)};c.prototype.setTextureParameters=function(a,b,d){d?(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this.utils.convert(b.wrapS)),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this.utils.convert(b.wrapT)),this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this.utils.convert(b.magFilter)),
this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this.utils.convert(b.minFilter))):(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),1001===b.wrapS&&1001===b.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",b),this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(b.magFilter)),this._gl.texParameteri(a,
this._gl.TEXTURE_MIN_FILTER,this.filterFallback(b.minFilter)),1003!==b.minFilter&&1006!==b.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",b));!(d=this.extensions.get("EXT_texture_filter_anisotropic"))||1015===b.type&&null===this.extensions.get("OES_texture_float_linear")||1016===b.type&&null===this.extensions.get("OES_texture_half_float_linear")||!(1<b.anisotropy||this.properties.get(b).__currentAnisotropy)||
(this._gl.texParameterf(a,d.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,this.capabilities.getMaxAnisotropy())),this.properties.get(b).__currentAnisotropy=b.anisotropy)};c.prototype.uploadTexture=function(a,b,d){void 0===a.__webglInit&&(a.__webglInit=!0,b.addEventListener("dispose",this.onTextureDispose),a.__webglTexture=this._gl.createTexture(),this.infoMemory.textures++);this.state.activeTexture(this._gl.TEXTURE0+d);this.state.bindTexture(this._gl.TEXTURE_2D,a.__webglTexture);this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,
b.flipY);this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,b.unpackAlignment);var c=this.clampToMaxSize(b.image,this.capabilities.maxTextureSize);this.textureNeedsPowerOfTwo(b)&&!1===this.isPowerOfTwo(c)&&(c=this.makePowerOfTwo(c));d=this.isPowerOfTwo(c);var g=this.utils.convert(b.format),f=this.utils.convert(b.type);this.setTextureParameters(this._gl.TEXTURE_2D,b,d);var k=b.mipmaps;if(b.isDepthTexture){k=this._gl.DEPTH_COMPONENT;
if(1015===b.type){if(!this._isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");k=this._gl.DEPTH_COMPONENT32F}else this._isWebGL2&&(k=this._gl.DEPTH_COMPONENT16);1026===b.format&&k===this._gl.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),b.type=1012,f=this.utils.convert(b.type));1027===b.format&&(k=this._gl.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),
b.type=1020,f=this.utils.convert(b.type)));this.state.texImage2D(this._gl.TEXTURE_2D,0,k,c.width,c.height,0,g,f,null)}else if(b.isDataTexture)if(0<k.length&&d){for(var l=0,h=k.length;l<h;l++)c=k[l],this.state.texImage2D(this._gl.TEXTURE_2D,l,g,c.width,c.height,0,g,f,c.data);b.generateMipmaps=!1}else this.state.texImage2D(this._gl.TEXTURE_2D,0,g,c.width,c.height,0,g,f,c.data);else if(b.isCompressedTexture)for(l=0,h=k.length;l<h;l++)c=k[l],1023!==b.format&&1022!==b.format?-1<this.state.getCompressedTextureFormats().indexOf(g)?
this.state.compressedTexImage2D(this._gl.TEXTURE_2D,l,g,c.width,c.height,0,c.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):this.state.texImage2D(this._gl.TEXTURE_2D,l,g,c.width,c.height,0,g,f,c.data);else if(0<k.length&&d){l=0;for(h=k.length;l<h;l++)c=k[l],this.state.texImage2D(this._gl.TEXTURE_2D,l,g,g,f,c);b.generateMipmaps=!1}else this.state.texImage2D(this._gl.TEXTURE_2D,0,g,g,f,c);this.textureNeedsGenerateMipmaps(b,d)&&this._gl.generateMipmap(this._gl.TEXTURE_2D);
a.__version=b.version;if(b.onUpdate)b.onUpdate(b)};c.prototype.setupFrameBufferTexture=function(a,b,d,c){var e=this.utils.convert(b.texture.format),f=this.utils.convert(b.texture.type);this.state.texImage2D(c,0,e,b.width,b.height,0,e,f,null);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,a);this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,d,c,this.properties.get(b.texture).__webglTexture,0);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)};c.prototype.setupRenderBufferStorage=function(a,b){this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,
a);b.depthBuffer&&!b.stencilBuffer?(this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,b.width,b.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_STENCIL,b.width,b.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_STENCIL_ATTACHMENT,this._gl.RENDERBUFFER,a)):this._gl.renderbufferStorage(this._gl.RENDERBUFFER,
this._gl.RGBA4,b.width,b.height);this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null)};c.prototype.setupDepthTexture=function(a,b){if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,a);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");this.properties.get(b.depthTexture).__webglTexture&&b.depthTexture.image.width===b.width&&
b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);this.setTexture2D(b.depthTexture,0);a=this.properties.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,a,0);else if(1027===b.depthTexture.format)this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_STENCIL_ATTACHMENT,this._gl.TEXTURE_2D,
a,0);else throw Error("Unknown depthTexture format");};c.prototype.setupDepthRenderbuffer=function(a){var b=this.properties.get(a),d=!0===a.isWebGLRenderTargetCube;if(a.depthTexture){if(d)throw Error("target.depthTexture not supported in Cube render targets");this.setupDepthTexture(b.__webglFramebuffer,a)}else if(d)for(b.__webglDepthbuffer=[],d=0;6>d;d++)this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,b.__webglFramebuffer[d]),b.__webglDepthbuffer[d]=this._gl.createRenderbuffer(),this.setupRenderBufferStorage(b.__webglDepthbuffer[d],
a);else this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,b.__webglFramebuffer),b.__webglDepthbuffer=this._gl.createRenderbuffer(),this.setupRenderBufferStorage(b.__webglDepthbuffer,a);this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)};c.prototype.setupRenderTarget=function(a){var b=this.properties.get(a),d=this.properties.get(a.texture);a.addEventListener("dispose",this.onRenderTargetDispose);d.__webglTexture=this._gl.createTexture();this.infoMemory.textures++;var c=!0===a.isWebGLRenderTargetCube,
g=this.isPowerOfTwo(a);if(c){b.__webglFramebuffer=[];for(var f=0;6>f;f++)b.__webglFramebuffer[f]=this._gl.createFramebuffer()}else b.__webglFramebuffer=this._gl.createFramebuffer();if(c){this.state.bindTexture(this._gl.TEXTURE_CUBE_MAP,d.__webglTexture);this.setTextureParameters(this._gl.TEXTURE_CUBE_MAP,a.texture,g);for(f=0;6>f;f++)this.setupFrameBufferTexture(b.__webglFramebuffer[f],a,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+f);this.textureNeedsGenerateMipmaps(a.texture,g)&&
this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP);this.state.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)}else this.state.bindTexture(this._gl.TEXTURE_2D,d.__webglTexture),this.setTextureParameters(this._gl.TEXTURE_2D,a.texture,g),this.setupFrameBufferTexture(b.__webglFramebuffer,a,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D),this.textureNeedsGenerateMipmaps(a.texture,g)&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this.state.bindTexture(this._gl.TEXTURE_2D,null);a.depthBuffer&&this.setupDepthRenderbuffer(a)};
c.prototype.updateRenderTargetMipmap=function(a){var b=a.texture,d=this.isPowerOfTwo(a);this.textureNeedsGenerateMipmaps(b,d)&&(a=a.isWebGLRenderTargetCube?this._gl.TEXTURE_CUBE_MAP:this._gl.TEXTURE_2D,b=this.properties.get(b).__webglTexture,this.state.bindTexture(a,b),this._gl.generateMipmap(a),this.state.bindTexture(a,null))};c.prototype.updateVideoTexture=function(a){var b=a.id,d=this.infoRender.frame;this._videoTextures[b]!==d&&(this._videoTextures[b]=d,a.update())};return c}(),Qe=function(){function c(){this.properties=
{}}c.prototype.get=function(a){a=a.uuid;var b=this.properties[a];void 0===b&&(b={},this.properties[a]=b);return b};c.prototype.remove=function(a){delete this.properties[a.uuid]};c.prototype.update=function(a,b,d){this.properties[a.uuid][b]=d};c.prototype.dispose=function(){this.properties={}};return c}(),nb=function(){function c(a,b,d){this.gl=a;this.extensions=b;this.utils=d;this.colorBuffer=new c.ColorBuffer(a);this.depthBuffer=new c.DepthBuffer(a);this.stencilBuffer=new c.StencilBuffer(a);b=a.getParameter(a.MAX_VERTEX_ATTRIBS);
this.newAttributes=new Uint8Array(b);this.enabledAttributes=new Uint8Array(b);this.attributeDivisors=new Uint8Array(b);this.capabilities={};this.currentBlendDstAlpha=this.currentBlendSrcAlpha=this.currentBlendEquationAlpha=this.currentBlendDst=this.currentBlendSrc=this.currentBlendEquation=this.currentBlending=this.currentProgram=this.compressedTextureFormats=null;this.currentPremultipledAlpha=!1;this.currentPolygonOffsetUnits=this.currentPolygonOffsetFactor=this.currentLineWidth=this.currentCullFace=
this.currentFlipSided=null;this.maxTextures=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);this.lineWidthAvailable=!1;b=a.getParameter(a.VERSION);-1!==b.indexOf("WebGL")?(b=parseFloat(/^WebGL ([0-9])/.exec(b)[1]),this.lineWidthAvailable=1<=b):-1!==b.indexOf("OpenGL ES")&&(b=parseFloat(/^OpenGL ES ([0-9])/.exec(b)[1]),this.lineWidthAvailable=2<=b);this.currentTextureSlot=null;this.currentBoundTextures={};this.currentScissor=new J;this.currentViewport=new J;this.emptyTextures={};this.emptyTextures[a.TEXTURE_2D]=
this.createTexture(a.TEXTURE_2D,a.TEXTURE_2D,1);this.emptyTextures[a.TEXTURE_CUBE_MAP]=this.createTexture(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);this.colorBuffer.setClear(0,0,0,1);this.depthBuffer.setClear(1);this.stencilBuffer.setClear(0);this.depthBuffer.setFunc(3);this.buffers={color:this.colorBuffer,depth:this.depthBuffer,stencil:this.stencilBuffer}}c.prototype.createTexture=function(a,b,d){var c=new Uint8Array(4),g=this.gl.createTexture();this.gl.bindTexture(a,g);this.gl.texParameteri(a,
this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST);this.gl.texParameteri(a,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);for(a=0;a<d;a++)this.gl.texImage2D(b+a,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,c);return g};c.prototype.initAttributes=function(){for(var a=0,b=this.newAttributes.length;a<b;a++)this.newAttributes[a]=0};c.prototype.enableAttribute=function(a){this.newAttributes[a]=1;0===this.enabledAttributes[a]&&(this.gl.enableVertexAttribArray(a),this.enabledAttributes[a]=1);0!==this.attributeDivisors[a]&&
(this.extensions.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(a,0),this.attributeDivisors[a]=0)};c.prototype.enableAttributeAndDivisor=function(a,b){this.newAttributes[a]=1;0===this.enabledAttributes[a]&&(this.gl.enableVertexAttribArray(a),this.enabledAttributes[a]=1);this.attributeDivisors[a]!==b&&(this.extensions.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(a,b),this.attributeDivisors[a]=b)};c.prototype.disableUnusedAttributes=function(){for(var a=0,b=this.enabledAttributes.length;a!==
b;++a)this.enabledAttributes[a]!==this.newAttributes[a]&&(this.gl.disableVertexAttribArray(a),this.enabledAttributes[a]=0)};c.prototype.enable=function(a){!0!==this.capabilities[a]&&(this.gl.enable(a),this.capabilities[a]=!0)};c.prototype.disable=function(a){!1!==this.capabilities[a]&&(this.gl.disable(a),this.capabilities[a]=!1)};c.prototype.getCompressedTextureFormats=function(){if(null===this.compressedTextureFormats&&(this.compressedTextureFormats=[],this.extensions.get("WEBGL_compressed_texture_pvrtc")||
this.extensions.get("WEBGL_compressed_texture_s3tc")||this.extensions.get("WEBGL_compressed_texture_etc1")||this.extensions.get("WEBGL_compressed_texture_astc")))for(var a=this.gl.getParameter(this.gl.COMPRESSED_TEXTURE_FORMATS),b=0;b<a.length;b++)this.compressedTextureFormats.push(a[b]);return this.compressedTextureFormats};c.prototype.useProgram=function(a){return this.currentProgram!==a?(this.gl.useProgram(a),this.currentProgram=a,!0):!1};c.prototype.setBlending=function(a,b,d,c,g,f,k,l){0!==a?
this.enable(this.gl.BLEND):this.disable(this.gl.BLEND);if(5!==a){if(a!==this.currentBlending||l!==this.currentPremultipledAlpha)switch(a){case 2:l?(this.gl.blendEquationSeparate(this.gl.FUNC_ADD,this.gl.FUNC_ADD),this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE,this.gl.ONE,this.gl.ONE)):(this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE));break;case 3:l?(this.gl.blendEquationSeparate(this.gl.FUNC_ADD,this.gl.FUNC_ADD),this.gl.blendFuncSeparate(this.gl.ZERO,this.gl.ZERO,
this.gl.ONE_MINUS_SRC_COLOR,this.gl.ONE_MINUS_SRC_ALPHA)):(this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.ZERO,this.gl.ONE_MINUS_SRC_COLOR));break;case 4:l?(this.gl.blendEquationSeparate(this.gl.FUNC_ADD,this.gl.FUNC_ADD),this.gl.blendFuncSeparate(this.gl.ZERO,this.gl.SRC_COLOR,this.gl.ZERO,this.gl.SRC_ALPHA)):(this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.ZERO,this.gl.SRC_COLOR));break;default:l?(this.gl.blendEquationSeparate(this.gl.FUNC_ADD,this.gl.FUNC_ADD),
this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)):(this.gl.blendEquationSeparate(this.gl.FUNC_ADD,this.gl.FUNC_ADD),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA))}this.currentBlendDstAlpha=this.currentBlendSrcAlpha=this.currentBlendEquationAlpha=this.currentBlendDst=this.currentBlendSrc=this.currentBlendEquation=null}else{g=g||b;f=f||d;k=k||c;if(b!==this.currentBlendEquation||
g!==this.currentBlendEquationAlpha)this.gl.blendEquationSeparate(this.utils.convert(b),this.utils.convert(g)),this.currentBlendEquation=b,this.currentBlendEquationAlpha=g;if(d!==this.currentBlendSrc||c!==this.currentBlendDst||f!==this.currentBlendSrcAlpha||k!==this.currentBlendDstAlpha)this.gl.blendFuncSeparate(this.utils.convert(d),this.utils.convert(c),this.utils.convert(f),this.utils.convert(k)),this.currentBlendSrc=d,this.currentBlendDst=c,this.currentBlendSrcAlpha=f,this.currentBlendDstAlpha=
k}this.currentBlending=a;this.currentPremultipledAlpha=l};c.prototype.setMaterial=function(a,b){2===a.side?this.disable(this.gl.CULL_FACE):this.enable(this.gl.CULL_FACE);var d=1===a.side;b&&(d=!d);this.setFlipSided(d);!0===a.transparent?this.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):this.setBlending(0);this.depthBuffer.setFunc(a.depthFunc);this.depthBuffer.setTest(a.depthTest);this.depthBuffer.setMask(a.depthWrite);
this.colorBuffer.setMask(a.colorWrite);this.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)};c.prototype.setFlipSided=function(a){this.currentFlipSided!==a&&(a?this.gl.frontFace(this.gl.CW):this.gl.frontFace(this.gl.CCW),this.currentFlipSided=a)};c.prototype.setCullFace=function(a){0!==a?(this.enable(this.gl.CULL_FACE),a!==this.currentCullFace&&(1===a?this.gl.cullFace(this.gl.BACK):2===a?this.gl.cullFace(this.gl.FRONT):this.gl.cullFace(this.gl.FRONT_AND_BACK))):this.disable(this.gl.CULL_FACE);
this.currentCullFace=a};c.prototype.setLineWidth=function(a){a!==this.currentLineWidth&&(this.lineWidthAvailable&&this.gl.lineWidth(a),this.currentLineWidth=a)};c.prototype.setPolygonOffset=function(a,b,d){if(a){if(this.enable(this.gl.POLYGON_OFFSET_FILL),this.currentPolygonOffsetFactor!==b||this.currentPolygonOffsetUnits!==d)this.gl.polygonOffset(b,d),this.currentPolygonOffsetFactor=b,this.currentPolygonOffsetUnits=d}else this.disable(this.gl.POLYGON_OFFSET_FILL)};c.prototype.setScissorTest=function(a){a?
this.enable(this.gl.SCISSOR_TEST):this.disable(this.gl.SCISSOR_TEST)};c.prototype.activeTexture=function(a){void 0===a&&(a=this.gl.TEXTURE0+this.maxTextures-1);this.currentTextureSlot!==a&&(this.gl.activeTexture(a),this.currentTextureSlot=a)};c.prototype.bindTexture=function(a,b){null===this.currentTextureSlot&&this.activeTexture();var d=this.currentBoundTextures[this.currentTextureSlot];void 0===d&&(d={type:void 0,texture:void 0},this.currentBoundTextures[this.currentTextureSlot]=d);if(d.type!==
a||d.texture!==b)this.gl.bindTexture(a,b||this.emptyTextures[a]),d.type=a,d.texture=b};c.prototype.compressedTexImage2D=function(){try{this.gl.compressedTexImage2D.apply(this.gl,arguments)}catch(a){console.error("THREE.WebGLState:",a)}};c.prototype.texImage2D=function(){try{this.gl.texImage2D.apply(this.gl,arguments)}catch(a){console.error("THREE.WebGLState:",a)}};c.prototype.scissor=function(a){!1===this.currentScissor.equals(a)&&(this.gl.scissor(a.x,a.y,a.z,a.w),this.currentScissor.copy(a))};c.prototype.viewport=
function(a){!1===this.currentViewport.equals(a)&&(this.gl.viewport(a.x,a.y,a.z,a.w),this.currentViewport.copy(a))};c.prototype.reset=function(){for(var a=0;a<this.enabledAttributes.length;a++)1===this.enabledAttributes[a]&&(this.gl.disableVertexAttribArray(a),this.enabledAttributes[a]=0);this.capabilities={};this.currentTextureSlot=this.compressedTextureFormats=null;this.currentBoundTextures={};this.currentCullFace=this.currentFlipSided=this.currentBlending=this.currentProgram=null;this.colorBuffer.reset();
this.depthBuffer.reset();this.stencilBuffer.reset()};return c}();(function(c){var a=function(){function a(a){this.gl=a;this.locked=!1;this.color=new J;this.currentColorMask=null;this.currentColorClear=new J(0,0,0,0)}a.prototype.setMask=function(a){this.currentColorMask===a||this.locked||(this.gl.colorMask(a,a,a,a),this.currentColorMask=a)};a.prototype.setLocked=function(a){this.locked=a};a.prototype.setClear=function(a,b,c,f,k){!0===k&&(a*=f,b*=f,c*=f);this.color.set(a,b,c,f);!1===this.currentColorClear.equals(this.color)&&
(this.gl.clearColor(a,b,c,f),this.currentColorClear.copy(this.color))};a.prototype.reset=function(){this.locked=!1;this.currentColorMask=null;this.currentColorClear.set(-1,0,0,0)};return a}();c.ColorBuffer=a;a=function(){function a(a){this.locked=!1;this.currentDepthClear=this.currentDepthFunc=this.currentDepthMask=null;this.gl=a}a.prototype.setTest=function(a){};a.prototype.setMask=function(a){this.currentDepthMask===a||this.locked||(this.gl.depthMask(a),this.currentDepthMask=a)};a.prototype.setFunc=
function(a){if(this.currentDepthFunc!==a){if(a)switch(a){case 0:this.gl.depthFunc(this.gl.NEVER);break;case 1:this.gl.depthFunc(this.gl.ALWAYS);break;case 2:this.gl.depthFunc(this.gl.LESS);break;case 3:this.gl.depthFunc(this.gl.LEQUAL);break;case 4:this.gl.depthFunc(this.gl.EQUAL);break;case 5:this.gl.depthFunc(this.gl.GEQUAL);break;case 6:this.gl.depthFunc(this.gl.GREATER);break;case 7:this.gl.depthFunc(this.gl.NOTEQUAL);break;default:this.gl.depthFunc(this.gl.LEQUAL)}else this.gl.depthFunc(this.gl.LEQUAL);
this.currentDepthFunc=a}};a.prototype.setLocked=function(a){this.locked=a};a.prototype.setClear=function(a){this.currentDepthClear!==a&&(this.gl.clearDepth(a),this.currentDepthClear=a)};a.prototype.reset=function(){this.locked=!1;this.currentDepthClear=this.currentDepthFunc=this.currentDepthMask=null};return a}();c.DepthBuffer=a;a=function(){function a(a){this.locked=!1;this.currentStencilClear=this.currentStencilZPass=this.currentStencilZFail=this.currentStencilFail=this.currentStencilFuncMask=this.currentStencilRef=
this.currentStencilFunc=this.currentStencilMask=null;this.gl=a}a.prototype.setTest=function(a){};a.prototype.setMask=function(a){this.currentStencilMask===a||this.locked||(this.gl.stencilMask(a),this.currentStencilMask=a)};a.prototype.setFunc=function(a,b,c){if(this.currentStencilFunc!==a||this.currentStencilRef!==b||this.currentStencilFuncMask!==c)this.gl.stencilFunc(a,b,c),this.currentStencilFunc=a,this.currentStencilRef=b,this.currentStencilFuncMask=c};a.prototype.setOp=function(a,b,c){if(this.currentStencilFail!==
a||this.currentStencilZFail!==b||this.currentStencilZPass!==c)this.gl.stencilOp(a,b,c),this.currentStencilFail=a,this.currentStencilZFail=b,this.currentStencilZPass=c};a.prototype.setLocked=function(a){this.locked=a};a.prototype.setClear=function(a){this.currentStencilClear!==a&&(this.gl.clearStencil(a),this.currentStencilClear=a)};a.prototype.reset=function(){this.locked=!1;this.currentStencilClear=this.currentStencilZPass=this.currentStencilZFail=this.currentStencilFail=this.currentStencilFuncMask=
this.currentStencilRef=this.currentStencilFunc=this.currentStencilMask=null};return a}();c.StencilBuffer=a})(nb||(nb={}));var Re=function(){function c(a,b,d){this.gl=a;this.extensions=b;this.parameters=d;this.maxPrecision!==this.precision&&(console.warn("THREE.WebGLRenderer:",this.precision,"not supported, using",this.maxPrecision,"instead."),this.precision=this.maxPrecision);this.precision=void 0!==this.parameters.precision?this.parameters.precision:"highp";this.maxPrecision=this.getMaxPrecision(this.precision);
this.logarithmicDepthBuffer=!0===this.parameters.logarithmicDepthBuffer;this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);this.maxVertexTextures=this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE);this.maxCubemapSize=this.gl.getParameter(this.gl.MAX_CUBE_MAP_TEXTURE_SIZE);this.maxAttributes=this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS);this.maxVertexUniforms=this.gl.getParameter(this.gl.MAX_VERTEX_UNIFORM_VECTORS);
this.maxVaryings=this.gl.getParameter(this.gl.MAX_VARYING_VECTORS);this.maxFragmentUniforms=this.gl.getParameter(this.gl.MAX_FRAGMENT_UNIFORM_VECTORS);this.vertexTextures=0<this.maxVertexTextures;this.floatFragmentTextures=!!this.extensions.get("OES_texture_float");this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures}c.prototype.getMaxAnisotropy=function(){if(void 0!==this.maxAnisotropy)return this.maxAnisotropy;var a=this.extensions.get("EXT_texture_filter_anisotropic");return this.maxAnisotropy=
null!==a?this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0};c.prototype.getMaxPrecision=function(a){if("highp"===a){if(0<this.gl.getShaderPrecisionFormat(this.gl.VERTEX_SHADER,this.gl.HIGH_FLOAT).precision&&0<this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT).precision)return"highp";a="mediump"}return"mediump"===a&&0<this.gl.getShaderPrecisionFormat(this.gl.VERTEX_SHADER,this.gl.MEDIUM_FLOAT).precision&&0<this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.MEDIUM_FLOAT).precision?
"mediump":"lowp"};return c}();h.PerspectiveCamera=function(c){function a(a,d,e,g){void 0===a&&(a=50);void 0===d&&(d=1);void 0===e&&(e=.1);void 0===g&&(g=2E3);var b=c.call(this)||this;b.type="PerspectiveCamera";b.zoom=1;b.focus=10;b.view=null;b.filmGauge=35;b.filmOffset=0;b.isPerspectiveCamera=!0;b.fov=a;b.near=e;b.far=g;b.aspect=d;b.updateProjectionMatrix();return b}r(a,c);a.prototype.copy=function(a,d){c.prototype.copy.call(this,a,d);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;
this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:a.view;this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return this};a.prototype.clone=function(){return(new a).copy(this)};a.prototype.setFocalLength=function(a){a=.5*this.getFilmHeight()/a;this.fov=2*E.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()};a.prototype.getFocalLength=function(){var a=Math.tan(.5*E.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a};a.prototype.getEffectiveFOV=function(){return 2*E.RAD2DEG*Math.atan(Math.tan(.5*
E.DEG2RAD*this.fov)/this.zoom)};a.prototype.getFilmWidth=function(){return this.filmGauge*Math.min(this.aspect,1)};a.prototype.getFilmHeight=function(){return this.filmGauge/Math.max(this.aspect,1)};a.prototype.setViewOffset=function(a,d,c,g,f,k){this.aspect=a/d;null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1});this.view.enabled=!0;this.view.fullWidth=a;this.view.fullHeight=d;this.view.offsetX=c;this.view.offsetY=g;this.view.width=f;this.view.height=
k;this.updateProjectionMatrix()};a.prototype.clearViewOffset=function(){null!==this.view&&(this.view.enabled=!1);this.updateProjectionMatrix()};a.prototype.updateProjectionMatrix=function(){var a=this.near,d=a*Math.tan(.5*E.DEG2RAD*this.fov)/this.zoom,c=2*d,g=this.aspect*c,f=-.5*g,k=this.view;if(null!==this.view&&this.view.enabled){var l=k.fullWidth,h=k.fullHeight;f+=k.offsetX*g/l;d-=k.offsetY*c/h;g*=k.width/l;c*=k.height/h}k=this.filmOffset;0!==k&&(f+=a*k/this.getFilmWidth());this.projectionMatrix.makePerspective(f,
f+g,d,d-c,a,this.far)};a.prototype.toJSON=function(a){a=c.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=this.near;a.object.far=this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=this.view);a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return a};return a}(h.Camera);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Data);
c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Obj);c.Obj=a})(h.PerspectiveCamera||(h.PerspectiveCamera={}));var Kc=function(c){function a(a){void 0===a&&(a=[]);var b=c.call(this)||this;b.isArrayCamera=!0;b.cameras=a;return b}r(a,c);return a}(h.PerspectiveCamera),Lc=function(){function c(a){this.poseTarget=this.frameData=this.device=null;this.standingMatrix=new F;this.standingMatrixInverse=new F;this.matrixWorldInverse=new F;this.enabled=
!1;this.userHeight=1.6;"undefined"!==typeof window&&"VRFrameData"in window&&(this.frameData=new window.VRFrameData);this.cameraL=new h.PerspectiveCamera;this.cameraL.bounds=new J(0,0,.5,1);this.cameraL.layers.enable(1);this.cameraR=new h.PerspectiveCamera;this.cameraR.bounds=new J(.5,0,.5,1);this.cameraR.layers.enable(2);this.cameraVR=new Kc([this.cameraL,this.cameraR]);this.cameraVR.layers.enable(1);this.cameraVR.layers.enable(2);"undefined"!==typeof window&&window.addEventListener("vrdisplaypresentchange",
this.onVRDisplayPresentChange,!1)}c.prototype.onVRDisplayPresentChange=function(){if(null!==this.device&&this.device.isPresenting){var a=this.device.getEyeParameters("left"),b=a.renderWidth;a=a.renderHeight;this.currentPixelRatio=this.renderer.getPixelRatio();this.currentSize=this.renderer.getSize();this.renderer.setDrawingBufferSize(2*b,a,1)}else this.enabled&&this.renderer.setDrawingBufferSize(this.currentSize.width,this.currentSize.height,this.currentPixelRatio)};c.prototype.getDevice=function(){return this.device};
c.prototype.setDevice=function(a){void 0!==a&&(this.device=a)};c.prototype.setPoseTarget=function(a){void 0!==a&&(this.poseTarget=a)};c.prototype.getCamera=function(a){if(null===this.device)return a;this.device.depthNear=a.near;this.device.depthFar=a.far;this.device.getFrameData(this.frameData);var b=this.frameData.pose,d=null!==this.poseTarget?this.poseTarget:a;null!==b.position?d.position.fromArray(b.position):d.position.set(0,0,0);null!==b.orientation&&d.quaternion.fromArray(b.orientation);(b=
this.device.stageParameters)?this.standingMatrix.fromArray(b.sittingToStandingTransform):this.standingMatrix.makeTranslation(0,this.userHeight,0);d.position.applyMatrix4(this.standingMatrix);d.updateMatrixWorld();if(!1===this.device.isPresenting)return a;this.cameraL.near=a.near;this.cameraR.near=a.near;this.cameraL.far=a.far;this.cameraR.far=a.far;this.cameraVR.matrixWorld.copy(a.matrixWorld);this.cameraVR.matrixWorldInverse.copy(a.matrixWorldInverse);this.cameraL.matrixWorldInverse.fromArray(this.frameData.leftViewMatrix);
this.cameraR.matrixWorldInverse.fromArray(this.frameData.rightViewMatrix);this.standingMatrixInverse.getInverse(this.standingMatrix);this.cameraL.matrixWorldInverse.multiply(this.standingMatrixInverse);this.cameraR.matrixWorldInverse.multiply(this.standingMatrixInverse);a=d.parent;null!==a&&(this.matrixWorldInverse.getInverse(a.matrixWorld),this.cameraL.matrixWorldInverse.multiply(this.matrixWorldInverse),this.cameraR.matrixWorldInverse.multiply(this.matrixWorldInverse));this.cameraL.matrixWorld.getInverse(this.cameraL.matrixWorldInverse);
this.cameraR.matrixWorld.getInverse(this.cameraR.matrixWorldInverse);this.cameraL.projectionMatrix.fromArray(this.frameData.leftProjectionMatrix);this.cameraR.projectionMatrix.fromArray(this.frameData.rightProjectionMatrix);this.cameraVR.projectionMatrix.copy(this.cameraL.projectionMatrix);a=this.device.getLayers();a.length&&(a=a[0],null!==a.leftBounds&&4===a.leftBounds.length&&this.cameraL.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&this.cameraR.bounds.fromArray(a.rightBounds));
return this.cameraVR};c.prototype.getStandingMatrix=function(){return this.standingMatrix};c.prototype.submitFrame=function(){this.device&&this.device.isPresenting&&this.device.submitFrame()};c.prototype.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange)};return c}(),Se=function(){function c(a){this.extensions={};this.gl=a}c.prototype.get=function(a){if(void 0!==this.extensions[a])return this.extensions[a];switch(a){case "WEBGL_depth_texture":var b=
this.gl.getExtension("WEBGL_depth_texture")||this.gl.getExtension("MOZ_WEBGL_depth_texture")||this.gl.getExtension("WEBKIT_WEBGL_depth_texture");break;case "EXT_texture_filter_anisotropic":b=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case "WEBGL_compressed_texture_s3tc":b=this.gl.getExtension("WEBGL_compressed_texture_s3tc")||this.gl.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||
this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case "WEBGL_compressed_texture_pvrtc":b=this.gl.getExtension("WEBGL_compressed_texture_pvrtc")||this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case "WEBGL_compressed_texture_etc1":b=this.gl.getExtension("WEBGL_compressed_texture_etc1");break;default:b=this.gl.getExtension(a)}null===b&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported.");return this.extensions[a]=b};return c}(),Te=function(){function c(){this.globalState=
null;this.numGlobalPlanes=0;this.renderingShadows=this.localClippingEnabled=!1;this.plane=new aa;this.viewNormalMatrix=new Z;this.uniform={value:null,needsUpdate:!1};this.numIntersection=this.numPlanes=0}c.prototype.init=function(a,b,d){var c=0!==a.length||b||0!==this.numGlobalPlanes||this.localClippingEnabled;this.localClippingEnabled=b;this.globalState=this.projectPlanes(a,d,0);this.numGlobalPlanes=a.length;return c};c.prototype.beginShadows=function(){this.renderingShadows=!0;this.projectPlanes(null)};
c.prototype.endShadows=function(){this.renderingShadows=!1;this.resetGlobalState()};c.prototype.setState=function(a,b,d,c,g,f){if(!this.localClippingEnabled||null===a||0===a.length||this.renderingShadows&&!d)this.renderingShadows?this.projectPlanes(null):this.resetGlobalState();else{d=this.renderingShadows?0:this.numGlobalPlanes;var e=4*d,l=g.clippingState||null;this.uniform.value=l;l=this.projectPlanes(a,c,e,f);for(a=0;a!==e;++a)l[a]=this.globalState[a];g.clippingState=l;this.numIntersection=b?this.numPlanes:
0;this.numPlanes+=d}};c.prototype.resetGlobalState=function(){this.uniform.value!==this.globalState&&(this.uniform.value=this.globalState,this.uniform.needsUpdate=0<this.numGlobalPlanes);this.numPlanes=this.numGlobalPlanes;this.numIntersection=0};c.prototype.projectPlanes=function(a,b,d,c){var e=null!==a?a.length:0,f=null;if(0!==e){f=this.uniform.value;if(!0!==c||null===f){c=d+4*e;b=b.matrixWorldInverse;this.viewNormalMatrix.getNormalMatrix(b);if(null===f||f.length<c)f=new Float32Array(c);for(c=0;c!==
e;++c,d+=4)this.plane.copy(a[c]).applyMatrix4(b,this.viewNormalMatrix),this.plane.normal.toArray(f,d),f[d+3]=this.plane.constant}this.uniform.value=f;this.uniform.needsUpdate=!0}this.numPlanes=e;return f};return c}(),Mc=function(){function c(a,b){this.gl=a;this.extensions=b}c.prototype.convert=function(a){if(1E3===a)return this.gl.REPEAT;if(1001===a)return this.gl.CLAMP_TO_EDGE;if(1002===a)return this.gl.MIRRORED_REPEAT;if(1003===a)return this.gl.NEAREST;if(1004===a)return this.gl.NEAREST_MIPMAP_NEAREST;
if(1005===a)return this.gl.NEAREST_MIPMAP_LINEAR;if(1006===a)return this.gl.LINEAR;if(1007===a)return this.gl.LINEAR_MIPMAP_NEAREST;if(1008===a)return this.gl.LINEAR_MIPMAP_LINEAR;if(1009===a)return this.gl.UNSIGNED_BYTE;if(1017===a)return this.gl.UNSIGNED_SHORT_4_4_4_4;if(1018===a)return this.gl.UNSIGNED_SHORT_5_5_5_1;if(1019===a)return this.gl.UNSIGNED_SHORT_5_6_5;if(1010===a)return this.gl.BYTE;if(1011===a)return this.gl.SHORT;if(1012===a)return this.gl.UNSIGNED_SHORT;if(1013===a)return this.gl.INT;
if(1014===a)return this.gl.UNSIGNED_INT;if(1015===a)return this.gl.FLOAT;if(1016===a){var b=this.extensions.get("OES_texture_half_float");if(null!==b)return b.HALF_FLOAT_OES}if(1021===a)return this.gl.ALPHA;if(1022===a)return this.gl.RGB;if(1023===a)return this.gl.RGBA;if(1024===a)return this.gl.LUMINANCE;if(1025===a)return this.gl.LUMINANCE_ALPHA;if(1026===a)return this.gl.DEPTH_COMPONENT;if(1027===a)return this.gl.DEPTH_STENCIL;if(100===a)return this.gl.FUNC_ADD;if(101===a)return this.gl.FUNC_SUBTRACT;
if(102===a)return this.gl.FUNC_REVERSE_SUBTRACT;if(200===a)return this.gl.ZERO;if(201===a)return this.gl.ONE;if(202===a)return this.gl.SRC_COLOR;if(203===a)return this.gl.ONE_MINUS_SRC_COLOR;if(204===a)return this.gl.SRC_ALPHA;if(205===a)return this.gl.ONE_MINUS_SRC_ALPHA;if(206===a)return this.gl.DST_ALPHA;if(207===a)return this.gl.ONE_MINUS_DST_ALPHA;if(208===a)return this.gl.DST_COLOR;if(209===a)return this.gl.ONE_MINUS_DST_COLOR;if(210===a)return this.gl.SRC_ALPHA_SATURATE;if(33776===a||33777===
a||33778===a||33779===a)if(b=this.extensions.get("WEBGL_compressed_texture_s3tc"),null!==b){if(33776===a)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===a)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===a)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===a)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===a||35841===a||35842===a||35843===a)if(b=this.extensions.get("WEBGL_compressed_texture_pvrtc"),null!==b){if(35840===a)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===a)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
if(35842===a)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===a)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===a&&(b=this.extensions.get("WEBGL_compressed_texture_etc1"),null!==b))return b.COMPRESSED_RGB_ETC1_WEBGL;if(37808===a||37809===a||37810===a||37811===a||37812===a||37813===a||37814===a||37815===a||37816===a||37817===a||37818===a||37819===a||37820===a||37821===a)if(b=this.extensions.get("WEBGL_compressed_texture_astc"),null!==b)return a;if(103===a||104===a)if(b=this.extensions.get("EXT_blend_minmax"),
null!==b){if(103===a)return b.MIN_EXT;if(104===a)return b.MAX_EXT}return 1020===a&&(b=this.extensions.get("WEBGL_depth_texture"),null!==b)?b.UNSIGNED_INT_24_8_WEBGL:0};return c}(),Ue=function(){function c(){this.lights={}}c.prototype.get=function(a){if(void 0!==this.lights[a.id])return this.lights[a.id];switch(a.type){case "DirectionalLight":var b={direction:new q,color:new h.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case "SpotLight":b={position:new q,direction:new q,
color:new h.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y};break;case "PointLight":b={position:new q,color:new h.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new y,shadowCameraNear:1,shadowCameraFar:1E3};break;case "HemisphereLight":b={direction:new q,skyColor:new h.Color,groundColor:new h.Color};break;case "RectAreaLight":b={color:new h.Color,position:new q,halfWidth:new q,halfHeight:new q}}return this.lights[a.id]=
b};return c}(),Ve=function(){function c(){this.cache=new Ue;this.state={id:c.count++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};this.vector3=new q;this.matrix4=new F;this.matrix42=new F}c.prototype.setup=function(a,b,d){var c=0,g=0,f=0,k=0,l=0,h=0,p=0,m=0;d=d.matrixWorldInverse;for(var t=0,v=a.length;t<v;t++){var u=a[t],q=u.color,r=u.intensity,
B=u.distance,z=u.shadow&&u.shadow.map?u.shadow.map.texture:null;if(u.isAmbientLight)c+=q.r*r,g+=q.g*r,f+=q.b*r;else if(u.isDirectionalLight){var x=this.cache.get(u);x.color.copy(u.color).multiplyScalar(u.intensity);x.direction.setFromMatrixPosition(u.matrixWorld);this.vector3.setFromMatrixPosition(u.target.matrixWorld);x.direction.sub(this.vector3);x.direction.transformDirection(d);if(x.shadow=u.castShadow)q=u.shadow,x.shadowBias=q.bias,x.shadowRadius=q.radius,x.shadowMapSize=q.mapSize;this.state.directionalShadowMap[k]=
z;this.state.directionalShadowMatrix[k]=u.shadow.matrix;this.state.directional[k]=x;k++}else if(u.isSpotLight){x=this.cache.get(u);x.position.setFromMatrixPosition(u.matrixWorld);x.position.applyMatrix4(d);x.color.copy(q).multiplyScalar(r);x.distance=B;x.direction.setFromMatrixPosition(u.matrixWorld);this.vector3.setFromMatrixPosition(u.target.matrixWorld);x.direction.sub(this.vector3);x.direction.transformDirection(d);x.coneCos=Math.cos(u.angle);x.penumbraCos=Math.cos(u.angle*(1-u.penumbra));x.decay=
0===u.distance?0:u.decay;if(x.shadow=u.castShadow)q=u.shadow,x.shadowBias=q.bias,x.shadowRadius=q.radius,x.shadowMapSize=q.mapSize;this.state.spotShadowMap[h]=z;this.state.spotShadowMatrix[h]=u.shadow.matrix;this.state.spot[h]=x;h++}else if(u.isRectAreaLight)x=this.cache.get(u),x.color.copy(q).multiplyScalar(r),x.position.setFromMatrixPosition(u.matrixWorld),x.position.applyMatrix4(d),this.matrix42.identity(),this.matrix4.copy(u.matrixWorld),this.matrix4.premultiply(d),this.matrix42.extractRotation(this.matrix4),
x.halfWidth.set(.5*u.width,0,0),x.halfHeight.set(0,.5*u.height,0),x.halfWidth.applyMatrix4(this.matrix42),x.halfHeight.applyMatrix4(this.matrix42),this.state.rectArea[p]=x,p++;else if(u.isPointLight){x=this.cache.get(u);x.position.setFromMatrixPosition(u.matrixWorld);x.position.applyMatrix4(d);x.color.copy(u.color).multiplyScalar(u.intensity);x.distance=u.distance;x.decay=0===u.distance?0:u.decay;if(x.shadow=u.castShadow)q=u.shadow,x.shadowBias=q.bias,x.shadowRadius=q.radius,x.shadowMapSize=q.mapSize,
x.shadowCameraNear=q.camera.near,x.shadowCameraFar=q.camera.far;this.state.pointShadowMap[l]=z;this.state.pointShadowMatrix[l]=u.shadow.matrix;this.state.point[l]=x;l++}else u.isHemisphereLight&&(x=this.cache.get(u),x.direction.setFromMatrixPosition(u.matrixWorld),x.direction.transformDirection(d),x.direction.normalize(),x.skyColor.copy(u.color).multiplyScalar(r),x.groundColor.copy(u.groundColor).multiplyScalar(r),this.state.hemi[m]=x,m++)}this.state.ambient[0]=c;this.state.ambient[1]=g;this.state.ambient[2]=
f;this.state.directional.length=k;this.state.spot.length=h;this.state.rectArea.length=p;this.state.point.length=l;this.state.hemi.length=m;this.state.hash=this.state.id+","+k+","+l+","+h+","+p+","+m+","+b.length};c.count=0;return c}(),We=function(){function c(){this.lights=new Ve;this.lightsArray=[];this.shadowsArray=[];this.spritesArray=[];this.state={lightsArray:this.lightsArray,shadowsArray:this.shadowsArray,spritesArray:this.spritesArray,lights:this.lights}}c.prototype.init=function(){this.lightsArray.length=
0;this.shadowsArray.length=0;this.spritesArray.length=0};c.prototype.pushLight=function(a){this.lightsArray.push(a)};c.prototype.pushShadow=function(a){this.shadowsArray.push(a)};c.prototype.pushSprite=function(a){this.spritesArray.push(a)};c.prototype.setupLights=function(a){this.lights.setup(this.lightsArray,this.shadowsArray,a)};return c}(),Xe=function(){function c(){this.renderStates={}}c.prototype.get=function(a,b){a=a.id+","+b.id;b=this.renderStates[a];void 0===b&&(b=new We,this.renderStates[a]=
b);return b};c.prototype.dispose=function(){this.renderStates={}};return c}(),ob=function(){function c(a){void 0===a&&(a={});this.onMaterialDispose=function(a){return function(b){b=b.target;b.removeEventListener("dispose",a.onMaterialDispose);a.deallocateMaterial(b)}}(this);this.renderObjectImmediate=function(a){return function(b,d,c){b.render(function(b){a.renderBufferImmediate(b,d,c)})}}(this);this.compile=function(a){return function(b,d){a.currentRenderState=a.renderStates.get(b,d);a.currentRenderState.init();
b.traverse(function(b){b.isLight&&(a.currentRenderState.pushLight(b),b.castShadow&&a.currentRenderState.pushShadow(b))});a.currentRenderState.setupLights(d);b.traverse(function(d){if(d.material)if(Array.isArray(d.material))for(var c=0;c<d.material.length;c++)a.initMaterial(d.material[c],b.fog,d);else a.initMaterial(d.material,b.fog,d)})}}(this);this.isAnimating=!1;this.onAnimationFrame=null;this.animationLoop=function(a){return function(b){!1!==a.isAnimating&&(a.onAnimationFrame(b),a.requestAnimationLoopFrame())}}(this);
this.setTexture2D=function(){var a=!1;return function(b,d){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);this.textures.setTexture2D(b,d)}}();this.setTexture=function(){var a=!1;return function(b,d){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);this.textures.setTexture2D(b,d)}}();this.setTextureCube=function(){var a=!1;
return function(b,d){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?this.textures.setTextureCube(b,d):this.textures.setTextureCubeDynamic(b,d)}}();console.log("THREE.WebGLRenderer","91dev-ts-a");this.parameters=a;this._canvas=void 0!==this.parameters.canvas?this.parameters.canvas:document.createElementNS("http://www.w3.org/1999/xhtml",
"canvas");a=void 0!==this.parameters.context?this.parameters.context:null;var b=void 0!==this.parameters.alpha?this.parameters.alpha:!1,d=void 0!==this.parameters.depth?this.parameters.depth:!0,c=void 0!==this.parameters.stencil?this.parameters.stencil:!0,g=void 0!==this.parameters.antialias?this.parameters.antialias:!1;this._premultipliedAlpha=void 0!==this.parameters.premultipliedAlpha?this.parameters.premultipliedAlpha:!0;var f=void 0!==this.parameters.preserveDrawingBuffer?this.parameters.preserveDrawingBuffer:
!1,k=void 0!==this.parameters.powerPreference?this.parameters.powerPreference:"default";this.domElement=this._canvas;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=8;this.maxMorphNormals=4;this._isContextLost=
!1;this._currentFramebuffer=this._currentRenderTarget=null;this._currentMaterialId=-1;this._currentGeometryProgram="";this._currentArrayCamera=this._currentCamera=null;this._currentViewport=new J;this._currentScissor=new J;this._currentScissorTest=null;this._usedTextureUnits=0;this._width=this._canvas.width;this._height=this._canvas.height;this._pixelRatio=1;this._viewport=new J(0,0,this._width,this._height);this._scissor=new J(0,0,this._width,this._height);this._scissorTest=!1;this._frustum=new jb;
this._clipping=new Te;this._localClippingEnabled=this._clippingEnabled=!1;this._projScreenMatrix=new F;this._vector3=new q;this._infoMemory={geometries:0,textures:0};this._infoRender={frame:0,calls:0,vertices:0,faces:0,points:0};var l=this;this.info={render:this._infoRender,memory:this._infoMemory,programs:null,autoReset:!0,reset:function(){l.resetInfo()}};try{var h={alpha:b,depth:d,stencil:c,antialias:g,premultipliedAlpha:this._premultipliedAlpha,preserveDrawingBuffer:f,powerPreference:k};this._canvas.addEventListener("webglcontextlost",
this.onContextLost,!1);this._canvas.addEventListener("webglcontextrestored",this.onContextRestore,!1);this._gl=a||this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);if(null===this._gl){if(null!==this._canvas.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.");}void 0===this._gl.getShaderPrecisionFormat&&(this._gl.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,
precision:1}})}catch(p){console.error("THREE.WebGLRenderer: "+p.message)}this.initGLContext();this.vr=new Lc(this);this.shadowMap=new Bc(this,this.objects,this.capabilities.maxTextureSize)}c.prototype.resetInfo=function(){this._infoRender.frame++;this._infoRender.calls=0;this._infoRender.vertices=0;this._infoRender.faces=0;this._infoRender.points=0};c.prototype.getTargetPixelRatio=function(){return null===this._currentRenderTarget?this._pixelRatio:1};c.prototype.initGLContext=function(){this.extensions=
new Se(this._gl);this.extensions.get("WEBGL_depth_texture");this.extensions.get("OES_texture_float");this.extensions.get("OES_texture_float_linear");this.extensions.get("OES_texture_half_float");this.extensions.get("OES_texture_half_float_linear");this.extensions.get("OES_standard_derivatives");this.extensions.get("OES_element_index_uint");this.extensions.get("ANGLE_instanced_arrays");this.utils=new Mc(this._gl,this.extensions);this.capabilities=new Re(this._gl,this.extensions,this.parameters);this.state=
new nb(this._gl,this.extensions,this.utils);this.state.scissor(this._currentScissor.copy(this._scissor).multiplyScalar(this._pixelRatio));this.state.viewport(this._currentViewport.copy(this._viewport).multiplyScalar(this._pixelRatio));this.properties=new Qe;this.textures=new Pe(this._gl,this.extensions,this.state,this.properties,this.capabilities,this.utils,this._infoMemory,this._infoRender);this.attributes=new De(this._gl);this.geometries=new Le(this._gl,this.attributes,this._infoMemory);this.objects=
new Me(this.geometries,this._infoRender);this.morphtargets=new Ie(this._gl);this.programCache=new Oe(this,this.extensions,this.capabilities);this.renderLists=new He;this.renderStates=new Xe;this.background=new Fe(this,this.state,this.geometries,this._premultipliedAlpha);this.bufferRenderer=new Ke(this._gl,this.extensions,this._infoRender);this.indexedBufferRenderer=new Je(this._gl,this.extensions,this._infoRender);this.spriteRenderer=new Ce(this,this._gl,this.state,this.textures,this.capabilities);
this.info.programs=this.programCache.programs;this.context=this._gl};c.prototype.getContext=function(){return this._gl};c.prototype.getContextAttributes=function(){return this._gl.getContextAttributes()};c.prototype.forceContextLoss=function(){var a=this.extensions.get("WEBGL_lose_context");a&&a.loseContext()};c.prototype.forceContextRestore=function(){var a=this.extensions.get("WEBGL_lose_context");a&&a.restoreContext()};c.prototype.getPixelRatio=function(){return this._pixelRatio};c.prototype.setPixelRatio=
function(a){void 0!==a&&(this._pixelRatio=a,this.setSize(this._width,this._height,!1))};c.prototype.getSize=function(){return{width:this._width,height:this._height}};c.prototype.setSize=function(a,b,d){var c=this.vr.getDevice();c&&c.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(this._width=a,this._height=b,this._canvas.width=a*this._pixelRatio,this._canvas.height=b*this._pixelRatio,!1!==d&&(this._canvas.style.width=a+"px",this._canvas.style.height=
b+"px"),this.setViewport(0,0,a,b))};c.prototype.getDrawingBufferSize=function(){return{width:this._width*this._pixelRatio,height:this._height*this._pixelRatio}};c.prototype.setDrawingBufferSize=function(a,b,d){this._width=a;this._height=b;this._pixelRatio=d;this._canvas.width=a*d;this._canvas.height=b*d;this.setViewport(0,0,a,b)};c.prototype.getCurrentViewport=function(){return this._currentViewport};c.prototype.setViewport=function(a,b,d,c){this._viewport.set(a,this._height-b-c,d,c);this.state.viewport(this._currentViewport.copy(this._viewport).multiplyScalar(this._pixelRatio))};
c.prototype.setScissor=function(a,b,d,c){this._scissor.set(a,this._height-b-c,d,c);this.state.scissor(this._currentScissor.copy(this._scissor).multiplyScalar(this._pixelRatio))};c.prototype.setScissorTest=function(a){this.state.setScissorTest(this._scissorTest=a)};c.prototype.getClearColor=function(){return this.background.getClearColor()};c.prototype.setClearColor=function(){this.background.setClearColor.apply(this.background,arguments)};c.prototype.getClearAlpha=function(){return this.background.getClearAlpha()};
c.prototype.setClearAlpha=function(){this.background.setClearAlpha.apply(this.background,arguments)};c.prototype.clear=function(a,b,d){var c=0;if(void 0===a||a)c|=this._gl.COLOR_BUFFER_BIT;if(void 0===b||b)c|=this._gl.DEPTH_BUFFER_BIT;if(void 0===d||d)c|=this._gl.STENCIL_BUFFER_BIT;this._gl.clear(c)};c.prototype.clearColor=function(){this.clear(!0,!1,!1)};c.prototype.clearDepth=function(){this.clear(!1,!0,!1)};c.prototype.clearStencil=function(){this.clear(!1,!1,!0)};c.prototype.clearTarget=function(a,
b,d,c){this.setRenderTarget(a);this.clear(b,d,c)};c.prototype.dispose=function(){this._canvas.removeEventListener("webglcontextlost",this.onContextLost,!1);this._canvas.removeEventListener("webglcontextrestored",this.onContextRestore,!1);this.renderLists.dispose();this.renderStates.dispose();this.properties.dispose();this.objects.dispose();this.vr.dispose();this.stopAnimation()};c.prototype.onContextLost=function(a){a.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");this._isContextLost=
!0};c.prototype.onContextRestore=function(){console.log("THREE.WebGLRenderer: Context Restored.");this._isContextLost=!1;this.initGLContext()};c.prototype.deallocateMaterial=function(a){this.releaseMaterialProgramReference(a);this.properties.remove(a)};c.prototype.releaseMaterialProgramReference=function(a){var b=this.properties.get(a).program;a.program=void 0;void 0!==b&&this.programCache.releaseProgram(b)};c.prototype.renderBufferImmediate=function(a,b,d){this.state.initAttributes();var c=this.properties.get(a);
a.hasPositions&&!c.position&&(c.position=this._gl.createBuffer());a.hasNormals&&!c.normal&&(c.normal=this._gl.createBuffer());a.hasUvs&&!c.uv&&(c.uv=this._gl.createBuffer());a.hasColors&&!c.color&&(c.color=this._gl.createBuffer());b=b.getAttributes();a.hasPositions&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.position),this._gl.bufferData(this._gl.ARRAY_BUFFER,a.positionArray,this._gl.DYNAMIC_DRAW),this.state.enableAttribute(b.position),this._gl.vertexAttribPointer(b.position,3,this._gl.FLOAT,!1,
0,0));if(a.hasNormals){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.normal);if(!d.isMeshPhongMaterial&&!d.isMeshStandardMaterial&&!d.isMeshNormalMaterial&&!0===d.flatShading)for(var g=0,f=3*a.count;g<f;g+=9){var k=a.normalArray,l=(k[g+0]+k[g+3]+k[g+6])/3,h=(k[g+1]+k[g+4]+k[g+7])/3,p=(k[g+2]+k[g+5]+k[g+8])/3;k[g+0]=l;k[g+1]=h;k[g+2]=p;k[g+3]=l;k[g+4]=h;k[g+5]=p;k[g+6]=l;k[g+7]=h;k[g+8]=p}this._gl.bufferData(this._gl.ARRAY_BUFFER,a.normalArray,this._gl.DYNAMIC_DRAW);this.state.enableAttribute(b.normal);
this._gl.vertexAttribPointer(b.normal,3,this._gl.FLOAT,!1,0,0)}a.hasUvs&&d.map&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.uv),this._gl.bufferData(this._gl.ARRAY_BUFFER,a.uvArray,this._gl.DYNAMIC_DRAW),this.state.enableAttribute(b.uv),this._gl.vertexAttribPointer(b.uv,2,this._gl.FLOAT,!1,0,0));a.hasColors&&0!==d.vertexColors&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,c.color),this._gl.bufferData(this._gl.ARRAY_BUFFER,a.colorArray,this._gl.DYNAMIC_DRAW),this.state.enableAttribute(b.color),this._gl.vertexAttribPointer(b.color,
3,this._gl.FLOAT,!1,0,0));this.state.disableUnusedAttributes();this._gl.drawArrays(this._gl.TRIANGLES,0,a.count);a.count=0};c.prototype.renderBufferDirect=function(a,b,d,c,g,f){var e=g.isMesh&&0>g.matrixWorld.determinant();this.state.setMaterial(c,e);e=this.setProgram(a,b,c,g);a=d.id+"_"+e.id+"_"+(!0===c.wireframe);var l=!1;a!==this._currentGeometryProgram&&(this._currentGeometryProgram=a,l=!0);g.morphTargetInfluences&&(this.morphtargets.update(g,d,c,e),l=!0);var h=d.index,p=d.attributes.position;
b=1;!0===c.wireframe&&(h=this.geometries.getWireframeAttribute(d),b=2);a=this.bufferRenderer;if(null!==h){var m=this.attributes.get(h);a=this.indexedBufferRenderer;a.setIndex(m)}l&&(this.setupVertexAttributes(c,e,d),null!==h&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,m.buffer));m=Infinity;null!==h?m=h.count:void 0!==p&&(m=p.count);l=d.drawRange.start*b;h=null!==f?f.start*b:0;e=Math.max(l,h);f=Math.max(0,Math.min(m,l+d.drawRange.count*b,h+(null!==f?f.count*b:Infinity))-1-e+1);if(0!==f){if(g.isMesh)if(!0===
c.wireframe)this.state.setLineWidth(c.wireframeLinewidth*this.getTargetPixelRatio()),a.setMode(this._gl.LINES);else switch(g.drawMode){case 0:a.setMode(this._gl.TRIANGLES);break;case 1:a.setMode(this._gl.TRIANGLE_STRIP);break;case 2:a.setMode(this._gl.TRIANGLE_FAN)}else g.isLine?(c=c.linewidth,void 0===c&&(c=1),this.state.setLineWidth(c*this.getTargetPixelRatio()),g.isLineSegments?a.setMode(this._gl.LINES):g.isLineLoop?a.setMode(this._gl.LINE_LOOP):a.setMode(this._gl.LINE_STRIP)):g.isPoints&&a.setMode(this._gl.POINTS);
d&&d.isInstancedBufferGeometry?0<d.maxInstancedCount&&a.renderInstances(d,e,f):a.render(e,f)}};c.prototype.setupVertexAttributes=function(a,b,d,c){if(d&&d.isInstancedBufferGeometry&&null===this.extensions.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===c&&(c=0);this.state.initAttributes();var e=d.attributes;b=b.getAttributes();a=a.defaultAttributeValues;
for(var f in b){var k=b[f];if(0<=k){var l=e[f];if(void 0!==l){var h=l.normalized,p=l.itemSize,m=this.attributes.get(l);if(void 0!==m){var t=m.buffer,v=m.type;m=m.bytesPerElement;if(l.isInterleavedBufferAttribute){var u=l.data,q=u.stride;l=l.offset;u&&u.isInstancedInterleavedBuffer?(this.state.enableAttributeAndDivisor(k,u.meshPerAttribute),void 0===d.maxInstancedCount&&(d.maxInstancedCount=u.meshPerAttribute*u.count)):this.state.enableAttribute(k);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t);this._gl.vertexAttribPointer(k,
p,v,h,q*m,(c*q+l)*m)}else l.isInstancedBufferAttribute?(this.state.enableAttributeAndDivisor(k,l.meshPerAttribute),void 0===d.maxInstancedCount&&(d.maxInstancedCount=l.meshPerAttribute*l.count)):this.state.enableAttribute(k),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,t),this._gl.vertexAttribPointer(k,p,v,h,0,c*p*m)}}else if(void 0!==a&&(h=a[f],void 0!==h))switch(h.length){case 2:this._gl.vertexAttrib2fv(k,h);break;case 3:this._gl.vertexAttrib3fv(k,h);break;case 4:this._gl.vertexAttrib4fv(k,h);break;
default:this._gl.vertexAttrib1fv(k,h)}}}this.state.disableUnusedAttributes()}};c.prototype.startAnimation=function(){this.isAnimating||(this.requestAnimationLoopFrame(),this.isAnimating=!0)};c.prototype.stopAnimation=function(){this.isAnimating=!1};c.prototype.requestAnimationLoopFrame=function(){var a=this.vr.getDevice();a&&a.isPresenting?a.requestAnimationFrame(this.animationLoop):window.requestAnimationFrame(this.animationLoop)};c.prototype.animate=function(a){this.onAnimationFrame=a;null!==this.onAnimationFrame?
this.startAnimation():this.stopAnimation()};c.prototype.render=function(a,b,d,c){if(!b||!b.isCamera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else if(!this._isContextLost){this._currentGeometryProgram="";this._currentMaterialId=-1;this._currentCamera=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();this.vr.enabled&&(b=this.vr.getCamera(b));this.currentRenderState=this.renderStates.get(a,b);this.currentRenderState.init();
a.onBeforeRender(this,a,b,d);this._projScreenMatrix.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);this._frustum.setFromMatrix(this._projScreenMatrix);this._localClippingEnabled=this.localClippingEnabled;this._clippingEnabled=this._clipping.init(this.clippingPlanes,this._localClippingEnabled,b);this.currentRenderList=this.renderLists.get(a,b);this.currentRenderList.init();this.projectObject(a,b,this.sortObjects);!0===this.sortObjects&&this.currentRenderList.sort();this._clippingEnabled&&
this._clipping.beginShadows();this.shadowMap.render(this.currentRenderState.state.shadowsArray,a,b);this.currentRenderState.setupLights(b);this._clippingEnabled&&this._clipping.endShadows();this.info.autoReset&&this.info.reset();void 0===d&&(d=null);this.setRenderTarget(d);this.background.render(this.currentRenderList,a,b,c);c=this.currentRenderList.opaque;var e=this.currentRenderList.transparent;if(a.overrideMaterial){var f=a.overrideMaterial;c.length&&this.renderObjects(c,a,b,f);e.length&&this.renderObjects(e,
a,b,f)}else c.length&&this.renderObjects(c,a,b),e.length&&this.renderObjects(e,a,b);this.spriteRenderer.render(this.currentRenderState.state.spritesArray,a,b);d&&this.textures.updateRenderTargetMipmap(d);this.state.buffers.depth.setTest(!0);this.state.buffers.depth.setMask(!0);this.state.buffers.color.setMask(!0);this.state.setPolygonOffset(!1);a.onAfterRender(this,a,b);this.vr.enabled&&this.vr.submitFrame();this.currentRenderState=this.currentRenderList=null}};c.prototype.projectObject=function(a,
b,d){if(!1!==a.visible){if(a.layers.test(b.layers))if(a.isLight)this.currentRenderState.pushLight(a),a.castShadow&&this.currentRenderState.pushShadow(a);else if(a.isSprite)a.frustumCulled&&!this._frustum.intersectsSprite(a)||this.currentRenderState.pushSprite(a);else if(a.isImmediateRenderObject)d&&this._vector3.setFromMatrixPosition(a.matrixWorld).applyMatrix4(this._projScreenMatrix),this.currentRenderList.push(a,null,a.material,this._vector3.z,null);else if(a.isMesh||a.isLine||a.isPoints)if(a.isSkinnedMesh&&
a.skeleton.update(),!a.frustumCulled||this._frustum.intersectsObject(a)){d&&this._vector3.setFromMatrixPosition(a.matrixWorld).applyMatrix4(this._projScreenMatrix);var c=this.objects.update(a),g=a.material;if(Array.isArray(g))for(var f=c.groups,k=0,l=f.length;k<l;k++){var h=f[k],p=g[h.materialIndex];p&&p.visible&&this.currentRenderList.push(a,c,p,this._vector3.z,h)}else g.visible&&this.currentRenderList.push(a,c,g,this._vector3.z,null)}a=a.children;k=0;for(c=a.length;k<c;k++)this.projectObject(a[k],
b,d)}};c.prototype.renderObjects=function(a,b,d,c){for(var e=0,f=a.length;e<f;e++){var k=a[e],l=k.object,h=k.geometry,p=void 0===c?k.material:c;k=k.group;if(d.isArrayCamera){this._currentArrayCamera=d;for(var m=d.cameras,t=0,v=m.length;t<v;t++){var u=m[t];if(l.layers.test(u.layers)){var q=u.bounds;this.state.viewport(this._currentViewport.set(q.x*this._width,q.y*this._height,q.z*this._width,q.w*this._height).multiplyScalar(this._pixelRatio));this.renderObject(l,b,u,h,p,k)}}}else this._currentArrayCamera=
null,this.renderObject(l,b,d,h,p,k)}};c.prototype.renderObject=function(a,b,d,c,g,f){a.onBeforeRender(this,b,d,c,g,f);this.currentRenderState=this.renderStates.get(b,this._currentArrayCamera||d);a.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,a.matrixWorld);a.normalMatrix.getNormalMatrix(a.modelViewMatrix);if(a.isImmediateRenderObject){var e=a.isMesh&&0>a.matrixWorld.determinant();this.state.setMaterial(g,e);e=this.setProgram(d,b.fog,g,a);this._currentGeometryProgram="";this.renderObjectImmediate(a,
e,g)}else this.renderBufferDirect(d,b.fog,c,g,a,f);a.onAfterRender(this,b,d,c,g,f);this.currentRenderState=this.renderStates.get(b,this._currentArrayCamera||d)};c.prototype.initMaterial=function(a,b,d){var c=this.properties.get(a),g=this.currentRenderState.state.lights;d=this.programCache.getParameters(a,g.state,this.currentRenderState.state.shadowsArray,b,this._clipping.numPlanes,this._clipping.numIntersection,d);var f=this.programCache.getProgramCode(a,d),k=c.program,l=!0;if(void 0===k)a.addEventListener("dispose",
this.onMaterialDispose);else if(k.code!==f)this.releaseMaterialProgramReference(a);else{if(c.lightsHash!==g.state.hash)this.properties.update(a,"lightsHash",g.state.hash);else if(void 0!==d.shaderID)return;l=!1}l&&(d.shaderID?(k=Ea[d.shaderID],c.shader={name:a.type,uniforms:Q.clone(k.uniforms),vertexShader:k.vertexShader,fragmentShader:k.fragmentShader}):c.shader={name:a.type,uniforms:a.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader},a.onBeforeCompile(c.shader),k=this.programCache.acquireProgram(a,
c.shader,d,f),c.program=k,a.program=k);d=k.getAttributes();if(a.morphTargets)for(f=a.numSupportedMorphTargets=0;f<this.maxMorphTargets;f++)0<=d["morphTarget"+f]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(f=a.numSupportedMorphNormals=0;f<this.maxMorphNormals;f++)0<=d["morphNormal"+f]&&a.numSupportedMorphNormals++;d=c.shader.uniforms;if(!a.isShaderMaterial&&!a.isRawShaderMaterial||!0===a.clipping)c.numClippingPlanes=this._clipping.numPlanes,c.numIntersection=this._clipping.numIntersection,
d.clippingPlanes=this._clipping.uniform;c.fog=b;c.lightsHash=g.state.hash;a.lights&&(d.ambientLightColor.value=g.state.ambient,d.directionalLights.value=g.state.directional,d.spotLights.value=g.state.spot,d.rectAreaLights.value=g.state.rectArea,d.pointLights.value=g.state.point,d.hemisphereLights.value=g.state.hemi,d.directionalShadowMap.value=g.state.directionalShadowMap,d.directionalShadowMatrix.value=g.state.directionalShadowMatrix,d.spotShadowMap.value=g.state.spotShadowMap,d.spotShadowMatrix.value=
g.state.spotShadowMatrix,d.pointShadowMap.value=g.state.pointShadowMap,d.pointShadowMatrix.value=g.state.pointShadowMatrix);a=c.program.getUniforms();a=Ka.seqWithValue(a.seq,d);c.uniformsList=a};c.prototype.setProgram=function(a,b,d,c){this._usedTextureUnits=0;var e=this.properties.get(d),f=this.currentRenderState.state.lights;this._clippingEnabled&&(this._localClippingEnabled||a!==this._currentCamera)&&this._clipping.setState(d.clippingPlanes,d.clipIntersection,d.clipShadows,a,e,a===this._currentCamera&&
d.id===this._currentMaterialId);!1===d.needsUpdate&&(void 0===e.program?d.needsUpdate=!0:d.fog&&e.fog!==b?d.needsUpdate=!0:d.lights&&e.lightsHash!==f.state.hash?d.needsUpdate=!0:void 0===e.numClippingPlanes||e.numClippingPlanes===this._clipping.numPlanes&&e.numIntersection===this._clipping.numIntersection||(d.needsUpdate=!0));d.needsUpdate&&(this.initMaterial(d,b,c),d.needsUpdate=!1);var k=!1,l=f=!1,h=e.program,p=h.getUniforms(),m=e.shader.uniforms;this.state.useProgram(h.program)&&(l=f=k=!0);d.id!==
this._currentMaterialId&&(this._currentMaterialId=d.id,f=!0);if(k||a!==this._currentCamera){p.setValue(this._gl,"projectionMatrix",a.projectionMatrix);this.capabilities.logarithmicDepthBuffer&&p.setValue(this._gl,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));this._currentCamera!==(this._currentArrayCamera||a)&&(this._currentCamera=this._currentArrayCamera||a,l=f=!0);if(d.isShaderMaterial||d.isMeshPhongMaterial||d.isMeshStandardMaterial||d.envMap)k=p.map.cameraPosition,void 0!==k&&k.setValue(this._gl,
this._vector3.setFromMatrixPosition(a.matrixWorld));(d.isMeshPhongMaterial||d.isMeshLambertMaterial||d.isMeshBasicMaterial||d.isMeshStandardMaterial||d.isShaderMaterial||d.skinning)&&p.setValue(this._gl,"viewMatrix",a.matrixWorldInverse)}if(d.skinning&&(p.setOptional(this._gl,c,"bindMatrix"),p.setOptional(this._gl,c,"bindMatrixInverse"),a=c.skeleton))if(k=a.bones,this.capabilities.floatVertexTextures){if(void 0===a.boneTexture){k=Math.sqrt(4*k.length);k=E.ceilPowerOfTwo(k);k=Math.max(k,4);var t=new Float32Array(k*
k*4);t.set(a.boneMatrices);var v=new eb(t,k,k,1023,1015);v.needsUpdate=!0;a.boneMatrices=t;a.boneTexture=v;a.boneTextureSize=k}p.setValue(this._gl,"boneTexture",a.boneTexture);p.setValue(this._gl,"boneTextureSize",a.boneTextureSize)}else p.setOptional(this._gl,a,"boneMatrices");f&&(p.setValue(this._gl,"toneMappingExposure",this.toneMappingExposure),p.setValue(this._gl,"toneMappingWhitePoint",this.toneMappingWhitePoint),d.lights&&this.markUniformsLightsNeedsUpdate(m,l),b&&d.fog&&this.refreshUniformsFog(m,
b),d.isMeshBasicMaterial?this.refreshUniformsCommon(m,d):d.isMeshLambertMaterial?(this.refreshUniformsCommon(m,d),this.refreshUniformsLambert(m,d)):d.isMeshPhongMaterial?(this.refreshUniformsCommon(m,d),d.isMeshToonMaterial?this.refreshUniformsToon(m,d):this.refreshUniformsPhong(m,d)):d.isMeshStandardMaterial?(this.refreshUniformsCommon(m,d),d.isMeshPhysicalMaterial?this.refreshUniformsPhysical(m,d):this.refreshUniformsStandard(m,d)):d.isMeshDepthMaterial?(this.refreshUniformsCommon(m,d),this.refreshUniformsDepth(m,
d)):d.isMeshDistanceMaterial?(this.refreshUniformsCommon(m,d),this.refreshUniformsDistance(m,d)):d.isMeshNormalMaterial?(this.refreshUniformsCommon(m,d),this.refreshUniformsNormal(m,d)):d.isLineBasicMaterial?(this.refreshUniformsLine(m,d),d.isLineDashedMaterial&&this.refreshUniformsDash(m,d)):d.isPointsMaterial?this.refreshUniformsPoints(m,d):d.isShadowMaterial&&(m.color.value=d.color,m.opacity.value=d.opacity),Ka.upload(this._gl,e.uniformsList,m,this));d.isShaderMaterial&&!0===d.uniformsNeedUpdate&&
(Ka.upload(this._gl,e.uniformsList,m,this),d.uniformsNeedUpdate=!1);p.setValue(this._gl,"modelViewMatrix",c.modelViewMatrix);p.setValue(this._gl,"normalMatrix",c.normalMatrix);p.setValue(this._gl,"modelMatrix",c.matrixWorld);return h};c.prototype.refreshUniformsCommon=function(a,b){a.opacity.value=b.opacity;b.color&&(a.diffuse.value=b.color);b.emissive&&a.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity);b.map&&(a.map.value=b.map);b.alphaMap&&(a.alphaMap.value=b.alphaMap);b.specularMap&&
(a.specularMap.value=b.specularMap);b.envMap&&(a.envMap.value=b.envMap,a.flipEnvMap.value=b.envMap&&b.envMap.isCubeTexture?-1:1,a.reflectivity.value=b.reflectivity,a.refractionRatio.value=b.refractionRatio);b.lightMap&&(a.lightMap.value=b.lightMap,a.lightMapIntensity.value=b.lightMapIntensity);b.aoMap&&(a.aoMap.value=b.aoMap,a.aoMapIntensity.value=b.aoMapIntensity);if(b.map)var d=b.map;else b.specularMap?d=b.specularMap:b.displacementMap?d=b.displacementMap:b.normalMap?d=b.normalMap:b.bumpMap?d=b.bumpMap:
b.roughnessMap?d=b.roughnessMap:b.metalnessMap?d=b.metalnessMap:b.alphaMap?d=b.alphaMap:b.emissiveMap&&(d=b.emissiveMap);if(void 0!==d){d.isWebGLRenderTarget&&(d=d.texture);if(!0===d.matrixAutoUpdate){b=d.offset;var c=d.repeat,g=d.center;d.matrix.setUvTransform(b.x,b.y,c.x,c.y,d.rotation,g.x,g.y)}a.uvTransform.value.copy(d.matrix)}};c.prototype.refreshUniformsLine=function(a,b){a.diffuse.value=b.color;a.opacity.value=b.opacity};c.prototype.refreshUniformsDash=function(a,b){a.dashSize.value=b.dashSize;
a.totalSize.value=b.dashSize+b.gapSize;a.scale.value=b.scale};c.prototype.refreshUniformsPoints=function(a,b){a.diffuse.value=b.color;a.opacity.value=b.opacity;a.size.value=b.size*this._pixelRatio;a.scale.value=.5*this._height;a.map.value=b.map;if(null!==b.map){if(!0===b.map.matrixAutoUpdate){var d=b.map.offset,c=b.map.repeat,g=b.map.center;b.map.matrix.setUvTransform(d.x,d.y,c.x,c.y,b.map.rotation,g.x,g.y)}a.uvTransform.value.copy(b.map.matrix)}};c.prototype.refreshUniformsFog=function(a,b){a.fogColor.value=
b.color;b.isFog?(a.fogNear.value=b.near,a.fogFar.value=b.far):b.isFogExp2&&(a.fogDensity.value=b.density)};c.prototype.refreshUniformsLambert=function(a,b){b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap)};c.prototype.refreshUniformsPhong=function(a,b){a.specular.value=b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));
b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)};c.prototype.refreshUniformsToon=function(a,b){this.refreshUniformsPhong(a,b);b.gradientMap&&(a.gradientMap.value=b.gradientMap)};c.prototype.refreshUniformsStandard=function(a,b){a.roughness.value=b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);
b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)};c.prototype.refreshUniformsPhysical=function(a,b){a.clearCoat.value=b.clearCoat;a.clearCoatRoughness.value=
b.clearCoatRoughness;this.refreshUniformsStandard(a,b)};c.prototype.refreshUniformsDepth=function(a,b){b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)};c.prototype.refreshUniformsDistance=function(a,b){b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);a.referencePosition.value.copy(b.referencePosition);
a.nearDistance.value=b.nearDistance;a.farDistance.value=b.farDistance};c.prototype.refreshUniformsNormal=function(a,b){b.bumpMap&&(a.bumpMap.value=b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)};c.prototype.markUniformsLightsNeedsUpdate=function(a,b){a.ambientLightColor.needsUpdate=
b;a.directionalLights.needsUpdate=b;a.pointLights.needsUpdate=b;a.spotLights.needsUpdate=b;a.rectAreaLights.needsUpdate=b;a.hemisphereLights.needsUpdate=b};c.prototype.allocTextureUnit=function(){var a=this._usedTextureUnits;a>=this.capabilities.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+a+" texture units while this GPU supports only "+this.capabilities.maxTextures);this._usedTextureUnits+=1;return a};c.prototype.getRenderTarget=function(){return this._currentRenderTarget};c.prototype.setRenderTarget=
function(a){(this._currentRenderTarget=a)&&void 0===this.properties.get(a).__webglFramebuffer&&this.textures.setupRenderTarget(a);var b=null,d=!1;a?(b=this.properties.get(a).__webglFramebuffer,a.isWebGLRenderTargetCube&&(b=b[a.activeCubeFace],d=!0),this._currentViewport.copy(a.viewport),this._currentScissor.copy(a.scissor),this._currentScissorTest=a.scissorTest):(this._currentViewport.copy(this._viewport).multiplyScalar(this._pixelRatio),this._currentScissor.copy(this._scissor).multiplyScalar(this._pixelRatio),
this._currentScissorTest=this._scissorTest);this._currentFramebuffer!==b&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,b),this._currentFramebuffer=b);this.state.viewport(this._currentViewport);this.state.scissor(this._currentScissor);this.state.setScissorTest(this._currentScissorTest);d&&(d=this.properties.get(a.texture),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,d.__webglTexture,a.activeMipMapLevel))};c.prototype.readRenderTargetPixels=
function(a,b,d,c,g,f){if(a&&a.isWebGLRenderTarget){var e=this.properties.get(a).__webglFramebuffer;if(e){var l=!1;e!==this._currentFramebuffer&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e),l=!0);try{var h=a.texture,p=h.format,m=h.type;1023!==p&&this.utils.convert(p)!==this._gl.getParameter(this._gl.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===m||this.utils.convert(m)===this._gl.getParameter(this._gl.IMPLEMENTATION_COLOR_READ_TYPE)||
1015===m&&(this.extensions.get("OES_texture_float")||this.extensions.get("WEBGL_color_buffer_float"))||1016===m&&this.extensions.get("EXT_color_buffer_half_float")?this._gl.checkFramebufferStatus(this._gl.FRAMEBUFFER)===this._gl.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-c&&0<=d&&d<=a.height-g&&this._gl.readPixels(b,d,c,g,this.utils.convert(p),this.utils.convert(m),f):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{l&&
this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._currentFramebuffer)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")};c.prototype.copyFramebufferToTexture=function(a,b,d){var c=b.image.width,g=b.image.height,f=this.utils.convert(b.format);this.setTexture2D(b,0);this._gl.copyTexImage2D(this._gl.TEXTURE_2D,d||0,f,a.x,a.y,c,g,0)};return c}(),Nc=function(){function c(a,b){void 0===b&&(b=2.5E-4);this.name="";this.isFogExp2=!0;this.color=
new h.Color(a);this.density=b}c.prototype.clone=function(){return new c(this.color.getHex(),this.density)};c.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};return c}(),Oc=function(){function c(a,b,d){void 0===b&&(b=1);void 0===d&&(d=1E3);this.name="";this.isFog=!0;this.color=new h.Color(a);this.near=b;this.far=d}c.prototype.clone=function(){return new c(this.color.getHex(),this.near,this.far)};c.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),
near:this.near,far:this.far}};return c}();h.Scene=function(c){function a(){var a=c.call(this)||this;a.type="Scene";a.background=null;a.fog=null;a.overrideMaterial=null;a.autoUpdate=!0;return a}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a,d){c.prototype.copy.call(this,a,d);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=
a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return this};a.prototype.toJSON=function(a){var b=c.prototype.toJSON.call(this,a);null!==this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return b};return a}(h.Object3D);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Data);c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,
a);return b}(h.Object3D.Obj);c.Obj=a})(h.Scene||(h.Scene={}));var Ye=function(c){function a(a,d,e,g,f){var b=c.call(this)||this;b.isLensFlare=!0;b.lensFlares=[];b.positionScreen=new q;b.customUpdateCallback=void 0;void 0!==a&&b.add(a,d,e,g,f);return b}r(a,c);a.prototype.copy=function(a,d){c.prototype.copy.call(this,a,d);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;d=0;for(var b=a.lensFlares.length;d<b;d++)this.lensFlares.push(a.lensFlares[d]);return this};
a.prototype.add=function(a,d,c,g,f,k){void 0===d&&(d=-1);void 0===c&&(c=0);void 0===k&&(k=1);void 0===f&&(f=new h.Color(16777215));void 0===g&&(g=1);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:d,distance:c,x:0,y:0,z:0,scale:1,rotation:0,opacity:k,color:f,blending:g});return this};a.prototype.updateLensFlares=function(){var a,d=this.lensFlares.length,c=2*-this.positionScreen.x,g=2*-this.positionScreen.y;for(a=0;a<d;a++){var f=this.lensFlares[a];f.x=this.positionScreen.x+c*f.distance;
f.y=this.positionScreen.y+g*f.distance;f.wantedRotation=f.x*Math.PI*.25;f.rotation+=.25*(f.wantedRotation-f.rotation)}};return a}(h.Object3D),pb=function(c){function a(a){var b=c.call(this)||this;b.type="SpriteMaterial";b.isSpriteMaterial=!0;b.color=new h.Color(16777215);b.map=null;b.rotation=0;b.fog=!1;b.lights=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return this};return a}(h.Material),
qb=function(c){function a(a){var b=c.call(this)||this;b.type="Sprite";b.isSprite=!0;b.material=void 0!==a?a:new pb;b.center=new y(.5,.5);return b}r(a,c);a.prototype.raycast=function(a,d){var b=new q,c=new q,f=new q;c.setFromMatrixPosition(this.matrixWorld);a.ray.closestPointToPoint(c,b);f.setFromMatrixScale(this.matrixWorld);f=f.x*f.y/4;c.distanceToSquared(b)>f||(c=a.ray.origin.distanceTo(b),c<a.near||c>a.far||d.push({distance:c,point:b.clone(),face:null,object:this}))};a.prototype.clone=function(){return(new a(this.material)).copy(this)};
a.prototype.copy=function(a){c.prototype.copy.call(this,a);void 0!==a.center&&this.center.copy(a.center);return this};return a}(h.Object3D);h.LOD=function(c){function a(){var a=c.call(this)||this;a.type="LOD";a.levels=[];return a}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a,!1);a=a.levels;this.l=a.length;for(var b=0;b<this.l;b++){var e=a[b];this.addLevel(e.object.clone(),e.distance)}return this};a.prototype.addLevel=function(a,
d){void 0===d&&(d=0);d=Math.abs(d);var b=this.levels,c;for(c=0;c<b.length&&!(d<b[c].distance);c++);b.splice(c,0,{distance:d,object:a});this.add(a)};a.prototype.getObjectForDistance=function(a){var b=this.levels;var c=1;for(this.l=b.length;c<this.l&&!(a<b[c].distance);c++);return b[c-1].object};a.prototype.raycast=function(a,d){var b=new q;b.setFromMatrixPosition(this.matrixWorld);b=a.ray.origin.distanceTo(b);return this.getObjectForDistance(b).raycast(a,d)};a.prototype.update=function(a){var b=new q,
c=new q,g=this.levels;if(1<g.length){b.setFromMatrixPosition(a.matrixWorld);c.setFromMatrixPosition(this.matrixWorld);a=b.distanceTo(c);g[0].object.visible=!0;b=1;for(this.l=g.length;b<this.l;b++)if(a>=g[b].distance)g[b-1].object.visible=!1,g[b].object.visible=!0;else break;for(;b<this.l;b++)g[b].object.visible=!1}};a.prototype.toJSON=function(a){a=c.prototype.toJSON.call(this,a);a.object.levels=[];for(var b=this.levels,e=0,g=b.length;e<g;e++){var f=b[e];a.object.levels.push({object:f.object.uuid,
distance:f.distance})}return a};return a}(h.Object3D);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Data);c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Obj);c.Obj=a})(h.LOD||(h.LOD={}));var rb=function(){function c(a,b){void 0===a&&(a=[]);this.bones=a.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===b)this.calculateInverses();else if(this.bones.length===
b.length)this.boneInverses=b.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],a=0,b=this.bones.length;a<b;a++)this.boneInverses.push(new F)}c.prototype.calculateInverses=function(){this.boneInverses=[];for(var a=0,b=this.bones.length;a<b;a++){var d=new F;this.bones[a]&&d.getInverse(this.bones[a].matrixWorld);this.boneInverses.push(d)}};c.prototype.pose=function(){var a,b;var d=0;for(b=this.bones.length;d<b;d++)(a=this.bones[d])&&a.matrixWorld.getInverse(this.boneInverses[d]);
d=0;for(b=this.bones.length;d<b;d++)if(a=this.bones[d])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)};c.prototype.update=function(){for(var a=new F,b=new F,d=this.bones,c=this.boneInverses,g=this.boneMatrices,f=this.boneTexture,k=0,l=d.length;k<l;k++)a.multiplyMatrices(d[k]?d[k].matrixWorld:b,c[k]),a.toArray(g,16*k);void 0!==f&&(f.needsUpdate=!0)};c.prototype.clone=
function(){return new c(this.bones,this.boneInverses)};c.prototype.getBoneByName=function(a){for(var b=0,d=this.bones.length;b<d;b++){var c=this.bones[b];if(c.name===a)return c}};return c}(),Pc=function(c){function a(){var a=c.call(this)||this;a.type="Bone";a.isBone=!0;return a}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.Object3D),Qc=function(c){function a(a,d){a=c.call(this,a,d)||this;a.type="SkinnedMesh";
a.isSkinnedMesh=!0;a.bindMode="attached";a.bindMatrix=new F;a.bindMatrixInverse=new F;d=a.initBones();d=new rb(d);a.bind(d,a.matrixWorld);a.normalizeSkinWeights();return a}r(a,c);a.prototype.initBones=function(){var a=[],d;if(this.geometry&&void 0!==this.geometry.bones){var c=0;for(d=this.geometry.bones.length;c<d;c++){var g=this.geometry.bones[c];var f=new Pc;a.push(f);f.name=g.name;f.position.fromArray(g.pos);f.quaternion.fromArray(g.rotq);void 0!==g.scl&&f.scale.fromArray(g.scl)}c=0;for(d=this.geometry.bones.length;c<
d;c++)g=this.geometry.bones[c],-1!==g.parent&&null!==g.parent&&void 0!==a[g.parent]?a[g.parent].add(a[c]):this.add(a[c])}this.updateMatrixWorld(!0);return a};a.prototype.bind=function(a,d){this.skeleton=a;void 0===d&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),d=this.matrixWorld);this.bindMatrix.copy(d);this.bindMatrixInverse.getInverse(d)};a.prototype.pose=function(){this.skeleton.pose()};a.prototype.normalizeSkinWeights=function(){var a;if(this.geometry&&this.geometry.isGeometry)for(a=
0;a<this.geometry.skinWeights.length;a++){var d=this.geometry.skinWeights[a];var c=1/d.manhattanLength();Infinity!==c?d.multiplyScalar(c):d.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){d=new J;var g=this.geometry.attributes.skinWeight;for(a=0;a<g.count;a++)d.x=g.getX(a),d.y=g.getY(a),d.z=g.getZ(a),d.w=g.getW(a),c=1/d.manhattanLength(),Infinity!==c?d.multiplyScalar(c):d.set(1,0,0,0),g.setXYZW(a,d.x,d.y,d.z,d.w)}};a.prototype.updateMatrixWorld=function(a){fa.prototype.updateMatrixWorld.call(this,
a);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)};a.prototype.clone=function(){return(new a(this.geometry,this.material)).copy(this)};a.prototype.copy=function(a){return c.prototype.copy.call(this,a)};return a}(fa),L=function(c){function a(a){var b=c.call(this)||this;b.type="LineBasicMaterial";b.color=new h.Color(16777215);
b.linewidth=1;b.linecap="round";b.linejoin="round";b.lights=!1;b.isLineBasicMaterial=!0;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return this};return a}(h.Material),ka=function(c){function a(a,d,e){var b=c.call(this)||this;b.isLine=!0;if(1===e)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),
new M(a,d);b.type="Line";b.geometry=void 0!==a?a:new h.BufferGeometry;b.material=void 0!==d?d:new L({color:16777215*Math.random()});return b}r(a,c);a.prototype.computeLineDistances=function(){var a=new q,d=new q,c=this.geometry;if(c.isBufferGeometry)if(null===c.index){var g=c.attributes.position;var f=[0];for(var k=1,l=g.count;k<l;k++)a.fromBufferAttribute(g,k-1),d.fromBufferAttribute(g,k),f[k]=f[k-1],f[k]+=a.distanceTo(d);c.addAttribute("lineDistance",new w(f,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
else if(c.isGeometry)for(a=c.vertices,f=c.lineDistances,f[0]=0,k=1,l=a.length;k<l;k++)f[k]=f[k-1],f[k]+=a[k-1].distanceTo(a[k]);return this};a.prototype.raycast=function(a,d){var b=new F,c=new va,f=new ia,k=a.linePrecision;k*=k;var l=this.geometry,h=this.matrixWorld;null===l.boundingSphere&&l.computeBoundingSphere();f.copy(l.boundingSphere);f.applyMatrix4(h);if(!1!==a.ray.intersectsSphere(f)){b.getInverse(h);c.copy(a.ray).applyMatrix4(b);var p=new q,m=new q;b=new q;f=new q;h=this&&this.isLineSegments?
2:1;if(l.isBufferGeometry){var t=l.index,v=l.attributes.position.array;if(null!==t){t=t.array;l=0;for(var u=t.length-1;l<u;l+=h){var r=t[l+1];p.fromArray(v,3*t[l]);m.fromArray(v,3*r);r=c.distanceSqToSegment(p,m,f,b);r>k||(f.applyMatrix4(this.matrixWorld),r=a.ray.origin.distanceTo(f),r<a.near||r>a.far||d.push({distance:r,point:b.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}}else for(l=0,u=v.length/3-1;l<u;l+=h)p.fromArray(v,3*l),m.fromArray(v,3*l+3),r=c.distanceSqToSegment(p,
m,f,b),r>k||(f.applyMatrix4(this.matrixWorld),r=a.ray.origin.distanceTo(f),r<a.near||r>a.far||d.push({distance:r,point:b.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}else if(l.isGeometry)for(p=l.vertices,m=p.length,l=0;l<m-1;l+=h)r=c.distanceSqToSegment(p[l],p[l+1],f,b),r>k||(f.applyMatrix4(this.matrixWorld),r=a.ray.origin.distanceTo(f),r<a.near||r>a.far||d.push({distance:r,point:b.clone().applyMatrix4(this.matrixWorld),index:l,face:null,faceIndex:null,object:this}))}};
a.prototype.clone=function(){return(new a(this.geometry,this.material)).copy(this)};a.prototype.copy=function(a){return c.prototype.copy.call(this,a)};return a}(h.Object3D),M=function(c){function a(a,d){a=c.call(this,a,d)||this;a.type="LineSegments";a.isLineSegments=!0;return a}r(a,c);a.prototype.computeLineDistances=function(){var a=new q,d=new q,c=this.geometry;if(c.isBufferGeometry)if(null===c.index){var g=c.attributes.position;var f=[];for(var k=0,l=g.count;k<l;k+=2)a.fromBufferAttribute(g,k),
d.fromBufferAttribute(g,k+1),f[k]=0===k?0:f[k-1],f[k+1]=f[k]+a.distanceTo(d);c.addAttribute("lineDistance",new w(f,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(c.isGeometry)for(g=c.vertices,f=c.lineDistances,k=0,l=g.length;k<l;k+=2)a.copy(g[k]),d.copy(g[k+1]),f[k]=0===k?0:f[k-1],f[k+1]=f[k]+a.distanceTo(d);return this};return a}(ka),Rc=function(c){function a(a,d){a=c.call(this,a,d)||this;a.type="LineLoop";a.isLineLoop=
!0;return a}r(a,c);return a}(ka),wa=function(c){function a(a){var b=c.call(this)||this;b.type="PointsMaterial";b.isPointsMaterial=!0;b.color=new h.Color(16777215);b.map=null;b.size=1;b.sizeAttenuation=!0;b.lights=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};return a}(h.Material),Pa=function(c){function a(a,d){var b=c.call(this)||this;b.type="Points";
b.isPoints=!0;b.geometry=void 0!==a?a:new h.BufferGeometry;b.material=void 0!==d?d:new wa({color:16777215*Math.random()});return b}r(a,c);a.prototype.raycast=function(a,c){function b(b,d){var e=f.distanceSqToPoint(b);if(e<t){b=f.closestPointToPoint(b);b.applyMatrix4(p);var g=a.ray.origin.distanceTo(b);g<a.near||g>a.far||c.push({distance:g,distanceToRay:Math.sqrt(e),point:b.clone(),index:d,face:null,object:l})}}var d=new F,f=new va,k=new ia,l=this,h=this.geometry,p=this.matrixWorld,m=a.params.Points.threshold;
null===h.boundingSphere&&h.computeBoundingSphere();k.copy(h.boundingSphere);k.applyMatrix4(p);k.radius+=m;if(!1!==a.ray.intersectsSphere(k)){d.getInverse(p);f.copy(a.ray).applyMatrix4(d);d=m/((this.scale.x+this.scale.y+this.scale.z)/3);var t=d*d;d=new q;if(h.isBufferGeometry)if(m=h.index,k=h.attributes.position.array,null!==m){m=m.array;h=0;for(var v=m.length;h<v;h++){var u=m[h];d.fromArray(k,3*u);b(d,u)}}else for(h=0,m=k.length/3;h<m;h++)d.fromArray(k,3*h),b(d,h);else for(d=h.vertices,h=0,k=d.length;h<
k;h++)b(d[h],h)}};a.prototype.clone=function(){return(new a(this.geometry,this.material)).copy(this)};a.prototype.copy=function(a){return c.prototype.copy.call(this,a)};return a}(h.Object3D),sb=function(c){function a(){var a=c.call(this)||this;a.type="Group";a.isGroup=!0;return a}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.Object3D),Ze=function(c){function a(a,d,e,g,f,k,l,h,p){a=c.call(this,a,d,e,
g,f,k,l,h,p)||this;a.generateMipmaps=!1;a.isVideoTexture=!0;return a}r(a,c);a.prototype.update=function(){var a=this.image;a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)};return a}(Y),Sc=function(c){function a(a,d,e,g,f,k,l,h,p,m,t,v){g=c.call(this,null,k,l,h,p,m,g,f,t,v)||this;g.isCompressedTexture=!0;g.image={width:d,height:e};g.mipmaps=a;g.flipY=!1;g.generateMipmaps=!1;return g}r(a,c);return a}(Y),$e=function(c){function a(b,d,e,g,f,k,l,h,p,m){void 0===l&&(l=1003);void 0===h&&(h=1003);
void 0===m&&(m=1026);e=c.call(this,null,g,f,k,l,h,m,a.fixType(e,m),p)||this;e.isDepthTexture=!0;if(1026!==m&&1027!==m)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");e.image={width:b,height:d};e.flipY=!1;e.generateMipmaps=!1;return e}r(a,c);a.fixType=function(a,d){return void 0===a&&1026===d?1012:void 0===a&&1027===d?1020:a};return a}(Y),tb=function(c){function a(a){var b=c.call(this)||this;b.type="WireframeGeometry";b.vertices=[];b.geometry=a;var e,
g,f,k=[0,0],l={},h=["a","b","c"];if(a&&a.isGeometry){var p=a.faces;var m=0;for(g=p.length;m<g;m++){var t=p[m];for(e=0;3>e;e++){var v=t[h[e]];var u=t[h[(e+1)%3]];k[0]=Math.min(v,u);k[1]=Math.max(v,u);v=k[0]+","+k[1];void 0===l[v]&&(l[v]={index1:k[0],index2:k[1]})}}for(v in l)m=l[v],h=a.vertices[m.index1],b.vertices.push(h.x,h.y,h.z),h=a.vertices[m.index2],b.vertices.push(h.x,h.y,h.z)}else if(a&&a.isBufferGeometry)if(h=new q,null!==a.index){p=a.attributes.position;t=a.index;var r=a.groups;0===r.length&&
(r=[{start:0,count:t.count,materialIndex:0}]);a=0;for(f=r.length;a<f;++a)for(m=r[a],e=m.start,g=m.count,m=e,g=e+g;m<g;m+=3)for(e=0;3>e;e++)v=t.getX(m+e),u=t.getX(m+(e+1)%3),k[0]=Math.min(v,u),k[1]=Math.max(v,u),v=k[0]+","+k[1],void 0===l[v]&&(l[v]={index1:k[0],index2:k[1]});for(v in l)m=l[v],h.fromBufferAttribute(p,m.index1),b.vertices.push(h.x,h.y,h.z),h.fromBufferAttribute(p,m.index2),b.vertices.push(h.x,h.y,h.z)}else for(p=a.attributes.position,m=0,g=p.count/3;m<g;m++)for(e=0;3>e;e++)l=3*m+e,h.fromBufferAttribute(p,
l),b.vertices.push(h.x,h.y,h.z),l=3*m+(e+1)%3,h.fromBufferAttribute(p,l),b.vertices.push(h.x,h.y,h.z);b.position=new w(b.vertices,3);return b}r(a,c);a.prototype.clone=function(){return(new a(this.geometry)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.vertices=a.vertices;return this};return a}(h.BufferGeometry),Tc=function(c){function a(a,d,e){var b=c.call(this)||this;b.type="ParametricGeometry";b.parameters={func:a,slices:d,stacks:e};b.fromBufferGeometry(new ub(a,d,
e));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),ub=function(c){function a(b,d,e){var g=c.call(this)||this;g.type="ParametricBufferGeometry";g.indices=[];g.vertices=[];g.normals=[];g.uvs=[];g.normal=new q;g.p0=new q;g.p1=new q;g.pu=new q;g.pv=new q;g.parameters={func:b,slices:d,stacks:e};var f,k,l=d+1;for(f=0;f<=e;f++){var h=f/e;for(k=0;k<=d;k++){var p=k/d;g.p0=b(p,h,g.p0);g.vertices.push(g.p0.x,g.p0.y,g.p0.z);0<=p-a.EPS?(g.p1=b(p-a.EPS,h,g.p1),g.pu.subVectors(g.p0,g.p1)):(g.p1=b(p+a.EPS,
h,g.p1),g.pu.subVectors(g.p1,g.p0));0<=h-a.EPS?(g.p1=b(p,h-a.EPS,g.p1),g.pv.subVectors(g.p0,g.p1)):(g.p1=b(p,h+a.EPS,g.p1),g.pv.subVectors(g.p1,g.p0));g.normal.crossVectors(g.pu,g.pv).normalize();g.normals.push(g.normal.x,g.normal.y,g.normal.z);g.uvs.push(p,h)}}for(f=0;f<e;f++)for(k=0;k<d;k++)b=f*l+k+1,h=(f+1)*l+k+1,p=(f+1)*l+k,g.indices.push(f*l+k,b,p),g.indices.push(b,h,p);g.setIndex(g.indices);g.addAttribute("position",new w(g.vertices,3));g.addAttribute("normal",new w(g.normals,3));g.addAttribute("uv",
new w(g.uvs,2));return g}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.func,this.parameters.slices,this.parameters.stacks)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.vertices=a.vertices;this.indices=a.indices;return this};a.EPS=1E-5;return a}(h.BufferGeometry),Uc=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="PolyhedronGeometry";b.parameters={vertices:a,indices:d,radius:e,detail:g};b.fromBufferGeometry(new ta(a,d,e,g));b.mergeVertices();
return b}r(a,c);return a}(h.Geometry),ta=function(c){function a(a,d,e,g){void 0===a&&(a=[]);void 0===d&&(d=[]);void 0===e&&(e=1);void 0===g&&(g=0);var b=c.call(this)||this;b.type="PolyhedronBufferGeometry";b.vertexBuffer=[];b.uvBuffer=[];b.parameters={vertices:a,indices:d,radius:e,detail:g};b.subdivide(g);b.appplyRadius(e);b.generateUVs();b.addAttribute("position",new w(b.vertexBuffer,3));b.addAttribute("normal",new w(b.vertexBuffer.slice(),3));b.addAttribute("uv",new w(b.uvBuffer,2));0===g?b.computeVertexNormals():
b.normalizeNormals();return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.vertices,this.parameters.indices)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.vertexBuffer=a.vertexBuffer;return this};a.prototype.subdivide=function(a){for(var b=new q,c=new q,g=new q,f=0;f<this.parameters.indices.length;f+=3)this.getVertexByIndex(this.parameters.indices[f+0],b),this.getVertexByIndex(this.parameters.indices[f+1],c),this.getVertexByIndex(this.parameters.indices[f+
2],g),this.subdivideFace(b,c,g,a)};a.prototype.subdivideFace=function(a,c,e,g){g=Math.pow(2,g);var b=[],d,l;for(d=0;d<=g;d++){b[d]=[];var h=a.clone().lerp(e,d/g),p=c.clone().lerp(e,d/g),m=g-d;for(l=0;l<=m;l++)b[d][l]=0===l&&d===g?h:h.clone().lerp(p,l/m)}for(d=0;d<g;d++)for(l=0;l<2*(g-d)-1;l++)a=Math.floor(l/2),0===l%2?(this.pushVertex(b[d][a+1]),this.pushVertex(b[d+1][a]),this.pushVertex(b[d][a])):(this.pushVertex(b[d][a+1]),this.pushVertex(b[d+1][a+1]),this.pushVertex(b[d+1][a]))};a.prototype.appplyRadius=
function(a){for(var b=new q,c=0;c<this.vertexBuffer.length;c+=3)b.x=this.vertexBuffer[c+0],b.y=this.vertexBuffer[c+1],b.z=this.vertexBuffer[c+2],b.normalize().multiplyScalar(a),this.vertexBuffer[c+0]=b.x,this.vertexBuffer[c+1]=b.y,this.vertexBuffer[c+2]=b.z};a.prototype.generateUVs=function(){for(var a=new q,c=0;c<this.vertexBuffer.length;c+=3){a.x=this.vertexBuffer[c+0];a.y=this.vertexBuffer[c+1];a.z=this.vertexBuffer[c+2];var e=this.azimuth(a)/2/Math.PI+.5,g=this.inclination(a)/Math.PI+.5;this.uvBuffer.push(e,
1-g)}this.correctUVs();this.correctSeam()};a.prototype.correctSeam=function(){for(var a=0;a<this.uvBuffer.length;a+=6){var c=this.uvBuffer[a+0],e=this.uvBuffer[a+2],g=this.uvBuffer[a+4],f=Math.min(c,e,g);.9<Math.max(c,e,g)&&.1>f&&(.2>c&&(this.uvBuffer[a+0]+=1),.2>e&&(this.uvBuffer[a+2]+=1),.2>g&&(this.uvBuffer[a+4]+=1))}};a.prototype.pushVertex=function(a){this.vertexBuffer.push(a.x,a.y,a.z)};a.prototype.getVertexByIndex=function(a,c){a*=3;c.x=this.parameters.vertices[a+0];c.y=this.parameters.vertices[a+
1];c.z=this.parameters.vertices[a+2]};a.prototype.correctUVs=function(){for(var a=new q,c=new q,e=new q,g=new q,f=new y,k=new y,l=new y,h=0,p=0;h<this.vertexBuffer.length;h+=9,p+=6){a.set(this.vertexBuffer[h+0],this.vertexBuffer[h+1],this.vertexBuffer[h+2]);c.set(this.vertexBuffer[h+3],this.vertexBuffer[h+4],this.vertexBuffer[h+5]);e.set(this.vertexBuffer[h+6],this.vertexBuffer[h+7],this.vertexBuffer[h+8]);f.set(this.uvBuffer[p+0],this.uvBuffer[p+1]);k.set(this.uvBuffer[p+2],this.uvBuffer[p+3]);l.set(this.uvBuffer[p+
4],this.uvBuffer[p+5]);g.copy(a).add(c).add(e).divideScalar(3);var m=this.azimuth(g);this.correctUV(f,p+0,a,m);this.correctUV(k,p+2,c,m);this.correctUV(l,p+4,e,m)}};a.prototype.correctUV=function(a,c,e,g){0>g&&1===a.x&&(this.uvBuffer[c]=a.x-1);0===e.x&&0===e.z&&(this.uvBuffer[c]=g/2/Math.PI+.5)};a.prototype.azimuth=function(a){return Math.atan2(a.z,-a.x)};a.prototype.inclination=function(a){return Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))};return a}(h.BufferGeometry),Vc=function(c){function a(a,
d){var b=c.call(this)||this;b.type="TetrahedronGeometry";b.parameters={radius:a,detail:d};b.fromBufferGeometry(new vb(a,d));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),vb=function(c){function a(b,d){var e=c.call(this,a.vertices,a.indices,b,d)||this;e.type="TetrahedronBufferGeometry";e.parameters={radius:b,detail:d};return e}r(a,c);a.vertices=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];a.indices=[2,1,0,0,3,2,1,3,0,2,3,1];return a}(ta),Wc=function(c){function a(a,d){var b=c.call(this)||this;b.type=
"OctahedronGeometry";b.parameters={radius:a,detail:d};b.fromBufferGeometry(new Qa(a,d));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Qa=function(c){function a(b,d){var e=c.call(this,a.vertices,a.indices,b,d)||this;e.type="OctahedronBufferGeometry";e.parameters={radius:b,detail:d};return e}r(a,c);a.vertices=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];a.indices=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return a}(ta),Xc=function(c){function a(a,d){var b=c.call(this)||this;b.type="IcosahedronGeometry";
b.parameters={radius:a,detail:d};b.fromBufferGeometry(new wb(a,d));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),wb=function(c){function a(b,d){var e=c.call(this,a.vertices,a.indices,b,d)||this;e.type="IcosahedronBufferGeometry";e.parameters={radius:b,detail:d};return e}r(a,c);a.t=(1+Math.sqrt(5))/2;a.vertices=[-1,a.t,0,1,a.t,0,-1,-a.t,0,1,-a.t,0,0,-1,a.t,0,1,a.t,0,-1,-a.t,0,1,-a.t,a.t,0,-1,a.t,0,1,-a.t,0,-1,-a.t,0,1];a.indices=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,
7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return a}(ta),Yc=function(c){function a(a,d){var b=c.call(this)||this;b.type="DodecahedronGeometry";b.parameters={radius:a,detail:d};b.fromBufferGeometry(new xb(a,d));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),xb=function(c){function a(b,d){var e=c.call(this,a.vertices,a.indices,b,d)||this;e.type="DodecahedronBufferGeometry";e.parameters={radius:b,detail:d};return e}r(a,c);a.t=(1+Math.sqrt(5))/2;a.r=1/a.t;a.vertices=
[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a.r,-a.t,0,-a.r,a.t,0,a.r,-a.t,0,a.r,a.t,-a.r,-a.t,0,-a.r,a.t,0,a.r,-a.t,0,a.r,a.t,0,-a.t,0,-a.r,a.t,0,-a.r,-a.t,0,a.r,a.t,0,a.r];a.indices=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return a}(ta),Zc=function(c){function a(a,
d,e,g,f,k){var b=c.call(this)||this;b.type="TubeGeometry";b.parameters={path:a,tubularSegments:d,radius:e,radialSegments:g,closed:f};void 0!==k&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new yb(a,d,e,g,f);b.tangents=a.tangents;b.normals=a.normals;b.binormals=a.binormals;b.fromBufferGeometry(a);b.mergeVertices();return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.path,this.parameters.tubularSegments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed)).copy(this)};
a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.tangents=a.tangents;return this};return a}(h.Geometry),yb=function(c){function a(a,d,e,g,f){var b=c.call(this)||this;b.type="TubeBufferGeometry";b.vertices=[];b.normals=[];b.uvs=[];b.indices=[];b.parameters={path:a,tubularSegments:d,radius:e,radialSegments:g,closed:f};b.closed=f||!1;b.frames=a.computeFrenetFrames(d||64,b.closed);b.tangents=b.frames.tangents;b.normals=b.frames.normals;b.binormals=b.frames.binormals;b.generateBufferData();
b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.path,this.parameters.tubularSegments,this.parameters.radius,this.parameters.radialSegments,this.parameters.closed)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.tangents=a.tangents;return this};a.prototype.generateBufferData=function(){for(var a=0;a<
this.parameters.tubularSegments;a++)this.generateSegment(a);this.generateSegment(!1===this.closed?this.parameters.tubularSegments:0);this.generateUVs();this.generateIndices()};a.prototype.generateSegment=function(a){var b=new q,c=new q,g=new q;g=this.parameters.path.getPointAt(a/this.parameters.tubularSegments,g);var f=this.frames.normals[a];a=this.frames.binormals[a];for(var k=0;k<=this.parameters.radialSegments;k++){var l=k/this.parameters.radialSegments*Math.PI*2,h=Math.sin(l);l=-Math.cos(l);c.x=
l*f.x+h*a.x;c.y=l*f.y+h*a.y;c.z=l*f.z+h*a.z;c.normalize();this.normals.push(c.x,c.y,c.z);b.x=g.x+this.parameters.radius*c.x;b.y=g.y+this.parameters.radius*c.y;b.z=g.z+this.parameters.radius*c.z;this.vertices.push(b.x,b.y,b.z)}};a.prototype.generateIndices=function(){for(var a=1;a<=this.parameters.tubularSegments;a++)for(var c=1;c<=this.parameters.radialSegments;c++){var e=(this.parameters.radialSegments+1)*a+(c-1),g=(this.parameters.radialSegments+1)*a+c,f=(this.parameters.radialSegments+1)*(a-1)+
c;this.indices.push((this.parameters.radialSegments+1)*(a-1)+(c-1),e,f);this.indices.push(e,g,f)}};a.prototype.generateUVs=function(){for(var a=new y,c=0;c<=this.parameters.tubularSegments;c++)for(var e=0;e<=this.parameters.radialSegments;e++)a.x=c/this.parameters.tubularSegments,a.y=e/this.parameters.radialSegments,this.uvs.push(a.x,a.y)};return a}(h.BufferGeometry),$c=function(c){function a(a,d,e,g,f,k,l){var b=c.call(this)||this;b.type="TorusKnotGeometry";b.parameters={radius:a,tube:d,tubularSegments:e,
radialSegments:g,p:f,q:k};void 0!==l&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");b.fromBufferGeometry(new zb(a,d,e,g,f,k));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),zb=function(c){function a(a,d,e,g,f,k){var b=c.call(this)||this;b.type="TorusKnotBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.parameters={radius:a,tube:d,tubularSegments:e,radialSegments:g,p:f,q:k};a=a||1;d=d||.4;e=Math.floor(e)||64;g=Math.floor(g)||
8;f=f||2;k=k||3;var h,p=new q,m=new q,t=new q,v=new q,u=new q,r=new q,y=new q;for(h=0;h<=e;++h){var B=h/e*f*Math.PI*2;b.calculatePositionOnCurve(B,f,k,a,t);b.calculatePositionOnCurve(B+.01,f,k,a,v);r.subVectors(v,t);y.addVectors(v,t);u.crossVectors(r,y);y.crossVectors(u,r);u.normalize();y.normalize();for(B=0;B<=g;++B){var z=B/g*Math.PI*2,x=-d*Math.cos(z);z=d*Math.sin(z);p.x=t.x+(x*y.x+z*u.x);p.y=t.y+(x*y.y+z*u.y);p.z=t.z+(x*y.z+z*u.z);b.vertices.push(p.x,p.y,p.z);m.subVectors(p,t).normalize();b.normals.push(m.x,
m.y,m.z);b.uvs.push(h/e);b.uvs.push(B/g)}}for(B=1;B<=e;B++)for(h=1;h<=g;h++)a=(g+1)*B+(h-1),d=(g+1)*B+h,f=(g+1)*(B-1)+h,b.indices.push((g+1)*(B-1)+(h-1),a,f),b.indices.push(a,d,f);b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.radius,this.parameters.tube,this.parameters.tubularSegments,this.parameters.radialSegments,this.parameters.p,
this.parameters.q)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.indices=a.indices;this.vertices=a.vertices;return this};a.prototype.calculatePositionOnCurve=function(a,c,e,g,f){var b=Math.sin(a);c=e/c*a;e=Math.cos(c);f.x=g*(2+e)*.5*Math.cos(a);f.y=g*(2+e)*b*.5;f.z=g*Math.sin(c)*.5};return a}(h.BufferGeometry),ad=function(c){function a(a,d,e,g,f){var b=c.call(this)||this;b.type="TorusGeometry";b.parameters={radius:a,tube:d,radialSegments:e,tubularSegments:g,arc:f};b.fromBufferGeometry(new Ab(a,
d,e,g,f));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Ab=function(c){function a(a,d,e,g,f){var b=c.call(this)||this;b.type="TorusBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.parameters={radius:a,tube:d,radialSegments:e,tubularSegments:g,arc:f};a=a||1;d=d||.4;e=Math.floor(e)||8;g=Math.floor(g)||6;f=f||2*Math.PI;var l=new q,h=new q,p=new q,m,t;for(m=0;m<=e;m++)for(t=0;t<=g;t++){var v=t/g*f,u=m/e*Math.PI*2;h.x=(a+d*Math.cos(u))*Math.cos(v);h.y=(a+d*Math.cos(u))*Math.sin(v);
h.z=d*Math.sin(u);b.vertices.push(h.x,h.y,h.z);l.x=a*Math.cos(v);l.y=a*Math.sin(v);p.subVectors(h,l).normalize();b.normals.push(p.x,p.y,p.z);b.uvs.push(t/g);b.uvs.push(m/e)}for(m=1;m<=e;m++)for(t=1;t<=g;t++)a=(g+1)*(m-1)+t-1,d=(g+1)*(m-1)+t,f=(g+1)*m+t,b.indices.push((g+1)*m+t-1,a,f),b.indices.push(a,d,f);b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.radius,
this.parameters.tube,this.parameters.radialSegments,this.parameters.tubularSegments,this.parameters.arc)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.BufferGeometry),af=function(){function c(){}c.triangulate=function(a,b,c){void 0===c&&(c=2);var d=b&&b.length,g=d?b[0]*c:a.length,f=nc(a,0,g,c,!0),k=[];if(!f)return k;var l;if(d){var h=c;d=[];var p;var m=0;for(p=b.length;m<p;m++){var t=b[m]*h;var v=m<p-1?b[m+1]*h:a.length;t=nc(a,t,v,h,!1);t===t.next&&
(t.steiner=!0);d.push(ze(t))}d.sort(xe);for(m=0;m<d.length;m++){b=d[m];h=f;if(h=ye(b,h))b=qc(h,b),za(b,b.next);f=za(f,f.next)}}if(a.length>80*c){var u=l=a[0];var q=d=a[1];for(h=c;h<g;h+=c)m=a[h],b=a[h+1],m<u&&(u=m),b<q&&(q=b),m>l&&(l=m),b>d&&(d=b);l=Math.max(l-u,d-q);l=0!==l?1/l:0}Aa(f,k,c,u,q,l);return k};return c}(),cb=function(c){function a(a,d,e){var b=c.call(this)||this;b.prev=null;b.next=null;b.z=null;b.prevZ=null;b.nextZ=null;b.steiner=!1;b.i=a;b.x=d;b.y=e;return b}r(a,c);return a}(y),qa=function(){function c(){}
c.area=function(a){for(var b=a.length,c=0,e=b-1,g=0;g<b;e=g++)c+=a[e].x*a[g].y-a[g].x*a[e].y;return.5*c};c.isClockWise=function(a){return 0>c.area(a)};c.triangulateShape=function(a,b){var c=[],e=[],g=[];rc(a);sc(c,a);var f=a.length;b.forEach(rc);for(a=0;a<b.length;a++)e.push(f),f+=b[a].length,sc(c,b[a]);b=af.triangulate(c,e);for(a=0;a<b.length;a+=3)g.push(b.slice(a,a+3));return g};return c}(),Sa=function(c){function a(a,d){var b=c.call(this)||this;b.type="ExtrudeGeometry";b.parameters={shapes:a,options:d};
b.fromBufferGeometry(new Ra(a,d));b.mergeVertices();return b}r(a,c);a.WorldUVGenerator={generateTopUV:function(a,c,e,g,f){a=c[3*g];g=c[3*g+1];var b=c[3*f];f=c[3*f+1];return[new y(c[3*e],c[3*e+1]),new y(a,g),new y(b,f)]},generateSideWallUV:function(a,c,e,g,f,k){a=c[3*e];var b=c[3*e+1];e=c[3*e+2];var d=c[3*g],h=c[3*g+1];g=c[3*g+2];var m=c[3*f],t=c[3*f+1];f=c[3*f+2];var v=c[3*k],u=c[3*k+1];c=c[3*k+2];return.01>Math.abs(b-h)?[new y(a,1-e),new y(d,1-g),new y(m,1-f),new y(v,1-c)]:[new y(b,1-e),new y(h,
1-g),new y(t,1-f),new y(u,1-c)]}};return a}(h.Geometry),Ra=function(c){function a(a,d){var b=c.call(this)||this;b.type="ExtrudeBufferGeometry";if("undefined"===typeof a)return b;b.shapes=Array.isArray(a)?a:[a];b.addShapeList(b.shapes,d);b.computeVertexNormals();return b}r(a,c);a.prototype.getArrays=function(){var a=this.getAttribute("position");a=a?Array.prototype.slice.call(a.array):[];var c=this.getAttribute("uv");c=c?Array.prototype.slice.call(c.array):[];var e=this.index;e=e?Array.prototype.slice.call(e.array):
[];return{position:a,uv:c,index:e}};a.prototype.addShapeList=function(a,c){var b=a.length;c.arrays=this.getArrays();for(var d=0;d<b;d++)this.addShape(a[d],c);this.setIndex(c.arrays.index);this.addAttribute("position",new w(c.arrays.position,3));this.addAttribute("uv",new w(c.arrays.uv,2))};a.prototype.addShape=function(a,c){function b(a,b,c){b||console.error("THREE.ExtrudeGeometry: vec does not exist");return b.clone().multiplyScalar(c).add(a)}function d(a,b,c){var d=a.x-b.x;var e=a.y-b.y;var g=c.x-
a.x;var f=c.y-a.y,k=d*d+e*e;if(Math.abs(d*f-e*g)>Number.EPSILON){var h=Math.sqrt(k),l=Math.sqrt(g*g+f*f);k=b.x-e/h;b=b.y+d/h;f=((c.x-f/l-k)*f-(c.y+g/l-b)*g)/(d*f-e*g);g=k+d*f-a.x;d=b+e*f-a.y;e=g*g+d*d;if(2>=e)return new y(g,d);e=Math.sqrt(e/2)}else a=!1,d>Number.EPSILON?g>Number.EPSILON&&(a=!0):d<-Number.EPSILON?g<-Number.EPSILON&&(a=!0):Math.sign(e)===Math.sign(f)&&(a=!0),a?(g=-e,e=Math.sqrt(k)):(g=d,d=e,e=Math.sqrt(k/2));return new y(g/e,d/e)}function f(a,b){for(var c,d,e=a.length;0<=--e;){c=e;
d=e-1;0>d&&(d=a.length-1);var g,f=E+2*z;for(g=0;g<f;g++){var k=Q*g,h=Q*(g+1),l=b+d+k,m=b+d+h;h=b+c+h;n(b+c+k);n(l);n(h);n(l);n(m);n(h);k=t.length/3;k=G.generateSideWallUV(R,t,k-6,k-3,k-2,k-1);p(k[0]);p(k[1]);p(k[3]);p(k[1]);p(k[2]);p(k[3])}}}function k(a,b,c){r.push(a);r.push(b);r.push(c)}function h(a,b,c){n(a);n(b);n(c);a=t.length/3;a=G.generateTopUV(R,t,a-3,a-2,a-1);p(a[0]);p(a[1]);p(a[2])}function n(a){v.push(t.length/3);t.push(r[3*a]);t.push(r[3*a+1]);t.push(r[3*a+2])}function p(a){u.push(a.x);
u.push(a.y)}var m=c.arrays?c.arrays:this.getArrays(),t=m.position,v=m.index,u=m.uv,r=[];m=void 0!==c.amount?c.amount:100;var ea=void 0!==c.bevelThickness?c.bevelThickness:6,B=void 0!==c.bevelSize?c.bevelSize:ea-2,z=void 0!==c.bevelSegments?c.bevelSegments:3,x=void 0!==c.bevelEnabled?c.bevelEnabled:!0,C=void 0!==c.curveSegments?c.curveSegments:12,E=void 0!==c.steps?c.steps:1,D=c.extrudePath,F=!1,G=void 0!==c.UVGenerator?c.UVGenerator:Sa.WorldUVGenerator;if(D){var H=D.getSpacedPoints(E);F=!0;x=!1;var J=
void 0!==c.frames?c.frames:D.computeFrenetFrames(E,!1);var L=new q;var N=new q;var M=new q}x||(B=ea=z=0);var S,R=this;C=a.extractPoints(C);a=C.shape;var P=C.holes;if(!qa.isClockWise(a)){a=a.reverse();var K=0;for(S=P.length;K<S;K++){var X=P[K];qa.isClockWise(X)&&(P[K]=X.reverse())}}var V=qa.triangulateShape(a,P),O=a;K=0;for(S=P.length;K<S;K++)X=P[K],a=a.concat(X);var U,Q=a.length,da,Z=V.length;C=[];var I=0;var T=O.length;var ca=T-1;for(U=I+1;I<T;I++,ca++,U++)ca===T&&(ca=0),U===T&&(U=0),C[I]=d(O[I],
O[ca],O[U]);D=[];var ba=C.concat();K=0;for(S=P.length;K<S;K++){X=P[K];var Y=[];I=0;T=X.length;ca=T-1;for(U=I+1;I<T;I++,ca++,U++)ca===T&&(ca=0),U===T&&(U=0),Y[I]=d(X[I],X[ca],X[U]);D.push(Y);ba=ba.concat(Y)}for(ca=0;ca<z;ca++){I=ca/z;var aa=ea*Math.cos(I*Math.PI/2);U=B*Math.sin(I*Math.PI/2);I=0;for(T=O.length;I<T;I++){var W=b(O[I],C[I],U);k(W.x,W.y,-aa)}K=0;for(S=P.length;K<S;K++)for(X=P[K],Y=D[K],I=0,T=X.length;I<T;I++)W=b(X[I],Y[I],U),k(W.x,W.y,-aa)}U=B;for(I=0;I<Q;I++)W=x?b(a[I],ba[I],U):a[I],F?
(N.copy(J.normals[0]).multiplyScalar(W.x),L.copy(J.binormals[0]).multiplyScalar(W.y),M.copy(H[0]).add(N).add(L),k(M.x,M.y,M.z)):k(W.x,W.y,0);for(T=1;T<=E;T++)for(I=0;I<Q;I++)W=x?b(a[I],ba[I],U):a[I],F?(N.copy(J.normals[T]).multiplyScalar(W.x),L.copy(J.binormals[T]).multiplyScalar(W.y),M.copy(H[T]).add(N).add(L),k(M.x,M.y,M.z)):k(W.x,W.y,m/E*T);for(ca=z-1;0<=ca;ca--){I=ca/z;aa=ea*Math.cos(I*Math.PI/2);U=B*Math.sin(I*Math.PI/2);I=0;for(T=O.length;I<T;I++)W=b(O[I],C[I],U),k(W.x,W.y,m+aa);K=0;for(S=P.length;K<
S;K++)for(X=P[K],Y=D[K],I=0,T=X.length;I<T;I++)W=b(X[I],Y[I],U),F?k(W.x,W.y+H[E-1].y,H[E-1].x+aa):k(W.x,W.y,m+aa)}(function(){var a=t.length/3;if(x){for(var b=0*Q,d=0;d<Z;d++)da=V[d],h(da[2]+b,da[1]+b,da[0]+b);b=Q*(E+2*z);for(d=0;d<Z;d++)da=V[d],h(da[0]+b,da[1]+b,da[2]+b)}else{for(d=0;d<Z;d++)da=V[d],h(da[2],da[1],da[0]);for(d=0;d<Z;d++)da=V[d],h(da[0]+Q*E,da[1]+Q*E,da[2]+Q*E)}R.addGroup(a,t.length/3-a,void 0!==c.material?c.material:0)})();(function(){var a=t.length/3,b=0;f(O,b);b+=O.length;K=0;for(S=
P.length;K<S;K++)X=P[K],f(X,b),b+=X.length;R.addGroup(a,t.length/3-a,void 0!==c.extrudeMaterial?c.extrudeMaterial:1)})();c.arrays||(this.setIndex(v),this.addAttribute("position",new w(t,3)),this.addAttribute("uv",new w(u,2)))};return a}(h.BufferGeometry),bd=function(c){function a(a,d){var b=c.call(this)||this;b.type="TextGeometry";b.parameters={text:a,parameters:d};b.fromBufferGeometry(new Bb(a,d));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Bb=function(c){function a(a,d){a=c.call(this,
d.font.generateShapes(a,d.size,d.curveSegments),d||{})||this;a.type="TextBufferGeometry";var b=d.font;if(!b||!b.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),null;d.amount=void 0!==d.height?d.height:50;void 0===d.bevelThickness&&(d.bevelThickness=10);void 0===d.bevelSize&&(d.bevelSize=8);void 0===d.bevelEnabled&&(d.bevelEnabled=!1);return a}r(a,c);return a}(Ra),cd=function(c){function a(a,d,e,g,f,k,h){var b=c.call(this)||this;b.type="SphereGeometry";
b.parameters={radius:a,widthSegments:d,heightSegments:e,phiStart:g,phiLength:f,thetaStart:k,thetaLength:h};b.fromBufferGeometry(new Ta(a,d,e,g,f,k,h));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Ta=function(c){function a(a,d,e,g,f,k,h){void 0===a&&(a=1);void 0===d&&(d=8);void 0===e&&(e=6);void 0===g&&(g=0);void 0===f&&(f=2*Math.PI);void 0===k&&(k=0);void 0===h&&(h=Math.PI);var b=c.call(this)||this;b.type="SphereBufferGeometry";b.parameters={radius:a,widthSegments:d,heightSegments:e,phiStart:g,
phiLength:f,thetaStart:k,thetaLength:h};d=Math.max(3,Math.floor(d));e=Math.max(2,Math.floor(e));var l=k+h,m,t,v=0,u=[],r=new q,y=new q,B=[],z=[],x=[],C=[];for(t=0;t<=e;t++){var E=[],D=t/e;for(m=0;m<=d;m++){var F=m/d;r.x=-a*Math.cos(g+F*f)*Math.sin(k+D*h);r.y=a*Math.cos(k+D*h);r.z=a*Math.sin(g+F*f)*Math.sin(k+D*h);z.push(r.x,r.y,r.z);y.set(r.x,r.y,r.z).normalize();x.push(y.x,y.y,y.z);C.push(F,1-D);E.push(v++)}u.push(E)}for(t=0;t<e;t++)for(m=0;m<d;m++)a=u[t][m+1],g=u[t][m],f=u[t+1][m],h=u[t+1][m+1],
(0!==t||0<k)&&B.push(a,g,h),(t!==e-1||l<Math.PI)&&B.push(g,f,h);b.setIndex(B);b.addAttribute("position",new w(z,3));b.addAttribute("normal",new w(x,3));b.addAttribute("uv",new w(C,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.radius,this.parameters.widthSegments,this.parameters.heightSegments,this.parameters.phiStart,this.parameters.phiLength,this.parameters.thetaStart,this.parameters.thetaLength)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,
a);return this};return a}(h.BufferGeometry),dd=function(c){function a(a,d,e,g,f,k){var b=c.call(this)||this;b.type="RingGeometry";b.parameters={innerRadius:a,outerRadius:d,thetaSegments:e,phiSegments:g,thetaStart:f,thetaLength:k};b.fromBufferGeometry(new Cb(a,d,e,g,f,k));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Cb=function(c){function a(a,d,e,g,f,k){void 0===a&&(a=.5);void 0===d&&(d=1);void 0===e&&(e=8);void 0===g&&(g=1);void 0===f&&(f=0);void 0===k&&(k=2*Math.PI);var b=c.call(this)||
this;b.type="RingBufferGeometry";b.parameters={innerRadius:a,outerRadius:d,thetaSegments:e,phiSegments:g,thetaStart:f,thetaLength:k};e=Math.max(3,e);g=Math.max(1,g);var h=[],p=[],m=[],t=[],v=a,u=(d-a)/g,r=new q,ea=new y,B,z;for(B=0;B<=g;B++){for(z=0;z<=e;z++)a=f+z/e*k,r.x=v*Math.cos(a),r.y=v*Math.sin(a),p.push(r.x,r.y,r.z),m.push(0,0,1),ea.x=(r.x/d+1)/2,ea.y=(r.y/d+1)/2,t.push(ea.x,ea.y);v+=u}for(B=0;B<g;B++)for(d=B*(e+1),z=0;z<e;z++)a=z+d,f=a+e+1,k=a+e+2,v=a+1,h.push(a,f,v),h.push(f,k,v);b.setIndex(h);
b.addAttribute("position",new w(p,3));b.addAttribute("normal",new w(m,3));b.addAttribute("uv",new w(t,2));return b}r(a,c);return a}(h.BufferGeometry),ed=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="LatheGeometry";b.parameters={points:a,segments:d,phiStart:e,phiLength:g};b.fromBufferGeometry(new Db(a,d,e,g));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Db=function(c){function a(a,d,e,g){void 0===d&&(d=12);void 0===e&&(e=0);void 0===g&&(g=2*Math.PI);var b=c.call(this)||
this;b.type="LatheBufferGeometry";b.parameters={points:a,segments:d,phiStart:e,phiLength:g};d=Math.floor(d);g=E.clamp(g,0,2*Math.PI);var k=[],h=[],n=[],p=1/d,m=new q,t=new y,v;for(v=0;v<=d;v++){var u=e+v*p*g;var r=Math.sin(u),ea=Math.cos(u);for(u=0;u<=a.length-1;u++)m.x=a[u].x*r,m.y=a[u].y,m.z=a[u].x*ea,h.push(m.x,m.y,m.z),t.x=v/d,t.y=u/(a.length-1),n.push(t.x,t.y)}for(v=0;v<d;v++)for(u=0;u<a.length-1;u++)e=u+v*a.length,p=e+a.length,m=e+a.length+1,t=e+1,k.push(e,p,t),k.push(p,m,t);b.setIndex(k);b.addAttribute("position",
new w(h,3));b.addAttribute("uv",new w(n,2));b.computeVertexNormals();if(g===2*Math.PI)for(g=b.attributes.normal.array,k=new q,h=new q,n=new q,e=d*a.length*3,u=v=0;v<a.length;v++,u+=3)k.x=g[u+0],k.y=g[u+1],k.z=g[u+2],h.x=g[e+u+0],h.y=g[e+u+1],h.z=g[e+u+2],n.addVectors(k,h).normalize(),g[u+0]=g[e+u+0]=n.x,g[u+1]=g[e+u+1]=n.y,g[u+2]=g[e+u+2]=n.z;return b}r(a,c);return a}(h.BufferGeometry),Fb=function(c){function a(a,d){var b=c.call(this)||this;b.type="ShapeGeometry";"object"===typeof d&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),
d=d.curveSegments);b.parameters={shapes:a,curveSegments:d};b.fromBufferGeometry(new Eb(a,d));b.mergeVertices();return b}r(a,c);a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);return tc(this.parameters.shapes,a)};return a}(h.Geometry),Eb=function(c){function a(a,d){void 0===d&&(d=12);var b=c.call(this)||this;b.type="ShapeBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.groupStart=0;b.groupCount=0;b.parameters={shapes:a,curveSegments:d};b.curveSegments=d;if(!1===
Array.isArray(a))b.addShape(a);else for(d=0;d<a.length;d++)b.addShape(a[d]),b.addGroup(b.groupStart,b.groupCount,d),b.groupStart+=b.groupCount,b.groupCount=0;b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.shapes,this.parameters.curveSegments)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.vertices=
a.vertices;this.indices=a.indices;return this};a.prototype.addShape=function(a){var b,c=this.vertices.length/3;a=a.extractPoints(this.curveSegments);var g=a.shape,f=a.holes;if(!1===qa.isClockWise(g))for(g=g.reverse(),a=0,b=f.length;a<b;a++){var k=f[a];!0===qa.isClockWise(k)&&(f[a]=k.reverse())}var h=qa.triangulateShape(g,f);a=0;for(b=f.length;a<b;a++)k=f[a],g=g.concat(k);a=0;for(b=g.length;a<b;a++)k=g[a],this.vertices.push(k.x,k.y,0),this.normals.push(0,0,1),this.uvs.push(k.x,k.y);a=0;for(b=h.length;a<
b;a++)g=h[a],this.indices.push(g[0]+c,g[1]+c,g[2]+c),this.groupCount+=3};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);return tc(this.parameters.shapes,a)};return a}(h.BufferGeometry),Gb=function(c){function a(a,d){void 0===d&&(d=1);var b=c.call(this)||this;b.type="EdgesGeometry";b.vertices=[];b.parameters={thresholdAngle:d};d=Math.cos(E.DEG2RAD*d);var g=[0,0],f={},k=["a","b","c"];if(a.isBufferGeometry){var l=new h.Geometry;l.fromBufferGeometry(a)}else l=a.clone();l.mergeVertices();
l.computeFaceNormals();a=l.vertices;l=l.faces;for(var n=0,p=l.length;n<p;n++)for(var m=l[n],t=0;3>t;t++){var v=m[k[t]];var u=m[k[(t+1)%3]];g[0]=Math.min(v,u);g[1]=Math.max(v,u);v=g[0]+","+g[1];void 0===f[v]?f[v]={index1:g[0],index2:g[1],face1:n,face2:void 0}:f[v].face2=n}for(v in f)if(g=f[v],void 0===g.face2||l[g.face1].normal.dot(l[g.face2].normal)<=d)k=a[g.index1],b.vertices.push(k.x,k.y,k.z),k=a[g.index2],b.vertices.push(k.x,k.y,k.z);b.addAttribute("position",new w(b.vertices,3));return b}r(a,
c);return a}(h.BufferGeometry),Hb=function(c){function a(a,d,e,g,f,k,h,n){var b=c.call(this)||this;b.type="CylinderGeometry";b.parameters={radiusTop:a,radiusBottom:d,height:e,radialSegments:g,heightSegments:f,openEnded:k,thetaStart:h,thetaLength:n};b.fromBufferGeometry(new Ga(a,d,e,g,f,k,h,n));b.mergeVertices();return b}r(a,c);return a}(h.Geometry),Ga=function(c){function a(a,d,e,g,f,k,h,n){void 0===a&&(a=1);void 0===d&&(d=1);void 0===e&&(e=1);void 0===g&&(g=8);void 0===f&&(f=1);void 0===k&&(k=!1);
void 0===h&&(h=0);void 0===n&&(n=2*Math.PI);var b=c.call(this)||this;b.type="CylinderBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.indx=0;b.indexArray=[];b.groupStart=0;g=Math.floor(g);f=Math.floor(f);b.parameters={radiusTop:a,radiusBottom:d,height:e,radialSegments:g,heightSegments:f,openEnded:k,thetaStart:h,thetaLength:n};b.halfHeight=e/2;b.generateTorso();!1===k&&(0<a&&b.generateCap(!0),0<d&&b.generateCap(!1));b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,
3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.radiusTop,this.parameters.radiusBottom,this.parameters.height,this.parameters.radialSegments,this.parameters.heightSegments,this.parameters.openEnded,this.parameters.thetaStart,this.parameters.thetaLength)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.indices=a.indices;this.vertices=a.vertices;return this};a.prototype.generateTorso=
function(){var a,c,e=new q,g=new q,f=0,k=(this.parameters.radiusBottom-this.parameters.radiusTop)/this.parameters.height;for(c=0;c<=this.parameters.heightSegments;c++){var h=[],n=c/this.parameters.heightSegments,p=n*(this.parameters.radiusBottom-this.parameters.radiusTop)+this.parameters.radiusTop;for(a=0;a<=this.parameters.radialSegments;a++){var m=a/this.parameters.radialSegments,t=m*this.parameters.thetaLength+this.parameters.thetaStart,v=Math.sin(t);t=Math.cos(t);g.x=p*v;g.y=-n*this.parameters.height+
this.halfHeight;g.z=p*t;this.vertices.push(g.x,g.y,g.z);e.set(v,k,t).normalize();this.normals.push(e.x,e.y,e.z);this.uvs.push(m,1-n);h.push(this.indx++)}this.indexArray.push(h)}for(a=0;a<this.parameters.radialSegments;a++)for(c=0;c<this.parameters.heightSegments;c++)e=this.indexArray[c+1][a],g=this.indexArray[c+1][a+1],k=this.indexArray[c][a+1],this.indices.push(this.indexArray[c][a],e,k),this.indices.push(e,g,k),f+=6;this.addGroup(this.groupStart,f,0);this.groupStart+=f};a.prototype.generateCap=
function(a){var b,c=new y,g=new q,f=0,k=!0===a?this.parameters.radiusTop:this.parameters.radiusBottom,h=!0===a?1:-1;var n=this.index;for(b=1;b<=this.parameters.radialSegments;b++)this.vertices.push(0,this.halfHeight*h,0),this.normals.push(0,h,0),this.uvs.push(.5,.5),this.indx++;var p=this.index;for(b=0;b<=this.parameters.radialSegments;b++){var m=b/this.parameters.radialSegments*this.parameters.thetaLength+this.parameters.thetaStart,t=Math.cos(m);m=Math.sin(m);g.x=k*m;g.y=this.halfHeight*h;g.z=k*
t;this.vertices.push(g.x,g.y,g.z);this.normals.push(0,h,0);c.x=.5*t+.5;c.y=.5*m*h+.5;this.uvs.push(c.x,c.y);this.indx++}for(b=0;b<this.parameters.radialSegments;b++)c=n+b,g=p+b,!0===a?this.indices.push(g,g+1,c):this.indices.push(g+1,g,c),f+=3;this.addGroup(this.groupStart,f,!0===a?1:2);this.groupStart+=f};return a}(h.BufferGeometry),fd=function(c){function a(a,d,e,g,f,k,h){var b=c.call(this,0,a,d,e,g,f,k,h)||this;b.type="ConeGeometry";b.parameters={radius:a,height:d,radialSegments:e,heightSegments:g,
openEnded:f,thetaStart:k,thetaLength:h};return b}r(a,c);return a}(Hb),gd=function(c){function a(a,d,e,g,f,k,h){var b=c.call(this,0,a,d,e,g,f,k,h)||this;b.type="ConeBufferGeometry";b.parameters={radius:a,height:d,radialSegments:e,heightSegments:g,openEnded:f,thetaStart:k,thetaLength:h};return b}r(a,c);return a}(Ga),hd=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="CircleGeometry";b.parameters={radius:a,segments:d,thetaStart:e,thetaLength:g};b.fromBufferGeometry(new Ib(a,d,e,g));b.mergeVertices();
return b}r(a,c);return a}(h.Geometry),Ib=function(c){function a(a,d,e,g){void 0===a&&(a=1);void 0===d&&(d=8);void 0===e&&(e=0);void 0===g&&(g=2*Math.PI);var b=c.call(this)||this;b.type="CircleBufferGeometry";b.indices=[];b.vertices=[];b.normals=[];b.uvs=[];b.parameters={radius:a,segments:d,thetaStart:e,thetaLength:g};d=Math.max(3,d);var k,h=new q,n=new y;b.vertices.push(0,0,0);b.normals.push(0,0,1);b.uvs.push(.5,.5);var p=0;for(k=3;p<=d;p++,k+=3){var m=e+p/d*g;h.x=a*Math.cos(m);h.y=a*Math.sin(m);
b.vertices.push(h.x,h.y,h.z);b.normals.push(0,0,1);n.x=(b.vertices[k]/a+1)/2;n.y=(b.vertices[k+1]/a+1)/2;b.uvs.push(n.x,n.y)}for(k=1;k<=d;k++)b.indices.push(k,k+1,0);b.setIndex(b.indices);b.addAttribute("position",new w(b.vertices,3));b.addAttribute("normal",new w(b.normals,3));b.addAttribute("uv",new w(b.uvs,2));return b}r(a,c);a.prototype.clone=function(){return(new a(this.parameters.radius,this.parameters.segments,this.parameters.thetaStart,this.parameters.thetaLength)).copy(this)};a.prototype.copy=
function(a){c.prototype.copy.call(this,a);this.indices=a.indices;this.vertices=a.vertices;return this};return a}(h.BufferGeometry),ba=Object.freeze({WireframeGeometry:tb,ParametricGeometry:Tc,ParametricBufferGeometry:ub,TetrahedronGeometry:Vc,TetrahedronBufferGeometry:vb,OctahedronGeometry:Wc,OctahedronBufferGeometry:Qa,IcosahedronGeometry:Xc,IcosahedronBufferGeometry:wb,DodecahedronGeometry:Yc,DodecahedronBufferGeometry:xb,PolyhedronGeometry:Uc,PolyhedronBufferGeometry:ta,TubeGeometry:Zc,TubeBufferGeometry:yb,
TorusKnotGeometry:$c,TorusKnotBufferGeometry:zb,TorusGeometry:ad,TorusBufferGeometry:Ab,TextGeometry:bd,TextBufferGeometry:Bb,SphereGeometry:cd,SphereBufferGeometry:Ta,RingGeometry:dd,RingBufferGeometry:Cb,PlaneGeometry:Jc,PlaneBufferGeometry:Oa,LatheGeometry:ed,LatheBufferGeometry:Db,ShapeGeometry:Fb,ShapeBufferGeometry:Eb,ExtrudeGeometry:Sa,ExtrudeBufferGeometry:Ra,EdgesGeometry:Gb,ConeGeometry:fd,ConeBufferGeometry:gd,CylinderGeometry:Hb,CylinderBufferGeometry:Ga,CircleGeometry:hd,CircleBufferGeometry:Ib,
BoxGeometry:lb,BoxBufferGeometry:Na}),id=function(c){function a(a){var b=c.call(this)||this;b.type="ShadowMaterial";b.isShadowMaterial=!0;b.color=new h.Color(0);b.opacity=1;b.lights=!0;b.transparent=!0;b.setValues(a);return b}r(a,c);return a}(h.Material),jd=function(c){function a(a){a=c.call(this,a)||this;a.type="RawShaderMaterial";a.isRawShaderMaterial=!0;return a}r(a,c);return a}(h.ShaderMaterial),Jb=function(c){function a(a){var b=c.call(this)||this;b.isMeshStandardMaterial=!0;b.defines={STANDARD:""};
b.type="MeshStandardMaterial";b.color=new h.Color(16777215);b.roughness=.5;b.metalness=.5;b.map=null;b.lightMap=null;b.lightMapIntensity=1;b.aoMap=null;b.aoMapIntensity=1;b.emissive=new h.Color(0);b.emissiveIntensity=1;b.emissiveMap=null;b.bumpMap=null;b.bumpScale=1;b.normalMap=null;b.normalScale=new y(1,1);b.displacementMap=null;b.displacementScale=1;b.displacementBias=0;b.roughnessMap=null;b.metalnessMap=null;b.alphaMap=null;b.envMap=null;b.envMapIntensity=1;b.refractionRatio=.98;b.wireframe=!1;
b.wireframeLinewidth=1;b.wireframeLinecap="round";b.wireframeLinejoin="round";b.skinning=!1;b.morphTargets=!1;b.morphNormals=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.defines={STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=
a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;
this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};return a}(h.Material),kd=function(c){function a(a){var b=c.call(this,a)||this;b.isMeshPhysicalMaterial=!0;b.defines={PHYSICAL:""};b.type="MeshPhysicalMaterial";b.reflectivity=.5;b.clearCoat=0;b.clearCoatRoughness=0;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,
a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return this};return a}(Jb),Ua=function(c){function a(a){var b=c.call(this)||this;b.type="MeshPhongMaterial";b.isMeshPhongMaterial=!0;b.color=new h.Color(16777215);b.specular=new h.Color(1118481);b.shininess=30;b.map=null;b.lightMap=null;b.lightMapIntensity=1;b.aoMap=null;b.aoMapIntensity=1;b.emissive=new h.Color(0);b.emissiveIntensity=1;b.emissiveMap=null;b.bumpMap=
null;b.bumpScale=1;b.normalMap=null;b.normalScale=new y(1,1);b.displacementMap=null;b.displacementScale=1;b.displacementBias=0;b.specularMap=null;b.alphaMap=null;b.envMap=null;b.combine=0;b.reflectivity=1;b.refractionRatio=.98;b.wireframe=!1;b.wireframeLinewidth=1;b.wireframeLinecap="round";b.wireframeLinejoin="round";b.skinning=!1;b.morphTargets=!1;b.morphNormals=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.specular.copy(a.specular);
this.shininess=a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;
this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};return a}(h.Material),ld=function(c){function a(a){var b=c.call(this,
a)||this;b.isMeshToonMaterial=!0;b.defines={TOON:""};b.type="MeshToonMaterial";b.gradientMap=null;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return this};return a}(Ua),md=function(c){function a(a){var b=c.call(this)||this;b.type="MeshNormalMaterial";b.isMeshNormalMaterial=!0;b.bumpMap=null;b.bumpScale=1;b.normalMap=null;b.normalScale=new y(1,1);b.displacementMap=null;b.displacementScale=1;b.displacementBias=0;b.wireframe=
!1;b.wireframeLinewidth=1;b.fog=!1;b.lights=!1;b.skinning=!1;b.morphTargets=!1;b.morphNormals=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.skinning=
a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};return a}(h.Material),nd=function(c){function a(a){var b=c.call(this)||this;b.type="MeshLambertMaterial";b.isMeshLambertMaterial=!0;b.color=new h.Color(16777215);b.map=null;b.lightMap=null;b.lightMapIntensity=1;b.aoMap=null;b.aoMapIntensity=1;b.emissive=new h.Color(0);b.emissiveIntensity=1;b.emissiveMap=null;b.specularMap=null;b.alphaMap=null;b.envMap=null;b.combine=0;b.reflectivity=1;b.refractionRatio=.98;b.wireframe=
!1;b.wireframeLinewidth=1;b.wireframeLinecap="round";b.wireframeLinejoin="round";b.skinning=!1;b.morphTargets=!1;b.morphNormals=!1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=
a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return this};return a}(h.Material),od=function(c){function a(a){var b=c.call(this,a)||this;b.type="LineDashedMaterial";
b.isLineDashedMaterial=!0;b.scale=1;b.dashSize=3;b.gapSize=1;b.setValues(a);return b}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return this};return a}(L),bf=Object.freeze({ShadowMaterial:id,SpriteMaterial:pb,RawShaderMaterial:jd,get ShaderMaterial(){return h.ShaderMaterial},PointsMaterial:wa,MeshPhysicalMaterial:kd,MeshStandardMaterial:Jb,MeshPhongMaterial:Ua,MeshToonMaterial:ld,MeshNormalMaterial:md,MeshLambertMaterial:nd,
MeshDepthMaterial:hb,MeshDistanceMaterial:ib,MeshBasicMaterial:pa,LineDashedMaterial:od,LineBasicMaterial:L,get Material(){return h.Material}}),ua=function(){function c(){}c.add=function(a,b){!1!==this.enabled&&(this.files[a]=b)};c.get=function(a){if(!1!==c.enabled)return this.files[a]};c.remove=function(a){delete this.files[a]};c.clear=function(){this.files={}};c.enabled=!1;c.files={};return c}(),Kb=function(){function c(a,b,c){this.isLoading=!1;this.itemsTotal=this.itemsLoaded=0;this.urlModifier=
void 0;this.onStart=function(){};this.onLoad=function(){};this.onProgress=function(){};this.onError=function(){};this.onStart=void 0;this.onLoad=a;this.onProgress=b;this.onError=c}c.prototype.itemStart=function(a){this.itemsTotal++;if(!1===this.isLoading&&void 0!==this.onStart)this.onStart(a,this.itemsLoaded,this.itemsTotal);this.isLoading=!0};c.prototype.itemEnd=function(a){this.itemsLoaded++;if(void 0!==this.onProgress)this.onProgress(a,this.itemsLoaded,this.itemsTotal);if(this.itemsLoaded===this.itemsTotal&&
(this.isLoading=!1,void 0!==this.onLoad))this.onLoad()};c.prototype.itemError=function(a){if(void 0!==this.onError)this.onError(a)};c.prototype.resolveURL=function(a){return this.urlModifier?this.urlModifier(a):a};c.prototype.setURLModifier=function(a){this.urlModifier=a;return this};return c}(),V=new Kb,la={},ja=function(){function c(a){void 0===a&&(a=V);this.manager=a}c.prototype.load=function(a,b,c,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var d=this,
f=ua.get(a);if(void 0!==f)return d.manager.itemStart(a),setTimeout(function(){b&&b(f);d.manager.itemEnd(a)},0),f;if(void 0!==la[a])la[a].push({onLoad:b,onProgress:c,onError:e});else{var k=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(k){c=k[1];var h=!!k[2];k=k[3];k=decodeURIComponent(k);h&&(k=window.atob(k));try{var n=(this.responseType||"").toLowerCase();switch(n){case "arraybuffer":case "blob":var p=new Uint8Array(k.length);for(h=0;h<k.length;h++)p[h]=k.charCodeAt(h);var m="blob"===n?new Blob([p.buffer],
{type:c}):p.buffer;break;case "document":m=(new DOMParser).parseFromString(k,c);break;case "json":m=JSON.parse(k);break;default:m=k}window.setTimeout(function(){b&&b(m);d.manager.itemEnd(a)},0)}catch(v){window.setTimeout(function(){e&&e(v);d.manager.itemEnd(a);d.manager.itemError(a)},0)}}else{la[a]=[];la[a].push({onLoad:b,onProgress:c,onError:e});var t=new XMLHttpRequest;t.open("GET",a,!0);t.addEventListener("load",function(b){var c=this.response;ua.add(a,c);var e=la[a];delete la[a];if(200===this.status){for(var g=
0,f=e.length;g<f;g++){var k=e[g];if(k.onLoad)k.onLoad(c)}d.manager.itemEnd(a)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");g=0;for(f=e.length;g<f;g++)if(k=e[g],k.onLoad)k.onLoad(c);d.manager.itemEnd(a)}else{g=0;for(f=e.length;g<f;g++)if(k=e[g],k.onError)k.onError(b);d.manager.itemEnd(a);d.manager.itemError(a)}},!1);t.addEventListener("progress",function(b){for(var c=la[a],d=0,e=c.length;d<e;d++){var g=c[d];if(g.onProgress)g.onProgress(b)}},!1);t.addEventListener("error",
function(b){var c=la[a];delete la[a];for(var e=0,g=c.length;e<g;e++){var f=c[e];if(f.onError)f.onError(b)}d.manager.itemEnd(a);d.manager.itemError(a)},!1);void 0!==this.responseType&&(t.responseType=this.responseType);void 0!==this.withCredentials&&(t.withCredentials=this.withCredentials);t.overrideMimeType&&t.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(h in this.requestHeader)t.setRequestHeader(h,this.requestHeader[h]);t.send(null)}d.manager.itemStart(a);return t}};c.prototype.setPath=
function(a){this.path=a;return this};c.prototype.setResponseType=function(a){this.responseType=a;return this};c.prototype.setWithCredentials=function(a){this.withCredentials=a;return this};c.prototype.setMimeType=function(a){this.mimeType=a;return this};c.prototype.setRequestHeader=function(a){this.requestHeader=a;return this};return c}(),cf=function(){function c(a){void 0===a&&(a=V);this._parser=null;this.manager=a}c.prototype.load=function(a,b,c,e){function d(d){n.load(a[d],function(a){a=f._parser(a,
!0);k[d]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};p+=1;6===p&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,e)}var f=this,k=[],h=new Sc;h.image=k;var n=new ja(this.manager);n.setPath(this.path);n.setResponseType("arraybuffer");var p=0;if(Array.isArray(a))for(var m=p=0,t=a.length;m<t;++m)d(m);else n.load(a,function(a){a=f._parser(a,!0);if(a.isCubemap)for(var c=a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){k[d]={mipmaps:[]};for(var e=0;e<
a.mipmapCount;e++)k[d].mipmaps.push(a.mipmaps[d*a.mipmapCount+e]),k[d].format=a.format,k[d].width=a.width,k[d].height=a.height}else h.image.width=a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&(h.minFilter=1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,e);return h};c.prototype.setPath=function(a){this.path=a;return this};return c}(),pd=function(){function c(a){void 0===a&&(a=V);this.manager=a;this._parser=null}c.prototype.load=function(a,b,c,e){var d=this,f=new eb,k=new ja(this.manager);
k.setResponseType("arraybuffer");k.load(a,function(a){if(a=d._parser(a))void 0!==a.image?f.image=a.image:void 0!==a.data&&(f.image.width=a.width,f.image.height=a.height,f.image.data=a.data),f.wrapS=void 0!==a.wrapS?a.wrapS:1001,f.wrapT=void 0!==a.wrapT?a.wrapT:1001,f.magFilter=void 0!==a.magFilter?a.magFilter:1006,f.minFilter=void 0!==a.minFilter?a.minFilter:1008,f.anisotropy=void 0!==a.anisotropy?a.anisotropy:1,void 0!==a.format&&(f.format=a.format),void 0!==a.type&&(f.type=a.type),void 0!==a.mipmaps&&
(f.mipmaps=a.mipmaps),1===a.mipmapCount&&(f.minFilter=1006),f.needsUpdate=!0,b&&b(f,a)},c,e);return f};return c}(),Va=function(){function c(a){void 0===a&&(a=V);this.crossOrigin="Anonymous";this.manager=a}c.prototype.load=function(a,b,c,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);a=this.manager.resolveURL(a);var d=this,f=ua.get(a);if(void 0!==f)return d.manager.itemStart(a),setTimeout(function(){b&&b(f);d.manager.itemEnd(a)},0),f;c=document.createElementNS("http://www.w3.org/1999/xhtml",
"img");c.addEventListener("load",function(){ua.add(a,this);b&&b(this);d.manager.itemEnd(a)},!1);c.addEventListener("error",function(b){e&&e(b);d.manager.itemEnd(a);d.manager.itemError(a)},!1);"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(c.crossOrigin=this.crossOrigin);d.manager.itemStart(a);c.src=a;return c};c.prototype.setCrossOrigin=function(a){this.crossOrigin=a;return this};c.prototype.setPath=function(a){this.path=a;return this};return c}(),qd=function(){function c(a){void 0===a&&(a=
V);this.crossOrigin="Anonymous";this.manager=a}c.prototype.load=function(a,b,c,e){function d(c){k.load(a[c],function(a){f.images[c]=a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void 0,e)}var f=new fb,k=new Va(this.manager);k.setCrossOrigin(this.crossOrigin);k.setPath(this.path);var h=0;for(c=0;c<a.length;++c)d(c);return f};c.prototype.setCrossOrigin=function(a){this.crossOrigin=a;return this};c.prototype.setPath=function(a){this.path=a;return this};return c}(),Lb=function(){function c(a){void 0===a&&
(a=V);this.crossOrigin="Anonymous";this.manager=a}c.prototype.load=function(a,b,c,e){var d=new Y,f=new Va(this.manager);f.setCrossOrigin(this.crossOrigin);f.setPath(this.path);f.load(a,function(c){d.image=c;c=0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data:image\/jpeg/);d.format=c?1022:1023;d.needsUpdate=!0;void 0!==b&&b(d)},c,e);return d};c.prototype.setCrossOrigin=function(a){this.crossOrigin=a;return this};c.prototype.setPath=function(a){this.path=a;return this};return c}();h.Curve=function(){function c(){this.type=
"Curve";this.arcLengthDivisions=200}c.prototype.getPoint=function(a,b){console.warn("THREE.Curve: .getPoint() not implemented.");return null};c.prototype.getPointAt=function(a,b){a=this.getUtoTmapping(a);return this.getPoint(a,b)};c.prototype.getPoints=function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));return b};c.prototype.getSpacedPoints=function(a){void 0===a&&(a=5);for(var b=[],c=0;c<=a;c++)b.push(this.getPointAt(c/a));return b};c.prototype.getLength=function(){var a=
this.getLengths();return a[a.length-1]};c.prototype.getLengths=function(a){void 0===a&&(a=this.arcLengthDivisions);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var b=[],c=this.getPoint(0),e,g=0;b.push(0);for(e=1;e<=a;e++){var f=this.getPoint(e/a);g+=f.distanceTo(c);b.push(g);c=f}return this.cacheArcLengths=b};c.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.getLengths()};c.prototype.getUtoTmapping=function(a,
b){var c=this.getLengths(),e=c.length;b=b?b:a*c[e-1];for(var g=0,f=e-1,k;g<=f;)if(a=Math.floor(g+(f-g)/2),k=c[a]-b,0>k)g=a+1;else if(0<k)f=a-1;else{f=a;break}a=f;if(c[a]===b)return a/(e-1);g=c[a];return(a+(b-g)/(c[a+1]-g))/(e-1)};c.prototype.getTangent=function(a){var b=a-1E-4;a+=1E-4;0>b&&(b=0);1<a&&(a=1);b=this.getPoint(b);return this.getPoint(a).clone().sub(b).normalize()};c.prototype.getTangentAt=function(a){a=this.getUtoTmapping(a);return this.getTangent(a)};c.prototype.computeFrenetFrames=function(a,
b){var c=new q,e=[],g=[],f=[],k=new q,h=new F,n;for(n=0;n<=a;n++){var p=n/a;e[n]=this.getTangentAt(p);e[n].normalize()}g[0]=new q;f[0]=new q;n=Number.MAX_VALUE;p=Math.abs(e[0].x);var m=Math.abs(e[0].y),t=Math.abs(e[0].z);p<=n&&(n=p,c.set(1,0,0));m<=n&&(n=m,c.set(0,1,0));t<=n&&c.set(0,0,1);k.crossVectors(e[0],c).normalize();g[0].crossVectors(e[0],k);f[0].crossVectors(e[0],g[0]);for(n=1;n<=a;n++)g[n]=g[n-1].clone(),f[n]=f[n-1].clone(),k.crossVectors(e[n-1],e[n]),k.length()>Number.EPSILON&&(k.normalize(),
c=Math.acos(E.clamp(e[n-1].dot(e[n]),-1,1)),g[n].applyMatrix4(h.makeRotationAxis(k,c))),f[n].crossVectors(e[n],g[n]);if(!0===b)for(c=Math.acos(E.clamp(g[0].dot(g[a]),-1,1)),c/=a,0<e[0].dot(k.crossVectors(g[0],g[a]))&&(c=-c),n=1;n<=a;n++)g[n].applyMatrix4(h.makeRotationAxis(e[n],c*n)),f[n].crossVectors(e[n],g[n]);return{tangents:e,normals:g,binormals:f}};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this};c.prototype.toJSON=
function(){var a=new c.Data;a.metadata={version:4.5,type:"Curve",generator:"Curve.toJSON"};a.arcLengthDivisions=this.arcLengthDivisions;a.type=this.type;return a};c.prototype.fromJSON=function(a){this.arcLengthDivisions=a.arcLengthDivisions;return this};return c}();(function(c){var a=function(){return function(){}}();c.Data=a})(h.Curve||(h.Curve={}));h.EllipseCurve=function(c){function a(a,d,e,g,f,k,h,n){void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=1);void 0===g&&(g=1);void 0===f&&(f=0);void 0===
k&&(k=2*Math.PI);void 0===h&&(h=!1);void 0===n&&(n=0);var b=c.call(this)||this;b.type="EllipseCurve";b.isEllipseCurve=!0;b.aX=a;b.aY=d;b.xRadius=e;b.yRadius=g;b.aStartAngle=f;b.aEndAngle=k;b.aClockwise=h;b.aRotation=n;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new y;for(var b=2*Math.PI,d=this.aEndAngle-this.aStartAngle,f=Math.abs(d)<Number.EPSILON;0>d;)d+=b;for(;d>b;)d-=b;d<Number.EPSILON&&(d=f?0:b);!0!==this.aClockwise||f||(d=d===b?-b:d-b);b=this.aStartAngle+a*d;a=this.aX+this.xRadius*
Math.cos(b);var k=this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=a-this.aX,k-=this.aY,a=f*b-k*d+this.aX,k=f*d+k*b+this.aY);return c.set(a,k)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);
a.aX=this.aX;a.aY=this.aY;a.xRadius=this.xRadius;a.yRadius=this.yRadius;a.aStartAngle=this.aStartAngle;a.aEndAngle=this.aEndAngle;a.aClockwise=this.aClockwise;a.aRotation=this.aRotation;return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.aX=a.aX;this.aY=a.aY;this.xRadius=a.xRadius;this.yRadius=a.yRadius;this.aStartAngle=a.aStartAngle;this.aEndAngle=a.aEndAngle;this.aClockwise=a.aClockwise;this.aRotation=a.aRotation;return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.EllipseCurve||(h.EllipseCurve={}));var rd=function(c){function a(a,d,e,g,f,k){a=c.call(this,a,d,e,g,f,k)||this;a.type="ArcCurve";a.isArcCurve=!0;return a}r(a,c);return a}(h.EllipseCurve),Mb=function(){function c(){this.c3=this.c2=this.c1=this.c0=0}c.prototype.init=function(a,b,c,e){this.c0=a;this.c1=c;this.c2=-3*a+3*b-2*c-e;this.c3=2*a-2*b+c+e};c.prototype.initCatmullRom=function(a,b,c,e,g){this.init(b,c,g*(c-a),g*(e-b))};
c.prototype.initNonuniformCatmullRom=function(a,b,c,e,g,f,k){this.init(b,c,((b-a)/g-(c-a)/(g+f)+(c-b)/f)*f,((c-b)/f-(e-b)/(f+k)+(e-c)/k)*f)};c.prototype.calc=function(a){var b=a*a;return this.c0+this.c1*a+this.c2*b+this.c3*b*a};return c}(),Wa=new q,Nb=new Mb,Ob=new Mb,Pb=new Mb;h.CatmullRomCurve3=function(c){function a(a,d,e,g){void 0===a&&(a=[]);void 0===d&&(d=!1);void 0===e&&(e="centripital");void 0===g&&(g=.5);var b=c.call(this)||this;b.type="CatmullRomCurve3";b.isCatmullRomCurve3=!0;b.points=
a;b.closed=d;b.curveType=e;b.tension=g;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new q;var b=this.points,d=b.length;a*=d-(this.closed?0:1);var f=Math.floor(a);a-=f;this.closed?f+=0<f?0:(Math.floor(Math.abs(f)/b.length)+1)*b.length:0===a&&f===d-1&&(f=d-2,a=1);if(this.closed||0<f)var k=b[(f-1)%d];else Wa.subVectors(b[0],b[1]).add(b[0]),k=Wa;var h=b[f%d];var n=b[(f+1)%d];this.closed||f+2<d?b=b[(f+2)%d]:(Wa.subVectors(b[d-1],b[d-2]).add(b[d-1]),b=Wa);if("centripetal"===this.curveType||"chordal"===
this.curveType){var p="chordal"===this.curveType?.5:.25;d=Math.pow(k.distanceToSquared(h),p);f=Math.pow(h.distanceToSquared(n),p);p=Math.pow(n.distanceToSquared(b),p);1E-4>f&&(f=1);1E-4>d&&(d=f);1E-4>p&&(p=f);Nb.initNonuniformCatmullRom(k.x,h.x,n.x,b.x,d,f,p);Ob.initNonuniformCatmullRom(k.y,h.y,n.y,b.y,d,f,p);Pb.initNonuniformCatmullRom(k.z,h.z,n.z,b.z,d,f,p)}else"catmullrom"===this.curveType&&(Nb.initCatmullRom(k.x,h.x,n.x,b.x,this.tension),Ob.initCatmullRom(k.y,h.y,n.y,b.y,this.tension),Pb.initCatmullRom(k.z,
h.z,n.z,b.z,this.tension));c.set(Nb.calc(a),Ob.calc(a),Pb.calc(a));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.points=[];for(var b=0,e=a.points.length;b<e;b++)this.points.push(a.points[b].clone());this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.points=[];for(var d=0,e=this.points.length;d<e;d++)a.points.push(this.points[d].toArray());a.closed=this.closed;a.curveType=
this.curveType;a.tension=this.tension;return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,e=a.points.length;b<e;b++){var g=a.points[b];this.points.push((new q).fromArray(g))}this.closed=a.closed;this.curveType=a.curveType;this.tension=a.tension;return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.CatmullRomCurve3||(h.CatmullRomCurve3=
{}));h.CubicBezierCurve=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="CubicBezierCurve";b.isCubicBezierCurve=!0;b.v0=a||new y;b.v1=d||new y;b.v2=e||new y;b.v3=g||new y;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new y;var b=this.v0,d=this.v1,f=this.v2,k=this.v3;c.set(Da(a,b.x,d.x,f.x,k.x),Da(a,b.y,d.y,f.y,k.y));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);this.v3.copy(a.v3);return this};
a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.CubicBezierCurve||
(h.CubicBezierCurve={}));h.CubicBezierCurve3=function(c){function a(a,d,e,g){var b=c.call(this)||this;b.type="CubicBezierCurve3";b.isCubicBezierCurve3=!0;b.v0=a||new q;b.v1=d||new q;b.v2=e||new q;b.v3=g||new q;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new q;var b=this.v0,d=this.v1,f=this.v2,k=this.v3;c.set(Da(a,b.x,d.x,f.x,k.x),Da(a,b.y,d.y,f.y,k.y),Da(a,b.z,d.z,f.z,k.z));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);
this.v3.copy(a.v3);return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();a.v3=this.v3.toArray();return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);this.v3.fromArray(a.v3);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);
c.Data=a})(h.CubicBezierCurve3||(h.CubicBezierCurve3={}));h.LineCurve=function(c){function a(a,d){var b=c.call(this)||this;b.type="LineCurve";b.isLineCurve=!0;b.v1=a||new y;b.v2=d||new y;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new y;1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1));return c};a.prototype.getPointAt=function(a,c){return this.getPoint(a,c)};a.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()};a.prototype.copy=
function(a){c.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.LineCurve||
(h.LineCurve={}));h.LineCurve3=function(c){function a(a,d){var b=c.call(this)||this;b.type="LineCurve3";b.isLineCurve3=!0;b.v1=a||new q;b.v2=d||new q;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new q;1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1));return c};a.prototype.getPointAt=function(a,c){return this.getPoint(a,c)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};a.prototype.toJSON=
function(){var a=c.prototype.toJSON.call(this);a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.LineCurve3||(h.LineCurve3={}));h.QuadraticBezierCurve=function(c){function a(a,d,e){var b=c.call(this)||this;b.type=
"QuadraticBezierCurve";b.isQuadraticBezierCurve=!0;b.v0=a||new y;b.v1=d||new y;b.v2=e||new y;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new y;var b=this.v0,d=this.v1,f=this.v2;c.set(Ca(a,b.x,d.x,f.x),Ca(a,b.y,d.y,f.y));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();
return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.QuadraticBezierCurve||(h.QuadraticBezierCurve={}));h.QuadraticBezierCurve3=function(c){function a(a,d,e){var b=c.call(this)||this;b.type="QuadraticBezierCurve3";b.isQuadraticBezierCurve3=
!0;b.v0=a||new q;b.v1=d||new q;b.v2=e||new q;return b}r(a,c);a.prototype.getPoint=function(a,c){c=c||new q;var b=this.v0,d=this.v1,f=this.v2;c.set(Ca(a,b.x,d.x,f.x),Ca(a,b.y,d.y,f.y),Ca(a,b.z,d.z,f.z));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.v0.copy(a.v0);this.v1.copy(a.v1);this.v2.copy(a.v2);return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.v0=this.v0.toArray();a.v1=this.v1.toArray();a.v2=this.v2.toArray();return a};a.prototype.fromJSON=
function(a){c.prototype.fromJSON.call(this,a);this.v0.fromArray(a.v0);this.v1.fromArray(a.v1);this.v2.fromArray(a.v2);return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.QuadraticBezierCurve3||(h.QuadraticBezierCurve3={}));h.SplineCurve=function(c){function a(a){void 0===a&&(a=[]);var b=c.call(this)||this;b.type="SplineCurve";b.isSplineCurve=!0;b.points=a;return b}r(a,c);a.prototype.getPoint=
function(a,c){c=c||new y;var b=this.points,d=(b.length-1)*a;a=Math.floor(d);d-=a;var f=b[0===a?a:a-1],k=b[a],h=b[a>b.length-2?b.length-1:a+1];b=b[a>b.length-3?b.length-1:a+2];c.set(uc(d,f.x,k.x,h.x,b.x),uc(d,f.y,k.y,h.y,b.y));return c};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.points=[];for(var b=0,e=a.points.length;b<e;b++)this.points.push(a.points[b].clone());return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.points=[];for(var d=0,e=this.points.length;d<
e;d++)a.points.push(this.points[d].toArray());return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.points=[];for(var b=0,e=a.points.length;b<e;b++){var g=a.points[b];this.points.push((new y).fromArray(g))}return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.SplineCurve||(h.SplineCurve={}));var df=Object.freeze({ArcCurve:rd,get CatmullRomCurve3(){return h.CatmullRomCurve3},
get CubicBezierCurve(){return h.CubicBezierCurve},get CubicBezierCurve3(){return h.CubicBezierCurve3},get EllipseCurve(){return h.EllipseCurve},get LineCurve(){return h.LineCurve},get LineCurve3(){return h.LineCurve3},get QuadraticBezierCurve(){return h.QuadraticBezierCurve},get QuadraticBezierCurve3(){return h.QuadraticBezierCurve3},get SplineCurve(){return h.SplineCurve}});h.CurvePath=function(c){function a(){var a=c.call(this)||this;a.type="CurvePath";a.curves=[];a.autoClose=!1;return a}r(a,c);
a.prototype.add=function(a){this.curves.push(a)};a.prototype.closePath=function(){var a=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);a.equals(c)||this.curves.push(new h.LineCurve(c,a))};a.prototype.getPoint=function(a){var b=a*this.getLength(),c=this.getCurveLengths();for(a=0;a<c.length;){if(c[a]>=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null};a.prototype.getLength=function(){var a=this.getCurveLengths();return a[a.length-
1]};a.prototype.updateArcLengths=function(){this.needsUpdate=!0;this.cacheLengths=null;this.getCurveLengths()};a.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],c=0,e=0,g=this.curves.length;e<g;e++)c+=this.curves[e].getLength(),a.push(c);return this.cacheLengths=a};a.prototype.getSpacedPoints=function(a){void 0===a&&(a=40);for(var b=[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);
return b};a.prototype.getPoints=function(a){a=a||12;for(var b=[],c,g=0,f=this.curves;g<f.length;g++){var k=f[g];k=k.getPoints(k&&k.isEllipseCurve?2*a:k&&k.isLineCurve?1:k&&k.isSplineCurve?a*k.points.length:a);for(var h=0;h<k.length;h++){var n=k[h];c&&c.equals(n)||(b.push(n),c=n)}}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return b};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.curves=[];for(var b=0,e=a.curves.length;b<e;b++)this.curves.push(a.curves[b].clone());
this.autoClose=a.autoClose;return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.autoClose=this.autoClose;a.curves=[];for(var d=0,e=this.curves.length;d<e;d++)a.curves.push(this.curves[d].toJSON());return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.autoClose=a.autoClose;this.curves=[];for(var b=0,e=a.curves.length;b<e;b++){var g=a.curves[b];this.curves.push((new df[g.type]).fromJSON(g))}return this};return a}(h.Curve);(function(c){var a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Curve.Data);c.Data=a})(h.CurvePath||(h.CurvePath={}));h.Path=function(c){function a(a){var b=c.call(this)||this;b.type="Path";b.currentPoint=new y;a&&b.setFromPoints(a);return b}r(a,c);a.prototype.setFromPoints=function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineTo(a[b].x,a[b].y)};a.prototype.moveTo=function(a,c){this.currentPoint.set(a,c)};a.prototype.lineTo=function(a,c){var b=new h.LineCurve(this.currentPoint.clone(),
new y(a,c));this.curves.push(b);this.currentPoint.set(a,c)};a.prototype.quadraticCurveTo=function(a,c,e,g){a=new h.QuadraticBezierCurve(this.currentPoint.clone(),new y(a,c),new y(e,g));this.curves.push(a);this.currentPoint.set(e,g)};a.prototype.bezierCurveTo=function(a,c,e,g,f,k){a=new h.CubicBezierCurve(this.currentPoint.clone(),new y(a,c),new y(e,g),new y(f,k));this.curves.push(a);this.currentPoint.set(f,k)};a.prototype.splineThru=function(a){var b=[this.currentPoint.clone()].concat(a);b=new h.SplineCurve(b);
this.curves.push(b);this.currentPoint.copy(a[a.length-1])};a.prototype.arc=function(a,c,e,g,f,k){this.absarc(a+this.currentPoint.x,c+this.currentPoint.y,e,g,f,k)};a.prototype.absarc=function(a,c,e,g,f,k){this.absellipse(a,c,e,e,g,f,k)};a.prototype.ellipse=function(a,c,e,g,f,k,h,n){this.absellipse(a+this.currentPoint.x,c+this.currentPoint.y,e,g,f,k,h,n)};a.prototype.absellipse=function(a,c,e,g,f,k,l,n){a=new h.EllipseCurve(a,c,e,g,f,k,l,n);0<this.curves.length&&(c=a.getPoint(0),c.equals(this.currentPoint)||
this.lineTo(c.x,c.y));this.curves.push(a);a=a.getPoint(1);this.currentPoint.copy(a)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.currentPoint.copy(a.currentPoint);return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.currentPoint=this.currentPoint.toArray();return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.currentPoint.fromArray(a.currentPoint);return this};return a}(h.CurvePath);(function(c){var a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}r(b,a);return b}(h.CurvePath.Data);c.Data=a})(h.Path||(h.Path={}));h.Shape=function(c){function a(a){a=c.call(this,a)||this;a.uuid=E.generateUUID();a.type="Shape";a.holes=[];return a}r(a,c);a.prototype.getPointsHoles=function(a){for(var b=[],c=0,g=this.holes.length;c<g;c++)b[c]=this.holes[c].getPoints(a);return b};a.prototype.extractPoints=function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}};a.prototype.copy=function(a){c.prototype.copy.call(this,
a);this.holes=[];for(var b=0,e=a.holes.length;b<e;b++)this.holes.push(a.holes[b].clone());return this};a.prototype.toJSON=function(){var a=c.prototype.toJSON.call(this);a.uuid=this.uuid;a.holes=[];for(var d=0,e=this.holes.length;d<e;d++)a.holes.push(this.holes[d].toJSON());return a};a.prototype.fromJSON=function(a){c.prototype.fromJSON.call(this,a);this.uuid=a.uuid;this.holes=[];for(var b=0,e=a.holes.length;b<e;b++){var g=a.holes[b];this.holes.push((new h.Path).fromJSON(g))}return this};return a}(h.Path);
(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Path.Data);c.Data=a})(h.Shape||(h.Shape={}));h.Light=function(c){function a(a,d){void 0===d&&(d=1);var b=c.call(this)||this;b.type="Light";b.isLight=!0;b.color=new h.Color(a);b.intensity=d;b.receiveShadow=void 0;return b}r(a,c);a.prototype.clone=function(){return(new a(this.color,this.intensity)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.color.copy(a.color);
this.intensity=a.intensity;return this};a.prototype.toJSON=function(a){a=c.prototype.toJSON.call(this,a);a.object.color=this.color.getHex();a.object.intensity=this.intensity;void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex());void 0!==this.distance&&(a.object.distance=this.distance);void 0!==this.angle&&(a.object.angle=this.angle);void 0!==this.decay&&(a.object.decay=this.decay);void 0!==this.penumbra&&(a.object.penumbra=this.penumbra);void 0!==this.shadow&&(a.object.shadow=
this.shadow.toJSON());return a};return a}(h.Object3D);(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Data);c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Object3D.Obj);c.Obj=a})(h.Light||(h.Light={}));var sd=function(c){function a(a,d,e){a=c.call(this,a,e)||this;a.type="HemisphereLight";a.isHemisphereLight=!0;a.castShadow=void 0;a.position.copy(h.Object3D.DefaultUp);a.updateMatrix();
a.groundColor=new h.Color(d);return a}r(a,c);a.prototype.clone=function(){return(new a(this.color,this.groundColor,this.intensity)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.groundColor.copy(a.groundColor);return this};return a}(h.Light);h.LightShadow=function(){function c(a){this.bias=0;this.radius=1;this.mapSize=new y(512,512);this.matrix=new F;this.map=null;this.camera=a}c.prototype.copy=function(a){this.camera=a.camera.clone();this.bias=a.bias;this.radius=a.radius;
this.mapSize.copy(a.mapSize);return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.toJSON=function(){var a=new c.Data;0!==this.bias&&(a.bias=this.bias);1!==this.radius&&(a.radius=this.radius);if(512!==this.mapSize.x||512!==this.mapSize.y)a.mapSize=this.mapSize.toArray();a.camera=this.camera.toJSON(null).object;delete a.camera.matrix;return a};return c}();(function(c){var a=function(){return function(){}}();c.Data=a})(h.LightShadow||(h.LightShadow={}));var td=function(c){function a(){var a=
c.call(this,new h.PerspectiveCamera(50,1,.5,500))||this;a.isSpotLightShadow=!0;return a}r(a,c);a.prototype.update=function(a){var b=this.camera,c=2*E.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height;a=a.distance||b.far;if(c!==b.fov||g!==b.aspect||a!==b.far)b.fov=c,b.aspect=g,b.far=a,b.updateProjectionMatrix()};a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.LightShadow),ud=function(c){function a(a,d,
e,g,f,k){void 0===e&&(e=0);void 0===g&&(g=Math.PI/3);void 0===f&&(f=0);void 0===k&&(k=1);a=c.call(this,a,d)||this;a.type="SpotLight";a.isSpotLight=!0;a.position.copy(h.Object3D.DefaultUp);a.updateMatrix();a.target=new h.Object3D;a.distance=e;a.angle=g;a.penumbra=f;a.decay=k;a.shadow=new td;return a}r(a,c);Object.defineProperty(a.prototype,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI},enumerable:!0,configurable:!0});a.prototype.clone=function(){return(new a(this.color,
this.intensity,this.distance,this.angle,this.penumbra,this.decay)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.distance=a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return this};return a}(h.Light),vd=function(c){function a(a,d,e,g){void 0===e&&(e=0);void 0===g&&(g=1);a=c.call(this,a,d)||this;a.type="PointLight";a.isPointLight=!0;a.distance=e;a.decay=g;a.shadow=new h.LightShadow(new h.PerspectiveCamera(90,
1,.5,500));return a}r(a,c);Object.defineProperty(a.prototype,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)},enumerable:!0,configurable:!0});a.prototype.clone=function(){return(new a(this.color,this.intensity,this.distance,this.decay)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return this};return a}(h.Light),wd=function(c){function a(){return c.call(this,
new h.OrthographicCamera(-5,5,5,-5,.5,500))||this}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.LightShadow),xd=function(c){function a(a,d){a=c.call(this,a,d)||this;a.type="DirectionalLight";a.isDirectionalLight=!0;a.position.copy(h.Object3D.DefaultUp);a.updateMatrix();a.target=new h.Object3D;a.shadow=new wd;return a}r(a,c);a.prototype.clone=function(){return(new a(this.color,this.intensity)).copy(this)};
a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.target=a.target.clone();this.shadow=a.shadow.clone();return this};return a}(h.Light),yd=function(c){function a(a,d){a=c.call(this,a,d)||this;a.type="AmbientLight";a.isAmbientLight=!0;a.castShadow=void 0;return a}r(a,c);a.prototype.clone=function(){return(new a(this.color,this.intensity)).copy(this)};a.prototype.copy=function(a){return c.prototype.copy.call(this,a)};return a}(h.Light);h.RectAreaLight=function(c){function a(a,d,e,g){void 0===
e&&(e=10);void 0===g&&(g=10);a=c.call(this,a,d)||this;a.type="RectAreaLight";a.isRectAreaLight=!0;a.width=e;a.height=g;return a}r(a,c);a.prototype.clone=function(){return(new a(this.color,this.intensity,this.width,this.height)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.width=a.width;this.height=a.height;return this};a.prototype.toJSON=function(a){a=c.prototype.toJSON.call(this,a);a.object.width=this.width;a.object.height=this.height;return a};return a}(h.Light);(function(c){var a=
function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Light.Data);c.Data=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.Light.Obj);c.Obj=a})(h.RectAreaLight||(h.RectAreaLight={}));var Ha=function(){function c(a,b,c,e){this.settings=null;this.DefaultSettings_={};this.parameterPositions=a;this._cachedIndex=0;this.resultBuffer=void 0!==e?e:new b.constructor(c);this.sampleValues=b;this.valueSize=c;this.afterEnd_=this.beforeStart_=
this.copySampleValue_}c.prototype.evaluate=function(a){var b=this.parameterPositions,c=this._cachedIndex,e=b[c],g=b[c-1];a:{b:{c:{d:if(!(a<e)){for(var f=c+2;;){if(void 0===e){if(a<g)break d;this._cachedIndex=c=b.length;return this.afterEnd_(c-1,a,g)}if(c===f)break;g=e;e=b[++c];if(a<e)break b}e=b.length;break c}if(a>=g)break a;else{f=b[1];a<f&&(c=2,g=f);for(f=c-2;;){if(void 0===g)return this._cachedIndex=0,this.beforeStart_(0,a,e);if(c===f)break;e=g;g=b[--c-1];if(a>=g)break b}e=c;c=0}}for(;c<e;)g=
c+e>>>1,a<b[g]?e=g:c=g+1;e=b[c];g=b[c-1];if(void 0===g)return this._cachedIndex=0,this.beforeStart_(0,a,e);if(void 0===e)return this._cachedIndex=c=b.length,this.afterEnd_(c-1,g,a)}this._cachedIndex=c;this.intervalChanged_(c,g,e)}return this.interpolate_(c,g,a,e)};c.prototype.getSettings_=function(){return this.settings||this.DefaultSettings_};c.prototype.copySampleValue_=function(a,b,c){b=this.resultBuffer;c=this.sampleValues;var d=this.valueSize;a*=d;for(var g=0;g!==d;++g)b[g]=c[a+g];return b};
c.prototype.interpolate_=function(a,b,c,e){throw Error("call to abstract method");};c.prototype.intervalChanged_=function(a,b,c){};return c}(),zd=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.DefaultSettings_={endingStart:2400,endingEnd:2400};a._weightPrev=-0;a._offsetPrev=-0;a._weightNext=-0;a._offsetNext=-0;return a}r(a,c);a.prototype.intervalChanged_=function(a,c,e){var b=this.parameterPositions,d=a-2,k=a+1,h=b[d],n=b[k];if(void 0===h)switch(this.getSettings_().endingStart){case 2401:d=
a;h=2*c-e;break;case 2402:d=b.length-2;h=c+b[d]-b[d+1];break;default:d=a,h=e}if(void 0===n)switch(this.getSettings_().endingEnd){case 2401:k=a;n=2*e-c;break;case 2402:k=1;n=e+b[1]-b[0];break;default:k=a-1,n=c}a=.5*(e-c);b=this.valueSize;this._weightPrev=a/(c-h);this._weightNext=a/(n-e);this._offsetPrev=d*b;this._offsetNext=k*b};a.prototype.interpolate_=function(a,c,e,g){var b=this.resultBuffer,d=this.sampleValues,h=this.valueSize;a*=h;var n=a-h,p=this._offsetPrev,m=this._offsetNext,t=this._weightPrev,
q=this._weightNext,u=(e-c)/(g-c);e=u*u;g=e*u;c=-t*g+2*t*e-t*u;t=(1+t)*g+(-1.5-2*t)*e+(-.5+t)*u+1;u=(-1-q)*g+(1.5+q)*e+.5*u;q=q*g-q*e;for(e=0;e!==h;++e)b[e]=c*d[p+e]+t*d[n+e]+u*d[a+e]+q*d[m+e];return b};return a}(Ha),Qb=function(c){function a(a,d,e,g){return c.call(this,a,d,e,g)||this}r(a,c);a.prototype.interpolate_=function(a,c,e,g){var b=this.resultBuffer,d=this.sampleValues,h=this.valueSize;a*=h;var n=a-h;c=(e-c)/(g-c);e=1-c;for(g=0;g!==h;++g)b[g]=d[n+g]*e+d[a+g]*c;return b};return a}(Ha),Ad=function(c){function a(a,
d,e,g){return c.call(this,a,d,e,g)||this}r(a,c);a.prototype.interpolate_=function(a){return this.copySampleValue_(a-1)};return a}(Ha),R=function(){function c(){}c.arraySlice=function(a,b,d){return c.isTypedArray(a)?new a.constructor(a.subarray(b,void 0!==d?d:a.length)):a.slice(b,d)};c.convertArray=function(a,b,c){return!a||!c&&a.constructor===b?a:"number"===typeof b.BYTES_PER_ELEMENT?new b(a):Array.prototype.slice.call(a)};c.isTypedArray=function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)};
c.getKeyframeOrder=function(a){for(var b=a.length,c=Array(b),e=0;e!==b;++e)c[e]=e;c.sort(function(b,c){return a[b]-a[c]});return c};c.sortedArray=function(a,b,c){for(var d=a.length,g=new a.constructor(d),f=0,k=0;k!==d;++f)for(var h=c[f]*b,n=0;n!==b;++n)g[k++]=a[h+n];return g};c.flattenJSON=function(a,b,c,e){for(var d=1,f=a[0];void 0!==f&&void 0===f[e];)f=a[d++];if(void 0!==f){var k=f[e];if(void 0!==k)if(Array.isArray(k)){do k=f[e],void 0!==k&&(b.push(f.time),c.push.apply(c,k)),f=a[d++];while(void 0!==
f)}else if(void 0!==k.toArray){do k=f[e],void 0!==k&&(b.push(f.time),k.toArray(c,c.length)),f=a[d++];while(void 0!==f)}else{do k=f[e],void 0!==k&&(b.push(f.time),c.push(k)),f=a[d++];while(void 0!==f)}}};return c}();h.KeyframeTrack=function(){function c(a,b,c,e){this.ValueBufferType=this.TimeBufferType=Float32Array;this.DefaultInterpolation=2301;if(void 0===a)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===b||0===b.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+
a);this.name=a;this.times=R.convertArray(b,this.TimeBufferType,null);this.values=R.convertArray(c,this.ValueBufferType,null);this.setInterpolation(e||this.DefaultInterpolation);this.validate();this.optimize()}c.parse=function(a){if(void 0===a.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var b=c._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var d=[],e=[];R.flattenJSON(a.keys,d,e,"value");a.times=d;a.values=e}return void 0!==b.parse?b.parse(a):new b(a.name,
a.times,a.values,a.interpolation)};c.toJSON=function(a){var b=new c.Data;if(void 0!==a.toJSON)b=a.toJSON(a);else{b.name=a.name;b.times=R.convertArray(a.times,Array,null);b.values=R.convertArray(a.values,Array,null);var d=a.getInterpolation();d!==a.DefaultInterpolation&&(b.interpolation=d)}b.type=a.ValueTypeName;return b};c._getTrackTypeForValueTypeName=function(a){switch(a.toLowerCase()){case "scalar":case "double":case "float":case "number":case "integer":return h.NumberKeyframeTrack;case "vector":case "vector2":case "vector3":case "vector4":return h.VectorKeyframeTrack;
case "color":return h.ColorKeyframeTrack;case "quaternion":return h.QuaternionKeyframeTrack;case "bool":case "boolean":return h.BooleanKeyframeTrack;case "string":return h.StringKeyframeTrack}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+a);};c.prototype.InterpolantFactoryMethodDiscrete=function(a){return new Ad(this.times,this.values,this.getValueSize(),a)};c.prototype.InterpolantFactoryMethodLinear=function(a){return new Qb(this.times,this.values,this.getValueSize(),a)};c.prototype.InterpolantFactoryMethodSmooth=
function(a){return new zd(this.times,this.values,this.getValueSize(),a)};c.prototype.setInterpolation=function(a){switch(a){case 2300:var b=this.InterpolantFactoryMethodDiscrete;break;case 2301:b=this.InterpolantFactoryMethodLinear;break;case 2302:b=this.InterpolantFactoryMethodSmooth}if(void 0===b){b="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(a!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);
else throw Error(b);console.warn("THREE.KeyframeTrack:",b)}else this.createInterpolant=b};c.prototype.getInterpolation=function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}};c.prototype.getValueSize=function(){return this.values.length/this.times.length};c.prototype.shift=function(a){if(0!==a)for(var b=this.times,c=0,e=b.length;c!==e;++c)b[c]+=a;return this};
c.prototype.scale=function(a){if(1!==a)for(var b=this.times,c=0,e=b.length;c!==e;++c)b[c]*=a;return this};c.prototype.trim=function(a,b){for(var c=this.times,e=c.length,g=0,f=e-1;g!==e&&c[g]<a;)++g;for(;-1!==f&&c[f]>b;)--f;++f;if(0!==g||f!==e)g>=f&&(f=Math.max(f,1),g=f-1),a=this.getValueSize(),this.times=R.arraySlice(c,g,f),this.values=R.arraySlice(this.values,g*a,f*a);return this};c.prototype.validate=function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",
this),a=!1);var c=this.times;b=this.values;var e=c.length;0===e&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);for(var g=null,f=0;f!==e;f++){var k=c[f];if("number"===typeof k&&isNaN(k)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,k);a=!1;break}if(null!==g&&g>k){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,k,g);a=!1;break}g=k}if(void 0!==b&&R.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(e=b[f],isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",
this,f,e);a=!1;break}return a};c.prototype.optimize=function(){for(var a=this.times,b=this.values,c=this.getValueSize(),e=2302===this.getInterpolation(),g=1,f=a.length-1,k=1;k<f;++k){var h=!1,n=a[k];if(n!==a[k+1]&&(1!==k||n!==n[0]))if(e)h=!0;else{var p=k*c,m=p-c,t=p+c;for(n=0;n!==c;++n){var q=b[p+n];if(q!==b[m+n]||q!==b[t+n]){h=!0;break}}}if(h){if(k!==g)for(a[g]=a[k],h=k*c,p=g*c,n=0;n!==c;++n)b[p+n]=b[h+n];++g}}if(0<f){a[g]=a[f];h=f*c;p=g*c;for(n=0;n!==c;++n)b[p+n]=b[h+n];++g}g!==a.length&&(this.times=
R.arraySlice(a,0,g),this.values=R.arraySlice(b,0,g*c));return this};return c}();(function(c){var a=function(){return function(){}}();c.Data=a})(h.KeyframeTrack||(h.KeyframeTrack={}));var Rb=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.ValueTypeName="vector";return a}r(a,c);a.parse=void 0;return a}(h.KeyframeTrack),Bd=function(c){function a(a,d,e,g){return c.call(this,a,d,e,g)||this}r(a,c);a.prototype.interpolate_=function(a,c,e,g){var b=this.resultBuffer,d=this.sampleValues,h=this.valueSize;
a*=h;c=(e-c)/(g-c);for(e=a+h;a!==e;a+=4)N.slerpFlat(b,0,d,a-h,d,a,c);return b};return a}(Ha),Cd=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.valueTypeName="quaternion";return a}r(a,c);a.prototype.InterpolantFactoryMethodLinear=function(a){return new Bd(this.times,this.values,this.getValueSize(),a)};a.parse=void 0;return a}(h.KeyframeTrack),Sb=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.ValueTypeName="number";return a}r(a,c);return a}(h.KeyframeTrack);h.AnimationClip=
function(){function c(a,b,c){void 0===b&&(b=-1);this.name=a;this.tracks=c;this.duration=void 0!==b?b:-1;this.uuid=E.generateUUID();0>this.duration&&this.resetDuration();this.optimize()}c.parse=function(a){for(var b=[],d=a.tracks,e=1/(a.fps||1),g=0,f=d.length;g!==f;++g)b.push(h.KeyframeTrack.parse(d[g]).scale(e));return new c(a.name,a.duration,b)};c.toJSON=function(a){for(var b=[],d=a.tracks,e=0,g=d.length;e!==g;++e)b.push(h.KeyframeTrack.toJSON(d[e]));d=new c.Data;d.name=a.name;d.duration=a.duration;
d.tracks=b;return d};c.CreateFromMorphTargetSequence=function(a,b,d,e){for(var g=b.length,f=[],k=0;k<g;k++){var h=[],n=[];h.push((k+g-1)%g,k,(k+1)%g);n.push(0,1,0);var p=R.getKeyframeOrder(h);h=R.sortedArray(h,1,p);n=R.sortedArray(n,1,p);e||0!==h[0]||(h.push(g),n.push(n[0]));f.push((new Sb(".morphTargetInfluences["+b[k].name+"]",h,n,null)).scale(1/d))}return new c(a,-1,f)};c.findByName=function(a,b){var c=a;Array.isArray(a)||(c=a.geometry&&a.geometry.animations||a.animations);for(a=0;a<c.length;a++)if(c[a].name===
b)return c[a];return null};c.CreateClipsFromMorphTargetSequences=function(a,b,d){for(var e={},g=/^([\w-]*?)([\d]+)$/,f=0,h=a.length;f<h;f++){var l=a[f],n=l.name.match(g);if(n&&1<n.length){n=n[1];var p=e[n];p||(e[n]=p=[]);p.push(l)}}a=[];for(var m in e)a.push(c.CreateFromMorphTargetSequence(m,e[m],b,d));return a};c.parseAnimation=function(a,b){function d(a,b,c,d,e){if(0!==c.length){var f=[],g=[];R.flattenJSON(c,f,g,d);0!==f.length&&e.push(new a(b,f,g))}}if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),
null;var e=[],g=a.name||"default",f=a.length||-1,h=a.fps||30;a=a.hierarchy||[];for(var l=0;l<a.length;l++){var n=a[l].keys;if(n&&0!==n.length)if(n[0].morphTargets){f=[];var p=0;for(p=0;p<n.length;p++)if(n[p].morphTargets)for(var m=0;m<n[p].morphTargets.length;m++)f[n[p].morphTargets[m]]=-1;for(var t in f){var q=[],u=[];for(m=0;m!==n[p].morphTargets.length;++m){var r=n[p];q.push(r.time);u.push(r.morphTarget===t?1:0)}e.push(new Sb(".morphTargetInfluence["+t+"]",q,u,null))}f=f.length*(h||1)}else p=".bones["+
b[l].name+"]",d(Rb,p+".position",n,"pos",e),d(Cd,p+".quaternion",n,"rot",e),d(Rb,p+".scale",n,"scl",e)}return 0===e.length?null:new c(g,f,e)};c.prototype.resetDuration=function(){for(var a=0,b=0,c=this.tracks.length;b!==c;++b){var e=this.tracks[b];a=Math.max(a,e.times[e.times.length-1])}this.duration=a};c.prototype.trim=function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this};c.prototype.optimize=function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();
return this};return c}();(function(c){var a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}r(b,a);return b}(h.KeyframeTrack.Data);c.Data=a})(h.AnimationClip||(h.AnimationClip={}));var Tb=function(){function c(a){void 0===a&&(a=V);this.manager=a;this.textures={}}c.prototype.load=function(a,b,c,e){var d=this;(new ja(d.manager)).load(a,function(a){b(d.parse(JSON.parse(a)))},c,e)};c.prototype.setTextures=function(a){this.textures=a};c.prototype.parse=function(a){function b(a){void 0===
c[a]&&console.warn("THREE.MaterialLoader: Undefined texture",a);return c[a]}var c=this.textures,e=new bf[a.type];void 0!==a.uuid&&(e.uuid=a.uuid);void 0!==a.name&&(e.name=a.name);void 0!==a.color&&e.color.setHex(a.color);void 0!==a.roughness&&(e.roughness=a.roughness);void 0!==a.metalness&&(e.metalness=a.metalness);void 0!==a.emissive&&e.emissive.setHex(a.emissive);void 0!==a.specular&&e.specular.setHex(a.specular);void 0!==a.shininess&&(e.shininess=a.shininess);void 0!==a.clearCoat&&(e.clearCoat=
a.clearCoat);void 0!==a.clearCoatRoughness&&(e.clearCoatRoughness=a.clearCoatRoughness);void 0!==a.uniforms&&(e.uniforms=a.uniforms);void 0!==a.vertexShader&&(e.vertexShader=a.vertexShader);void 0!==a.fragmentShader&&(e.fragmentShader=a.fragmentShader);void 0!==a.vertexColors&&(e.vertexColors=a.vertexColors);void 0!==a.fog&&(e.fog=a.fog);void 0!==a.flatShading&&(e.flatShading=a.flatShading);void 0!==a.blending&&(e.blending=a.blending);void 0!==a.side&&(e.side=a.side);void 0!==a.opacity&&(e.opacity=
a.opacity);void 0!==a.transparent&&(e.transparent=a.transparent);void 0!==a.alphaTest&&(e.alphaTest=a.alphaTest);void 0!==a.depthTest&&(e.depthTest=a.depthTest);void 0!==a.depthWrite&&(e.depthWrite=a.depthWrite);void 0!==a.colorWrite&&(e.colorWrite=a.colorWrite);void 0!==a.wireframe&&(e.wireframe=a.wireframe);void 0!==a.wireframeLinewidth&&(e.wireframeLinewidth=a.wireframeLinewidth);void 0!==a.wireframeLinecap&&(e.wireframeLinecap=a.wireframeLinecap);void 0!==a.wireframeLinejoin&&(e.wireframeLinejoin=
a.wireframeLinejoin);void 0!==a.rotation&&(e.rotation=a.rotation);1!==a.linewidth&&(e.linewidth=a.linewidth);void 0!==a.dashSize&&(e.dashSize=a.dashSize);void 0!==a.gapSize&&(e.gapSize=a.gapSize);void 0!==a.scale&&(e.scale=a.scale);void 0!==a.skinning&&(e.skinning=a.skinning);void 0!==a.morphTargets&&(e.morphTargets=a.morphTargets);void 0!==a.dithering&&(e.dithering=a.dithering);void 0!==a.visible&&(e.visible=a.visible);void 0!==a.userData&&(e.userData=a.userData);void 0!==a.shading&&(e.flatShading=
1===a.shading);void 0!==a.size&&(e.size=a.size);void 0!==a.sizeAttenuation&&(e.sizeAttenuation=a.sizeAttenuation);void 0!==a.map&&(e.map=b(a.map));void 0!==a.alphaMap&&(e.alphaMap=b(a.alphaMap),e.transparent=!0);void 0!==a.bumpMap&&(e.bumpMap=b(a.bumpMap));void 0!==a.bumpScale&&(e.bumpScale=a.bumpScale);void 0!==a.normalMap&&(e.normalMap=b(a.normalMap));if(void 0!==a.normalScale){var g=a.normalScale;!1===Array.isArray(g)&&(g=[g,g]);e.normalScale=(new y).fromArray(g)}void 0!==a.displacementMap&&(e.displacementMap=
b(a.displacementMap));void 0!==a.displacementScale&&(e.displacementScale=a.displacementScale);void 0!==a.displacementBias&&(e.displacementBias=a.displacementBias);void 0!==a.roughnessMap&&(e.roughnessMap=b(a.roughnessMap));void 0!==a.metalnessMap&&(e.metalnessMap=b(a.metalnessMap));void 0!==a.emissiveMap&&(e.emissiveMap=b(a.emissiveMap));void 0!==a.emissiveIntensity&&(e.emissiveIntensity=a.emissiveIntensity);void 0!==a.specularMap&&(e.specularMap=b(a.specularMap));void 0!==a.envMap&&(e.envMap=b(a.envMap));
void 0!==a.reflectivity&&(e.reflectivity=a.reflectivity);void 0!==a.lightMap&&(e.lightMap=b(a.lightMap));void 0!==a.lightMapIntensity&&(e.lightMapIntensity=a.lightMapIntensity);void 0!==a.aoMap&&(e.aoMap=b(a.aoMap));void 0!==a.aoMapIntensity&&(e.aoMapIntensity=a.aoMapIntensity);void 0!==a.gradientMap&&(e.gradientMap=b(a.gradientMap));return e};return c}(),Ed=function(){function c(a){void 0===a&&(a=V);this.manager=a}c.prototype.load=function(a,b,c,e){var d=this;(new ja(d.manager)).load(a,function(a){b(d.parse(JSON.parse(a)))},
c,e)};c.prototype.parse=function(a){var b=new h.BufferGeometry,c=a.data.index;void 0!==c&&(c=new Dd[c.type](c.array),b.setIndex(new G(c,1)));var e=a.data.attributes;for(f in e){var g=e[f];c=new Dd[g.type](g.array);b.addAttribute(f,new G(c,g.itemSize,g.normalized))}var f=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==f)for(c=0,e=f.length;c!==e;++c)g=f[c],b.addGroup(g.start,g.count,g.materialIndex);a=a.data.boundingSphere;void 0!==a&&(f=new q,void 0!==a.center&&f.fromArray(a.center),b.boundingSphere=
new ia(f,a.radius));return b};return c}(),Dd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array},Ub=function(){function c(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){};this.crossOrigin=void 0;this.onLoadStart=function(){};this.onLoadProgress=
function(){};this.onLoadComplete=function(){}}c.prototype.initMaterials=function(a,b,c){for(var d=[],g=0;g<a.length;++g)d[g]=this.createMaterial(a[g],b,c);return d};c.prototype.createMaterial=function(a,b,d){function e(a,e,f,g,h){a=b+a;var l=c.Handlers.get(a);null!==l?a=l.load(a):(k.setCrossOrigin(d),a=k.load(a));void 0!==e&&(a.repeat.fromArray(e),1!==e[0]&&(a.wrapS=1E3),1!==e[1]&&(a.wrapT=1E3));void 0!==f&&a.offset.fromArray(f);void 0!==g&&("repeat"===g[0]&&(a.wrapS=1E3),"mirror"===g[0]&&(a.wrapS=
1002),"repeat"===g[1]&&(a.wrapT=1E3),"mirror"===g[1]&&(a.wrapT=1002));void 0!==h&&(a.anisotropy=h);e=E.generateUUID();n[e]=a;return e}var g={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},f=new h.Color,k=new Lb,l=new Tb,n={},p={uuid:E.generateUUID(),type:"MeshLambertMaterial"},m;for(m in a){var t=a[m];switch(m){case "DbgColor":case "DbgIndex":case "opticalDensity":case "illumination":break;case "DbgName":p.name=t;break;case "blending":p.blending=
g[t];break;case "colorAmbient":case "mapAmbient":console.warn("THREE.Loader.createMaterial:",m,"is no longer supported.");break;case "colorDiffuse":p.color=f.fromArray(t).getHex();break;case "colorSpecular":p.specular=f.fromArray(t).getHex();break;case "colorEmissive":p.emissive=f.fromArray(t).getHex();break;case "specularCoef":p.shininess=t;break;case "shading":"basic"===t.toLowerCase()&&(p.type="MeshBasicMaterial");"phong"===t.toLowerCase()&&(p.type="MeshPhongMaterial");"standard"===t.toLowerCase()&&
(p.type="MeshStandardMaterial");break;case "mapDiffuse":p.map=e(t,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case "mapDiffuseRepeat":case "mapDiffuseOffset":case "mapDiffuseWrap":case "mapDiffuseAnisotropy":break;case "mapEmissive":p.emissiveMap=e(t,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case "mapEmissiveRepeat":case "mapEmissiveOffset":case "mapEmissiveWrap":case "mapEmissiveAnisotropy":break;case "mapLight":p.lightMap=
e(t,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case "mapLightRepeat":case "mapLightOffset":case "mapLightWrap":case "mapLightAnisotropy":break;case "mapAO":p.aoMap=e(t,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case "mapAORepeat":case "mapAOOffset":case "mapAOWrap":case "mapAOAnisotropy":break;case "mapBump":p.bumpMap=e(t,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case "mapBumpScale":p.bumpScale=t;break;case "mapBumpRepeat":case "mapBumpOffset":case "mapBumpWrap":case "mapBumpAnisotropy":break;
case "mapNormal":p.normalMap=e(t,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case "mapNormalFactor":p.normalScale=[t,t];break;case "mapNormalRepeat":case "mapNormalOffset":case "mapNormalWrap":case "mapNormalAnisotropy":break;case "mapSpecular":p.specularMap=e(t,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case "mapSpecularRepeat":case "mapSpecularOffset":case "mapSpecularWrap":case "mapSpecularAnisotropy":break;case "mapMetalness":p.metalnessMap=
e(t,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case "mapMetalnessRepeat":case "mapMetalnessOffset":case "mapMetalnessWrap":case "mapMetalnessAnisotropy":break;case "mapRoughness":p.roughnessMap=e(t,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case "mapRoughnessRepeat":case "mapRoughnessOffset":case "mapRoughnessWrap":case "mapRoughnessAnisotropy":break;case "mapAlpha":p.alphaMap=e(t,a.mapAlphaRepeat,
a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case "mapAlphaRepeat":case "mapAlphaOffset":case "mapAlphaWrap":case "mapAlphaAnisotropy":break;case "flipSided":p.side=1;break;case "doubleSided":p.side=2;break;case "transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");p.opacity=t;break;case "depthTest":case "depthWrite":case "colorWrite":case "opacity":case "reflectivity":case "transparent":case "visible":case "wireframe":p[m]=t;break;case "vertexColors":!0===
t&&(p.vertexColors=2);"face"===t&&(p.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",m,t)}}"MeshBasicMaterial"===p.type&&delete p.emissive;"MeshPhongMaterial"!==p.type&&delete p.specular;1>p.opacity&&(p.transparent=!0);l.setTextures(n);return l.parse(p)};c.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,e=b.length;c<e;c+=2){var g=b[c+1];if(b[c].test(a))return g}return null}};return c}(),Vb=function(){function c(){}
c.decodeText=function(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);for(var b="",c=0,e=a.length;c<e;c++)b+=String.fromCharCode(a[c]);return decodeURIComponent(escape(b))};c.extractUrlBase=function(a){a=a.split("/");if(1===a.length)return"./";a.pop();return a.join("/")+"/"};return c}(),Fd=function(){function c(a){void 0===a&&(a=V);this.withCredentials=!1;"boolean"===typeof a&&(console.warn("THREEONLoader: showStatus parameter has been removed from constructor."),a=void 0);
this.manager=a}c.prototype.load=function(a,b,c,e){var d=this,f=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Vb.extractUrlBase(a),h=new ja(this.manager);h.setWithCredentials(this.withCredentials);h.load(a,function(c){c=JSON.parse(c);var e=c.metadata;if(void 0!==e&&(e=e.type,void 0!==e)){if("object"===e.toLowerCase()){console.error("THREEONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===e.toLowerCase()){console.error("THREEONLoader: "+a+
" should be loaded with THREE.SceneLoader instead.");return}}c=d.parse(c,f);b(c.geometry,c.materials)},c,e)};c.prototype.setTexturePath=function(a){this.texturePath=a;return this};c.prototype.parse=function(a,b){void 0!==a.data&&(a=a.data);a.scale=void 0!==a.scale?1/a.scale:1;var c=new h.Geometry;(function(a,b){var c,d,e,g=a.faces;var p=a.vertices;var m=a.normals,t=a.colors;var v=a.scale;var u=0;if(void 0!==a.uvs){for(c=0;c<a.uvs.length;c++)a.uvs[c].length&&u++;for(c=0;c<u;c++)b.faceVertexUvs[c]=
[]}var r=0;for(e=p.length;r<e;)c=new q,c.x=p[r++]*v,c.y=p[r++]*v,c.z=p[r++]*v,b.vertices.push(c);r=0;for(e=g.length;r<e;){p=g[r++];var w=p&1;var B=p&2;c=p&8;var z=p&16;var x=p&32;v=p&64;p&=128;if(w){w=new oa;w.a=g[r];w.b=g[r+1];w.c=g[r+3];var C=new oa;C.a=g[r+1];C.b=g[r+2];C.c=g[r+3];r+=4;B&&(B=g[r++],w.materialIndex=B,C.materialIndex=B);B=b.faces.length;if(c)for(c=0;c<u;c++){var E=a.uvs[c];b.faceVertexUvs[c][B]=[];b.faceVertexUvs[c][B+1]=[];for(d=0;4>d;d++){var D=g[r++];var F=E[2*D];D=E[2*D+1];F=
new y(F,D);2!==d&&b.faceVertexUvs[c][B].push(F);0!==d&&b.faceVertexUvs[c][B+1].push(F)}}z&&(z=3*g[r++],w.normal.set(m[z++],m[z++],m[z]),C.normal.copy(w.normal));if(x)for(c=0;4>c;c++)z=3*g[r++],x=new q(m[z++],m[z++],m[z]),2!==c&&w.vertexNormals.push(x),0!==c&&C.vertexNormals.push(x);v&&(v=g[r++],v=t[v],w.color.setHex(v),C.color.setHex(v));if(p)for(c=0;4>c;c++)v=g[r++],v=t[v],2!==c&&w.vertexColors.push(new h.Color(v)),0!==c&&C.vertexColors.push(new h.Color(v));b.faces.push(w);b.faces.push(C)}else{w=
new oa;w.a=g[r++];w.b=g[r++];w.c=g[r++];B&&(B=g[r++],w.materialIndex=B);B=b.faces.length;if(c)for(c=0;c<u;c++)for(E=a.uvs[c],b.faceVertexUvs[c][B]=[],d=0;3>d;d++)D=g[r++],F=E[2*D],D=E[2*D+1],F=new y(F,D),b.faceVertexUvs[c][B].push(F);z&&(z=3*g[r++],w.normal.set(m[z++],m[z++],m[z]));if(x)for(c=0;3>c;c++)z=3*g[r++],x=new q(m[z++],m[z++],m[z]),w.vertexNormals.push(x);v&&(v=g[r++],w.color.setHex(t[v]));if(p)for(c=0;3>c;c++)v=g[r++],w.vertexColors.push(new h.Color(t[v]));b.faces.push(w)}}})(a,c);(function(a,
b){var c=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,e=a.skinWeights.length;d<e;d+=c)b.skinWeights.push(new J(a.skinWeights[d],1<c?a.skinWeights[d+1]:0,2<c?a.skinWeights[d+2]:0,3<c?a.skinWeights[d+3]:0));if(a.skinIndices)for(d=0,e=a.skinIndices.length;d<e;d+=c)b.skinIndices.push(new J(a.skinIndices[d],1<c?a.skinIndices[d+1]:0,2<c?a.skinIndices[d+2]:0,3<c?a.skinIndices[d+3]:0));b.bones=a.bones;b.bones&&0<b.bones.length&&(b.skinWeights.length!==b.skinIndices.length||
b.skinIndices.length!==b.vertices.length)&&console.warn("When skinning, number of vertices ("+b.vertices.length+"), skinIndices ("+b.skinIndices.length+"), and skinWeights ("+b.skinWeights.length+") should match.")})(a,c);(function(a,b){var c=a.scale;if(void 0!==a.morphTargets)for(var d=0,e=a.morphTargets.length;d<e;d++){b.morphTargets[d]={};b.morphTargets[d].name=a.morphTargets[d].name;b.morphTargets[d].vertices=[];for(var g=b.morphTargets[d].vertices,h=a.morphTargets[d].vertices,m=0,t=h.length;m<
t;m+=3){var r=new q;r.x=h[m]*c;r.y=h[m+1]*c;r.z=h[m+2]*c;g.push(r)}}if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREEONLoader: "morphColors" no longer supported. Using them as face colors.'),b=b.faces,a=a.morphColors[0].colors,d=0,e=b.length;d<e;d++)b[d].color.fromArray(a,3*d)})(a,c);(function(a,b){var c=[],d=[];void 0!==a.animation&&d.push(a.animation);void 0!==a.animations&&(a.animations.length?d=d.concat(a.animations):d.push(a.animations));for(a=0;a<d.length;a++){var e=
h.AnimationClip.parseAnimation(d[a],b.bones);e&&c.push(e)}b.morphTargets&&(d=h.AnimationClip.CreateClipsFromMorphTargetSequences(b.morphTargets,10),c=c.concat(d));0<c.length&&(b.animations=c)})(a,c);c.computeFaceNormals();c.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:c};a=Ub.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:a}};return c}(),ff=function(){function c(a){void 0===a&&(a=V);this.manager=a;this.texturePath=""}
c.prototype.load=function(a,b,c,e){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var d=this;(new ja(d.manager)).load(a,function(c){var g=null;try{g=JSON.parse(c)}catch(l){void 0!==e&&e(l);console.error("THREE:ObjectLoader: Can't parse "+a+".",l.message);return}c=g.metadata;void 0===c||void 0===c.type||"geometry"===c.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+a+". Use THREEONLoader instead."):d.parse(g,b)},c,e)};c.prototype.setTexturePath=function(a){this.texturePath=
a};c.prototype.setCrossOrigin=function(a){this.crossOrigin=a};c.prototype.parse=function(a,b){var c=this.parseShape(a.shapes);c=this.parseGeometries(a.geometries,c);var e=this.parseImages(a.images,function(){void 0!==b&&b(g)});e=this.parseTextures(a.textures,e);e=this.parseMaterials(a.materials,e);var g=this.parseObject(a.object,c,e);a.animations&&(g.animations=this.parseAnimations(a.animations));void 0!==a.images&&0!==a.images.length||void 0===b||b(g);return g};c.prototype.parseShape=function(a){var b=
{};if(void 0!==a)for(var c=0,e=a.length;c<e;c++){var g=(new h.Shape).fromJSON(a[c]);b[g.uuid]=g}return b};c.prototype.parseGeometries=function(a,b){var c={};if(void 0!==a)for(var e=new Fd,g=new Ed,f=0,h=a.length;f<h;f++){var l=a[f];switch(l.type){case "PlaneGeometry":case "PlaneBufferGeometry":var n=new ba[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case "BoxGeometry":case "BoxBufferGeometry":case "CubeGeometry":n=new ba[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,
l.depthSegments);break;case "CircleGeometry":case "CircleBufferGeometry":n=new ba[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case "CylinderGeometry":case "CylinderBufferGeometry":n=new ba[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "ConeGeometry":case "ConeBufferGeometry":n=new ba[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case "SphereGeometry":case "SphereBufferGeometry":n=
new ba[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case "DodecahedronGeometry":case "DodecahedronBufferGeometry":case "IcosahedronGeometry":case "IcosahedronBufferGeometry":case "OctahedronGeometry":case "OctahedronBufferGeometry":case "TetrahedronGeometry":case "TetrahedronBufferGeometry":n=new ba[l.type](l.radius,l.detail);break;case "RingGeometry":case "RingBufferGeometry":n=new ba[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,
l.phiSegments,l.thetaStart,l.thetaLength);break;case "TorusGeometry":case "TorusBufferGeometry":n=new ba[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case "TorusKnotGeometry":case "TorusKnotBufferGeometry":n=new ba[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case "LatheGeometry":case "LatheBufferGeometry":n=new ba[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case "PolyhedronGeometry":case "PolyhedronBufferGeometry":n=new ba[l.type](l.vertices,
l.indices,l.radius,l.details);break;case "ShapeGeometry":case "ShapeBufferGeometry":n=[];for(var p=0,m=l.shapes.length;p<m;p++)n.push(b[l.shapes[p]]);n=new ba[l.type](n,l.curveSegments);break;case "BufferGeometry":n=g.parse(l);break;case "Geometry":n=e.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}n.uuid=l.uuid;void 0!==l.name&&(n.name=l.name);c[l.uuid]=n}return c};c.prototype.parseMaterials=function(a,b){var c=
{};if(void 0!==a){var e=new Tb;e.setTextures(b);b=0;for(var g=a.length;b<g;b++){var f=a[b];if("MultiMaterial"===f.type){for(var h=[],l=0;l<f.materials.length;l++)h.push(e.parse(f.materials[l]));c[f.uuid]=h}else c[f.uuid]=e.parse(f)}}return c};c.prototype.parseAnimations=function(a){for(var b=[],c=0;c<a.length;c++){var e=h.AnimationClip.parse(a[c]);b.push(e)}return b};c.prototype.parseImages=function(a,b){function c(a){e.manager.itemStart(a);return f.load(a,function(){e.manager.itemEnd(a)},void 0,
function(){e.manager.itemEnd(a);e.manager.itemError(a)})}var e=this,g={};if(void 0!==a&&0<a.length){b=new Kb(b);var f=new Va(b);f.setCrossOrigin(this.crossOrigin);b=0;for(var h=a.length;b<h;b++){var l=a[b],n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:e.texturePath+l.url;g[l.uuid]=c(n)}}return g};c.prototype.parseTextures=function(a,b){function c(a,b){if("number"===typeof a)return a;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a);return b[a]}var e={};if(void 0!==
a)for(var g=0,f=a.length;g<f;g++){var h=a[g];void 0===h.image&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid);void 0===b[h.image]&&console.warn("THREE.ObjectLoader: Undefined image",h.image);var l=new Y(b[h.image]);l.needsUpdate=!0;l.uuid=h.uuid;void 0!==h.name&&(l.name=h.name);void 0!==h.mapping&&(l.mapping=c(h.mapping,ef));void 0!==h.offset&&l.offset.fromArray(h.offset);void 0!==h.repeat&&l.repeat.fromArray(h.repeat);void 0!==h.center&&l.center.fromArray(h.center);void 0!==
h.rotation&&(l.rotation=h.rotation);void 0!==h.wrap&&(l.wrapS=c(h.wrap[0],Gd),l.wrapT=c(h.wrap[1],Gd));void 0!==h.minFilter&&(l.minFilter=c(h.minFilter,Hd));void 0!==h.magFilter&&(l.magFilter=c(h.magFilter,Hd));void 0!==h.anisotropy&&(l.anisotropy=h.anisotropy);void 0!==h.flipY&&(l.flipY=h.flipY);e[h.uuid]=l}return e};c.prototype.parseObject=function(a,b,c){function d(a){void 0===b[a]&&console.warn("THREE.ObjectLoader: Undefined geometry",a);return b[a]}function g(a){if(void 0!==a){if(Array.isArray(a)){for(var b=
[],d=0,e=a.length;d<e;d++){var g=a[d];void 0===c[g]&&console.warn("THREE.ObjectLoader: Undefined material",g);b.push(c[g])}return b}void 0===c[a]&&console.warn("THREE.ObjectLoader: Undefined material",a);return c[a]}}switch(a.type){case "Scene":var f=new h.Scene;void 0!==a.background&&Number.isInteger(a.background)&&(f.background=new h.Color(a.background));void 0!==a.fog&&("Fog"===a.fog.type?f.fog=new Oc(a.fog.color,a.fog.near,a.fog.far):"FogExp2"===a.fog.type&&(f.fog=new Nc(a.fog.color,a.fog.density)));
break;case "PerspectiveCamera":f=new h.PerspectiveCamera(a.fov,a.aspect,a.near,a.far);void 0!==a.focus&&(f.focus=a.focus);void 0!==a.zoom&&(f.zoom=a.zoom);void 0!==a.filmGauge&&(f.filmGauge=a.filmGauge);void 0!==a.filmOffset&&(f.filmOffset=a.filmOffset);void 0!==a.view&&(f.view=Object.assign({},a.view));break;case "OrthographicCamera":f=new h.OrthographicCamera(a.left,a.right,a.top,a.bottom,a.near,a.far);break;case "AmbientLight":f=new yd(a.color,a.intensity);break;case "DirectionalLight":f=new xd(a.color,
a.intensity);break;case "PointLight":f=new vd(a.color,a.intensity,a.distance,a.decay);break;case "RectAreaLight":f=new h.RectAreaLight(a.color,a.intensity,a.width,a.height);break;case "SpotLight":f=new ud(a.color,a.intensity,a.distance,a.angle,a.penumbra,a.decay);break;case "HemisphereLight":f=new sd(a.color,a.groundColor,a.intensity);break;case "SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case "Mesh":f=d(a.geometry);var k=g(a.material);f=f.bones&&
0<f.bones.length?new Qc(f,k):new fa(f,k);break;case "LOD":f=new h.LOD;break;case "Line":f=new ka(d(a.geometry),g(a.material),a.mode);break;case "LineLoop":f=new Rc(d(a.geometry),g(a.material));break;case "LineSegments":f=new M(d(a.geometry),g(a.material));break;case "PointCloud":case "Points":f=new Pa(d(a.geometry),g(a.material));break;case "Sprite":f=new qb(g(a.material));break;case "Group":f=new sb;break;default:f=new h.Object3D}f.uuid=a.uuid;void 0!==a.name&&(f.name=a.name);void 0!==a.matrix?(f.matrix.fromArray(a.matrix),
f.matrix.decompose(f.position,f.quaternion,f.scale)):(void 0!==a.position&&f.position.fromArray(a.position),void 0!==a.rotation&&f.rotation.fromArray(a.rotation),void 0!==a.quaternion&&f.quaternion.fromArray(a.quaternion),void 0!==a.scale&&f.scale.fromArray(a.scale));void 0!==a.castShadow&&(f.castShadow=a.castShadow);void 0!==a.receiveShadow&&(f.receiveShadow=a.receiveShadow);a.shadow&&(void 0!==a.shadow.bias&&(f.shadow.bias=a.shadow.bias),void 0!==a.shadow.radius&&(f.shadow.radius=a.shadow.radius),
void 0!==a.shadow.mapSize&&f.shadow.mapSize.fromArray(a.shadow.mapSize),void 0!==a.shadow.camera&&(f.shadow.camera=this.parseObject(a.shadow.camera)));void 0!==a.visible&&(f.visible=a.visible);void 0!==a.userData&&(f.userData=a.userData);if(void 0!==a.children){k=a.children;for(var l=0;l<k.length;l++)f.add(this.parseObject(k[l],b,c))}if("LOD"===a.type)for(a=a.levels,k=0;k<a.length;k++){l=a[k];var n=f.getObjectByProperty("uuid",l.object);void 0!==n&&f.addLevel(n,l.distance)}return f};return c}(),ef=
{UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Gd={RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Hd={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},gf=function(){function c(a){void 0===
a&&(a=V);"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=a;this.options=void 0}c.prototype.setOptions=function(a){this.options=a;return this};c.prototype.load=function(a,b,c,e){void 0===a&&(a="");void 0!==this.path&&(a=this.path+a);var d=this,f=ua.get(a);if(void 0!==f)return d.manager.itemStart(a),setTimeout(function(){b&&b(f);
d.manager.itemEnd(a)},0),f;fetch(a).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,d.options)}).then(function(c){ua.add(a,c);b&&b(c);d.manager.itemEnd(a)}).catch(function(b){e&&e(b);d.manager.itemEnd(a);d.manager.itemError(a)})};c.prototype.setCrossOrigin=function(){return this};c.prototype.setPath=function(a){this.path=a;return this};return c}(),Id=function(){function c(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}c.prototype.moveTo=function(a,b){this.currentPath=
new h.Path;this.subPaths.push(this.currentPath);this.currentPath.moveTo(a,b)};c.prototype.lineTo=function(a,b){this.currentPath.lineTo(a,b)};c.prototype.quadraticCurveTo=function(a,b,c,e){this.currentPath.quadraticCurveTo(a,b,c,e)};c.prototype.bezierCurveTo=function(a,b,c,e,g,f){this.currentPath.bezierCurveTo(a,b,c,e,g,f)};c.prototype.splineThru=function(a){this.currentPath.splineThru(a)};c.prototype.toShapes=function(a,b){function c(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c],g=new h.Shape;
g.curves=e.curves;b.push(g)}return b}function e(a,b){for(var c=b.length,d=!1,e=c-1,g=0;g<c;e=g++){var f=b[e],h=b[g],k=h.x-f.x,l=h.y-f.y;if(Math.abs(l)>Number.EPSILON){if(0>l&&(f=b[g],k=-k,h=b[e],l=-l),!(a.y<f.y||a.y>h.y))if(a.y===f.y){if(a.x===f.x)return!0}else{e=l*(a.x-f.x)-k*(a.y-f.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===f.y&&(h.x<=a.x&&a.x<=f.x||f.x<=a.x&&a.x<=h.x))return!0}return d}var g=qa.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return c(f);b=[];if(1===f.length){var k=
f[0];var l=new h.Shape;l.curves=k.curves;b.push(l);return b}var n=!g(f[0].getPoints());n=a?!n:n;l=[];var p=[],m=[],t=0;p[t]=void 0;m[t]=[];for(var q=0,r=f.length;q<r;q++){k=f[q];var A=k.getPoints();var w=g(A);(w=a?!w:w)?(!n&&p[t]&&t++,p[t]={s:new h.Shape,p:A},p[t].s.curves=k.curves,n&&t++,m[t]=[]):m[t].push({h:k,p:A[0]})}if(!p[0])return c(f);if(1<p.length){q=!1;a=[];g=0;for(f=p.length;g<f;g++)l[g]=[];g=0;for(f=p.length;g<f;g++)for(k=m[g],w=0;w<k.length;w++){n=k[w];t=!0;for(A=0;A<p.length;A++)e(n.p,
p[A].p)&&(g!==A&&a.push({froms:g,tos:A,hole:w}),t?(t=!1,l[A].push(n)):q=!0);t&&l[g].push(n)}0<a.length&&(q||(m=l))}q=0;for(g=p.length;q<g;q++)for(l=p[q].s,b.push(l),a=m[q],f=0,k=a.length;f<k;f++)l.holes.push(a[f].h);return b};return c}();h.Font=function(){function c(a){this.type="Font";this.isFont=!0;this.data=a}c.prototype.generateShapes=function(a,b,d){void 0===b&&(b=100);void 0===d&&(d=4);var e=[];a=c.createPaths(a,b,d,this.data);b=0;for(d=a.length;b<d;b++)Array.prototype.push.apply(e,a[b].toShapes());
return e};return c}();(function(c){function a(a,c,e,g,f,h){if(a=h.glyphs[a]||h.glyphs["?"]){c=new Id;if(a.o){h=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(var b=0,d=h.length;b<d;)switch(h[b++]){case "m":var k=h[b++]*e+g;var m=h[b++]*e+f;c.moveTo(k,m);break;case "l":k=h[b++]*e+g;m=h[b++]*e+f;c.lineTo(k,m);break;case "q":k=h[b++]*e+g;m=h[b++]*e+f;var t=h[b++]*e+g;var q=h[b++]*e+f;c.quadraticCurveTo(t,q,k,m);break;case "b":k=h[b++]*e+g;m=h[b++]*e+f;t=h[b++]*e+g;q=h[b++]*e+f;var r=h[b++]*
e+g;var w=h[b++]*e+f;c.bezierCurveTo(t,q,r,w,k,m)}}return{offsetX:a.ha*e,path:c}}}c.createPaths=function(b,c,e,g){b=String(b).split("");c/=g.resolution;for(var d=(g.boundingBox.yMax-g.boundingBox.yMin+g.underlineThickness)*c,h=[],l=0,n=0,p=0;p<b.length;p++){var m=b[p];"\n"===m?(l=0,n-=d):(m=a(m,e,c,l,n,g),l+=m.offsetX,h.push(m.path))}return h};c.createPath=a})(h.Font||(h.Font={}));var hf=function(){function c(a){void 0===a&&(a=V);this.manager=a}c.prototype.load=function(a,b,c,e){var d=this,f=new ja(this.manager);
f.setPath(this.path);f.load(a,function(a){try{var c=JSON.parse(a)}catch(n){console.warn("THREE.FontLoader: typeface support is being deprecated. Use typefaceon instead."),c=JSON.parse(a.substring(65,a.length-2))}a=d.parse(c);b&&b(a)},c,e)};c.prototype.parse=function(a){return new h.Font(a)};c.prototype.setPath=function(a){this.path=a;return this};return c}(),Xa;(function(c){c.getContext=function(){void 0===Xa&&(Xa=new (window.AudioContext||window.webkitAudioContext));return Xa};c.setContext=function(a){Xa=
a}})(h.AudioContext||(h.AudioContext={}));var Jd=function(){function c(a){void 0===a&&(a=V);this.manager=a}c.prototype.load=function(a,b,c,e){var d=new ja(this.manager);d.setResponseType("arraybuffer");d.load(a,function(a){h.AudioContext.getContext().decodeAudioData(a,function(a){b(a)})},c,e)};return c}(),jf=function(){function c(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new h.PerspectiveCamera;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=
new h.PerspectiveCamera;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}c.prototype.update=function(){var a,b,c,e,g,f,h,l,n=new F,p=new F;return function(d){if(a!==this||b!==d.focus||c!==d.fov||e!==d.aspect*this.aspect||g!==d.near||f!==d.far||h!==d.zoom||l!==this.eyeSep){a=this;b=d.focus;c=d.fov;e=d.aspect*this.aspect;g=d.near;f=d.far;h=d.zoom;var k=d.projectionMatrix.clone();l=this.eyeSep/2;var m=l*g/b,q=g*Math.tan(E.DEG2RAD*c*.5)/h;p.elements[12]=-l;n.elements[12]=l;var r=-q*e+m;
var w=q*e+m;k.elements[0]=2*g/(w-r);k.elements[8]=(w+r)/(w-r);this.cameraL.projectionMatrix.copy(k);r=-q*e-m;w=q*e-m;k.elements[0]=2*g/(w-r);k.elements[8]=(w+r)/(w-r);this.cameraR.projectionMatrix.copy(k)}this.cameraL.matrixWorld.copy(d.matrixWorld).multiply(p);this.cameraR.matrixWorld.copy(d.matrixWorld).multiply(n)}};return c}(),Kd=function(c){function a(a,d,e){var b=c.call(this)||this;b.type="CubeCamera";b.fov=90;b.aspect=1;b.near=a;b.far=d;b.cubeResolution=e;b.cameraPX=new h.PerspectiveCamera(b.fov,
b.aspect,a,d);b.cameraPX.up.set(0,-1,0);b.cameraPX.lookAt(1,0,0);b.add(b.cameraPX);b.cameraNX=new h.PerspectiveCamera(b.fov,b.aspect,a,d);b.cameraNX.up.set(0,-1,0);b.cameraNX.lookAt(-1,0,0);b.add(b.cameraNX);b.cameraPY=new h.PerspectiveCamera(b.fov,b.aspect,a,d);b.cameraPY.up.set(0,0,1);b.cameraPY.lookAt(0,1,0);b.add(b.cameraPY);b.cameraNY=new h.PerspectiveCamera(b.fov,b.aspect,a,d);b.cameraNY.up.set(0,0,-1);b.cameraNY.lookAt(0,-1,0);b.add(b.cameraNY);b.cameraPZ=new h.PerspectiveCamera(b.fov,b.aspect,
a,d);b.cameraPZ.up.set(0,-1,0);b.cameraPZ.lookAt(0,0,1);b.add(b.cameraPZ);b.cameraNZ=new h.PerspectiveCamera(b.fov,b.aspect,a,d);b.cameraNZ.up.set(0,-1,0);b.cameraNZ.lookAt(0,0,-1);b.add(b.cameraNZ);b.renderTarget=new yc(e,e,{format:1022,magFilter:1006,minFilter:1006});b.renderTarget.texture.name="CubeCamera";return b}r(a,c);a.prototype.clone=function(){return(new a(this.near,this.far,this.cubeResolution)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.update=
function(a,c){null===this.parent&&this.updateMatrixWorld();var b=this.renderTarget,d=b.texture.generateMipmaps;b.texture.generateMipmaps=!1;b.activeCubeFace=0;a.render(c,this.cameraPX,b);b.activeCubeFace=1;a.render(c,this.cameraNX,b);b.activeCubeFace=2;a.render(c,this.cameraPY,b);b.activeCubeFace=3;a.render(c,this.cameraNY,b);b.activeCubeFace=4;a.render(c,this.cameraPZ,b);b.texture.generateMipmaps=d;b.activeCubeFace=5;a.render(c,this.cameraNZ,b);a.setRenderTarget(null)};a.prototype.clear=function(a,
c,e,g){for(var b=this.renderTarget,d=0;6>d;d++)b.activeCubeFace=d,a.setRenderTarget(b),a.clear(c,e,g);a.setRenderTarget(null)};return a}(h.Object3D),kf=function(c){function a(){var a=c.call(this)||this;a.type="AudioListener";a.filter=null;a.context=h.AudioContext.getContext();a.gain=a.context.createGain();a.gain.connect(a.context.destination);return a}r(a,c);a.prototype.clone=function(){return(new a).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.getInput=
function(){return this.gain};a.prototype.removeFilter=function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)};a.prototype.getFilter=function(){return this.filter};a.prototype.setFilter=function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);
this.filter.connect(this.context.destination)};a.prototype.getMasterVolume=function(){return this.gain.gain.value};a.prototype.setMasterVolume=function(a){this.gain.gain.value=a};a.prototype.updateMatrixWorld=function(a){var b=new q,c=new N,g=new q,f=new q;h.Object3D.prototype.updateMatrixWorld.call(this,a);a=this.context.listener;var k=this.up;this.matrixWorld.decompose(b,c,g);f.set(0,0,-1).applyQuaternion(c);a.positionX?(a.positionX.setValueAtTime(b.x,this.context.currentTime),a.positionY.setValueAtTime(b.y,
this.context.currentTime),a.positionZ.setValueAtTime(b.z,this.context.currentTime),a.forwardX.setValueAtTime(f.x,this.context.currentTime),a.forwardY.setValueAtTime(f.y,this.context.currentTime),a.forwardZ.setValueAtTime(f.z,this.context.currentTime),a.upX.setValueAtTime(k.x,this.context.currentTime),a.upY.setValueAtTime(k.y,this.context.currentTime),a.upZ.setValueAtTime(k.z,this.context.currentTime)):(a.setPosition(b.x,b.y,b.z),a.setOrientation(f.x,f.y,f.z,k.x,k.y,k.z))};return a}(h.Object3D),Wb=
function(c){function a(a){var b=c.call(this)||this;b.type="Audio";b.autoplay=!1;b.buffer=null;b.loop=!1;b.startTime=0;b.offset=0;b.playbackRate=1;b.isPlaying=!1;b.hasPlaybackControl=!0;b.sourceType="empty";b.filters=[];b.listener=a;b.context=a.context;b.gain=b.context.createGain();b.gain.connect(a.getInput());return b}r(a,c);a.prototype.clone=function(){return(new a(this.listener)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.getOutput=function(){return this.gain};
a.prototype.setNodeSource=function(a){this.hasPlaybackControl=!1;this.sourceType="audioNode";this.source=a;this.connect();return this};a.prototype.setBuffer=function(a){this.buffer=a;this.sourceType="buffer";this.autoplay&&this.play();return this};a.prototype.play=function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else{var a=this.context.createBufferSource();
a.buffer=this.buffer;a.loop=this.loop;a.onended=this.onEnded.bind(this);a.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;a.start(this.startTime,this.offset);this.isPlaying=!0;this.source=a;return this.connect()}};a.prototype.pause=function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*
this.playbackRate,this.isPlaying=!1),this};a.prototype.stop=function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.source.stop(),this.offset=0,this.isPlaying=!1,this};a.prototype.connect=function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var a=1,c=this.filters.length;a<c;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());
return this};a.prototype.disconnect=function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var a=1,c=this.filters.length;a<c;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this};a.prototype.getFilters=function(){return this.filters};a.prototype.setFilters=function(a){a||(a=[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=
a;return this};a.prototype.getFilter=function(){return this.getFilters()[0]};a.prototype.setFilter=function(a){return this.setFilters(a?[a]:[])};a.prototype.setPlaybackRate=function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this};a.prototype.getPlaybackRate=function(){return this.playbackRate};a.prototype.onEnded=
function(){this.isPlaying=!1};a.prototype.getLoop=function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop};a.prototype.setLoop=function(a){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio: this Audio has no playback control.");else return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this};a.prototype.getVolume=function(){return this.gain.gain.value};a.prototype.setVolume=function(a){this.gain.gain.value=
a;return this};return a}(h.Object3D),lf=function(c){function a(a){a=c.call(this,a)||this;a.panner=a.context.createPanner();a.panner.connect(a.gain);return a}r(a,c);a.prototype.getOutput=function(){return this.panner};a.prototype.getRefDistance=function(){return this.panner.refDistance};a.prototype.setRefDistance=function(a){this.panner.refDistance=a};a.prototype.getRolloffFactor=function(){return this.panner.rolloffFactor};a.prototype.setRolloffFactor=function(a){this.panner.rolloffFactor=a};a.prototype.getDistanceModel=
function(){return this.panner.distanceModel};a.prototype.setDistanceModel=function(a){this.panner.distanceModel=a};a.prototype.getMaxDistance=function(){return this.panner.maxDistance};a.prototype.setMaxDistance=function(a){this.panner.maxDistance=a};a.prototype.updateMatrixWorld=function(a){var b=new q;c.prototype.updateMatrixWorld.call(this,a);b.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(b.x,b.y,b.z)};return a}(Wb),Ld=function(){function c(a,b){void 0===b&&(b=2048);this.analyser=
a.context.createAnalyser();this.analyser.fftSize=b;this.data=new Uint8Array(this.analyser.frequencyBinCount);a.getOutput().connect(this.analyser)}c.prototype.getFrequencyData=function(){this.analyser.getByteFrequencyData(this.data);return this.data};c.prototype.getAverageFrequency=function(){for(var a=0,b=this.getFrequencyData(),c=0;c<b.length;c++)a+=b[c];return a/b.length};return c}(),mf=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.ValueTypeName="string";a.DefaultInterpolation=
2300;return a}r(a,c);return a}(h.KeyframeTrack),nf=function(c){function a(a,d,e,g){a=c.call(this,a,d,e,g)||this;a.ValueTypeName="color";return a}r(a,c);return a}(h.KeyframeTrack),of=function(c){function a(a,d,e){a=c.call(this,a,d,e,null)||this;a.ValueTypeName="bool";a.DefaultInterpolation=2300;return a}r(a,c);return a}(h.KeyframeTrack),Md=function(){function c(a,b,c){this.referenceCount=this.useCount=this.cumulativeWeight=0;this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=
this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b}c.prototype.accumulate=function(a,b){var c=this.buffer,e=this.valueSize;a=a*e+e;var g=this.cumulativeWeight;if(0===g){for(g=0;g!==e;++g)c[a+g]=c[g];g=b}else g+=b,this._mixBufferRegion(c,a,0,b/g,e);this.cumulativeWeight=g};c.prototype.apply=function(a){var b=this.valueSize,c=this.buffer;a=a*b+b;var e=this.cumulativeWeight,g=this.binding;this.cumulativeWeight=
0;1>e&&this._mixBufferRegion(c,a,3*b,1-e,b);e=b;for(var f=b+b;e!==f;++e)if(c[e]!==c[e+b]){g.setValue(c,a);break}};c.prototype.saveOriginalState=function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var e=b;e!==c;++e)a[e]=a[c+e%b];this.cumulativeWeight=0};c.prototype.restoreOriginalState=function(){this.binding.setValue(this.buffer,3*this.valueSize)};c.prototype._select=function(a,b,c,e,g){if(.5<=e)for(e=0;e!==g;++e)a[b+e]=a[c+e]};c.prototype._slerp=function(a,b,c,e){N.slerpFlat(a,
b,a,b,a,c,e)};c.prototype._lerp=function(a,b,c,e,g){for(var d=1-e,h=0;h!==g;++h){var l=b+h;a[l]=a[l]*d+a[c+h]*e}};return c}();h.PropertyBinding=function(){function c(a,b,d){this.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};this.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};this.GetterByBindingType=[function(a,b){a[b]=this.node[this.propertyName]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},
function(a,b){this.resolvedProperty.toArray(a,b)}];this.SetterByBindingTypeAndVersioning=[[function(a,b){this.targetObject[this.propertyName]=a[b]},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=
a[b++];this.targetObject.needsUpdate=!0},function(a,b){for(var c=this.resolvedProperty,d=0,e=c.length;d!==e;++d)c[d]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,
b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]];this.getValue=function(a,b){this.bind();this.getValue(a,b)};this.setValue=function(a,b){this.bind();this.setValue(a,b)};this._getValue_unbound=this.getValue;this._setValue_unbound=this.setValue;this.path=b;this.parsedPath=d||c.parseTrackName(b);this.node=c.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}c.create=function(a,b,d){return a&&a.isAnimationObjectGroup?
new c.Composite(a,b,d):new c(a,b,d)};c.sanitizeNodeName=function(a){return a.replace(/\s/g,"_").replace(/[\[\]\.:\/"%]/g,"")};c.searchNodeSubtree=function(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(e.name===b||e.uuid===b||(e=this.searchNodeSubtree(e.children,b)))return e}return null};c.findNode=function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return a;if(a.skeleton){var c=a.skeleton.getBoneByName(b);if(void 0!==c)return c}return a.children&&(a=this.searchNodeSubtree(a.children,
b))?a:null};c.prototype._getValue_unavailable=function(){};c.prototype._setValue_unavailable=function(){};c.prototype.getValue_direct=function(a,b){a[b]=this.node[this.propertyName]};c.prototype.getValue_array=function(a,b){for(var c=this.resolvedProperty,e=0,g=c.length;e!==g;++e)a[b++]=c[e]};c.prototype.getValue_arrayElement=function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]};c.prototype.getValue_toArray=function(a,b){this.resolvedProperty.toArray(a,b)};c.prototype.setValue_direct=function(a,
b){this.targetObject[this.propertyName]=a[b]};c.prototype.setValue_direct_setNeedsUpdate=function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.needsUpdate=!0};c.prototype.setValue_direct_setMatrixWorldNeedsUpdate=function(a,b){this.targetObject[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0};c.prototype.setValue_array=function(a,b){for(var c=this.resolvedProperty,e=0,g=c.length;e!==g;++e)c[e]=a[b++]};c.prototype.setValue_array_setNeedsUpdate=function(a,b){for(var c=
this.resolvedProperty,e=0,g=c.length;e!==g;++e)c[e]=a[b++];this.targetObject.needsUpdate=!0};c.prototype.setValue_array_setMatrixWorldNeedsUpdate=function(a,b){for(var c=this.resolvedProperty,e=0,g=c.length;e!==g;++e)c[e]=a[b++];this.targetObject.matrixWorldNeedsUpdate=!0};c.prototype.setValue_arrayElement=function(a,b){this.resolvedProperty[this.propertyIndex]=a[b]};c.prototype.setValue_arrayElement_setNeedsUpdate=function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.needsUpdate=
!0};c.prototype.setValue_arrayElement_setMatrixWorldNeedsUpdate=function(a,b){this.resolvedProperty[this.propertyIndex]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0};c.prototype.setValue_fromArray=function(a,b){this.resolvedProperty.fromArray(a,b)};c.prototype.setValue_fromArray_setNeedsUpdate=function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0};c.prototype.setValue_fromArray_setMatrixWorldNeedsUpdate=function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=
!0};c.prototype.bind=function(){var a=this.node,b=this.parsedPath,d=b.objectName,e=b.propertyName,g=b.propertyIndex;a||(this.node=a=c.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(d){var f=b.objectIndex;switch(d){case "materials":if(!a.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!a.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
this);return}a=a.material.materials;break;case "bones":if(!a.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}a=a.skeleton.bones;for(d=0;d<a.length;d++)if(a[d].name===f){f=d+"";break}break;default:if(void 0===a[d]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}a=a[d]}if(void 0!==f){if(void 0===a[f]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
this,a);return}a=a[f]}}f=a[e];if(void 0===f)console.error("THREE.PropertyBinding: Trying to update property for track: "+b.nodeName+"."+e+" but it wasn't found.",a);else{b=this.Versioning.None;void 0!==a.needsUpdate?(b=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);d=this.BindingType.Direct;if(void 0!==g){if("morphTargetInfluences"===e){if(!a.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
this);return}if(a.geometry.isBufferGeometry){if(!a.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(d=0;d<this.node.geometry.morphAttributes.position.length;d++)if(a.geometry.morphAttributes.position[d].name===g){g=d+"";break}}else{if(!a.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
this);return}for(d=0;d<this.node.geometry.morphTargets.length;d++)if(a.geometry.morphTargets[d].name===g){g=d+"";break}}}d=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=g}else void 0!==f.fromArray&&void 0!==f.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(d=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=e;this.getValue=this.GetterByBindingType[d];this.setValue=this.SetterByBindingTypeAndVersioning[d][b]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+
this.path+" but it wasn't found.")};c.prototype.unbind=function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound};c.parseTrackName=function(){var a="[^"+'\\[\\]\\.:\\/"%'.replace("\\.","")+"]",b=/((?:WC+[\/:])*)/.source.replace("WC",'[^\\[\\]\\.:\\/"%]');a=/(WCOD+)?/.source.replace("WCOD",a);var d=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",'[^\\[\\]\\.:\\/"%]'),e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",'[^\\[\\]\\.:\\/"%]'),g=new RegExp("^"+b+a+d+
e+"$"),f=["material","materials","bones"];return function(a){var b=g.exec(a);if(!b)throw Error("PropertyBinding: Cannot parse trackName: "+a);var d=new c.ParsedPath;d.nodeName=b[2];d.objectName=b[3];d.objectIndex=b[4];d.propertyName=b[5];d.propertyIndex=b[6];b=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==b&&-1!==b){var e=d.nodeName.substring(b+1);-1!==f.indexOf(e)&&(d.nodeName=d.nodeName.substring(0,b),d.objectName=e)}if(null===d.propertyName||0===d.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+
a);return d}}();return c}();(function(c){var a=function(){return function(){}}();c.ParsedPath=a;a=function(a){function b(b,d,f){var e=a.call(this,null,d,f)||this;e.getValue=function(a,b){this.bind();var c=this._bindings[this._targetGroup.nCachedObjects_];void 0!==c&&c.getValue(a,b)};e.setValue=function(a,b){for(var c=this._bindings,d=this._targetGroup.nCachedObjects_,e=c.length;d!==e;++d)c[d].setValue(a,b)};e.parsedPath=f||c.parseTrackName(d);e._targetGroup=b;e._bindings=b.subscribe_(d,e.parsedPath);
return e}r(b,a);b.prototype.bind=function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].bind()};b.prototype.unbind=function(){for(var a=this._bindings,b=this._targetGroup.nCachedObjects_,c=a.length;b!==c;++b)a[b].unbind()};return b}(c);c.Composite=a})(h.PropertyBinding||(h.PropertyBinding={}));h.AnimationObjectGroup=function(){function c(){this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath=[];this.isAnimationObjectGroup=!0;
this.uuid=E.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var a=[];this._indicesByUUID=a;for(var b=0,d=arguments.length;b!==d;++b)a[arguments[b].uuid]=b;this.stats=new c.Stats(this)}c.prototype.add=function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,e=this._indicesByUUID,g=this._paths,f=this._parsedPaths,k=this._bindings,l=k.length,n=void 0,p=0,m=arguments.length;p!==m;++p){var t=arguments[p],q=t.uuid,r=e[q];if(void 0===r){r=b++;e[q]=r;
a.push(t);q=0;for(var w=l;q!==w;++q)k[q].push(new h.PropertyBinding(t,g[q],f[q]))}else if(r<c){n=a[r];var y=--c;w=a[y];e[w.uuid]=r;a[r]=w;e[q]=y;a[y]=t;q=0;for(w=l;q!==w;++q){var B=k[q],z=B[r];B[r]=B[y];void 0===z&&(z=new h.PropertyBinding(t,g[q],f[q]));B[y]=z}}else a[r]!==n&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c};c.prototype.remove=function(){for(var a=
this._objects,b=this.nCachedObjects_,c=this._indicesByUUID,e=this._bindings,g=e.length,f=0,h=arguments.length;f!==h;++f){var l=arguments[f],n=l.uuid,p=c[n];if(void 0!==p&&p>=b){var m=b++,t=a[m];c[t.uuid]=p;a[p]=t;c[n]=m;a[m]=l;l=0;for(n=g;l!==n;++l){t=e[l];var q=t[p];t[p]=t[m];t[m]=q}}}this.nCachedObjects_=b};c.prototype.uncache=function(){for(var a=this._objects,b=a.length,c=this.nCachedObjects_,e=this._indicesByUUID,g=this._bindings,f=g.length,h=0,l=arguments.length;h!==l;++h){var n=arguments[h].uuid,
p=e[n];if(void 0!==p)if(delete e[n],p<c){n=--c;var m=a[n],t=--b,q=a[t];e[m.uuid]=p;a[p]=m;e[q.uuid]=n;a[n]=q;a.pop();m=0;for(q=f;m!==q;++m){var r=g[m],w=r[t];r[p]=r[n];r[n]=w;r.pop()}}else for(t=--b,q=a[t],e[q.uuid]=p,a[p]=q,a.pop(),m=0,q=f;m!==q;++m)r=g[m],r[p]=r[t],r.pop()}this.nCachedObjects_=c};c.prototype.subscribe_=function(a,b){var c=this._bindingsIndicesByPath,e=c[a],g=this._bindings;if(void 0!==e)return g[e];var f=this._paths,k=this._parsedPaths,l=this._objects,n=this.nCachedObjects_,p=Array(l.length);
e=g.length;c[a]=e;f.push(a);k.push(b);g.push(p);c=n;for(e=l.length;c!==e;++c)p[c]=new h.PropertyBinding(l[c],a,b);return p};c.prototype.unsubscribe_=function(a){var b=this._bindingsIndicesByPath,c=b[a];if(void 0!==c){var e=this._paths,g=this._parsedPaths,f=this._bindings,h=f.length-1,l=f[h];b[a[h]]=c;f[c]=l;f.pop();g[c]=g[h];g.pop();e[c]=e[h];e.pop()}};return c}();(function(c){var a=function(){function a(a){this.objects={get total(){return this.scope._objects.length},get inUse(){return this.total-
this.scope.nCachedObjects_}};this.scope=a}Object.defineProperty(a.prototype,"bindingsPerObject",{get:function(){return this.scope._bindings.length},enumerable:!0,configurable:!0});return a}();c.Stats=a})(h.AnimationObjectGroup||(h.AnimationObjectGroup={}));var Xb=function(){function c(a,b,c){void 0===c&&(c=null);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=
this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0;this._mixer=a;this._clip=b;this._localRoot=c;a=b.tracks;b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},g=0;g!==b;++g){var f=a[g].createInterpolant(null);c[g]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b)}c.prototype.play=function(){this._mixer._activateAction(this);
return this};c.prototype.stop=function(){this._mixer._deactivateAction(this);return this.reset()};c.prototype.reset=function(){this.paused=!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()};c.prototype.isRunning=function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)};c.prototype.isScheduled=function(){return this._mixer._isActiveAction(this)};c.prototype.startAt=function(a){this._startTime=
a;return this};c.prototype.setLoop=function(a,b){this.loop=a;this.repetitions=b;return this};c.prototype.setEffectiveWeight=function(a){this.weight=a;this._effectiveWeight=this.enabled?a:0;return this.stopFading()};c.prototype.getEffectiveWeight=function(){return this._effectiveWeight};c.prototype.fadeIn=function(a){return this._scheduleFading(a,0,1)};c.prototype.fadeOut=function(a){return this._scheduleFading(a,1,0)};c.prototype.crossFadeFrom=function(a,b,c){a.fadeOut(b);this.fadeIn(b);if(c){c=this._clip.duration;
var d=a._clip.duration,g=c/d;a.warp(1,d/c,b);this.warp(g,1,b)}return this};c.prototype.crossFadeTo=function(a,b,c){return a.crossFadeFrom(this,b,c)};c.prototype.stopFading=function(){var a=this._weightInterpolant;null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this};c.prototype.setEffectiveTimeScale=function(a){this.timeScale=a;this._effectiveTimeScale=this.paused?0:a;return this.stopWarping()};c.prototype.getEffectiveTimeScale=function(){return this._effectiveTimeScale};
c.prototype.setDuration=function(a){this.timeScale=this._clip.duration/a;return this.stopWarping()};c.prototype.syncWith=function(a){this.time=a.time;this.timeScale=a.timeScale;return this.stopWarping()};c.prototype.halt=function(a){return this.warp(this._effectiveTimeScale,0,a)};c.prototype.warp=function(a,b,c){var d=this._mixer,g=d.time,f=this._timeScaleInterpolant,h=this.timeScale;null===f&&(this._timeScaleInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=
g;d[1]=g+c;f[0]=a/h;f[1]=b/h;return this};c.prototype.stopWarping=function(){var a=this._timeScaleInterpolant;null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a));return this};c.prototype.getMixer=function(){return this._mixer};c.prototype.getClip=function(){return this._clip};c.prototype.getRoot=function(){return this._localRoot||this._mixer._root};c.prototype._update=function(a,b,c,e){if(this.enabled){var d=this._startTime;if(null!==d){b=(a-d)*c;if(0>b||0===c)return;
this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;d=this._propertyBindings;for(var f=0,h=b.length;f!==h;++f)b[f].evaluate(c),d[f].accumulate(e,a)}}else this._updateWeight(a)};c.prototype._updateWeight=function(a){var b=0;if(this.enabled){b=this.weight;var c=this._weightInterpolant;if(null!==c){var e=c.evaluate(a)[0];b*=e;a>c.parameterPositions[1]&&(this.stopFading(),0===e&&(this.enabled=!1))}}return this._effectiveWeight=
b};c.prototype._updateTimeScale=function(a){var b=0;if(!this.paused){b=this.timeScale;var c=this._timeScaleInterpolant;if(null!==c){var e=c.evaluate(a)[0];b*=e;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b};c.prototype._updateTime=function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,e=this.loop,g=this._loopCount;if(2200===e)a:{if(-1===g&&(this._loopCount=0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>
b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{e=2202===e;-1===g&&(0<=a?(g=0,this._setEndings(!0,0===this.repetitions,e)):this._setEndings(0===this.repetitions,!0,e));if(b>=c||0>b){var f=Math.floor(b/c);b-=c*f;g+=Math.abs(f);var h=this.repetitions-g;0>h?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<a?1:-1})):
(0===h?(a=0>a,this._setEndings(a,!a,e)):this._setEndings(!1,!1,e),this._loopCount=g,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(e&&1===(g&1))return this.time=b,c-b}return this.time=b};c.prototype._setEndings=function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)};c.prototype._scheduleFading=function(a,b,c){var d=this._mixer,g=d.time,f=this._weightInterpolant;
null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=g;f[0]=b;d[1]=g+a;f[1]=c;return this};return c}();(function(c){var a=function(){return function(){}}();c.InterpolantSettings=a})(Xb||(Xb={}));var pf=function(c){function a(a){var b=c.call(this)||this;b._accuIndex=0;b.time=0;b.timeScale=1;b._controlInterpolantsResultBuffer=new Float32Array(1);b._root=a;b._initMemoryManager();return b}r(a,c);a.prototype._bindAction=function(a,c){var b=a._localRoot||
this._root,d=a._clip.tracks,f=d.length,k=a._propertyBindings;a=a._interpolants;var l=b.uuid,n=this._bindingsByRootAndName,p=n[l];void 0===p&&(p={},n[l]=p);for(n=0;n!==f;++n){var m=d[n],q=m.name,r=p[q];if(void 0===r){r=k[n];if(void 0!==r){null===r._cacheIndex&&(++r.referenceCount,this._addInactiveBinding(r,l,q));continue}r=new Md(h.PropertyBinding.create(b,q,c&&c._propertyBindings[n].binding.parsedPath),m.ValueTypeName,m.getValueSize());++r.referenceCount;this._addInactiveBinding(r,l,q)}k[n]=r;a[n].resultBuffer=
r.buffer}};a.prototype._activateAction=function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,g=this._actionsByClip[c];this._bindAction(a,g&&g.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(g=b.length;c!==g;++c){var f=b[c];0===f.useCount++&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(a)}};a.prototype._deactivateAction=function(a){if(this._isActiveAction(a)){for(var b=a._propertyBindings,
c=0,g=b.length;c!==g;++c){var f=b[c];0===--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(a)}};a.prototype._initMemoryManager=function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},
get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}};a.prototype._isActiveAction=function(a){a=a._cacheIndex;return null!==a&&a<this._nActiveActions};a.prototype._addInactiveAction=function(a,c,e){var b=this._actions,d=this._actionsByClip,h=d[c];void 0===h?(h={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,d[c]=h):(c=h.knownActions,a._byClipCacheIndex=c.length,c.push(a));a._cacheIndex=
b.length;b.push(a);h.actionByRoot[e]=a};a.prototype._removeInactiveAction=function(a){var b=this._actions,c=b[b.length-1],g=a._cacheIndex;c._cacheIndex=g;b[g]=c;b.pop();a._cacheIndex=null;b=a._clip.uuid;c=this._actionsByClip;g=c[b];var f=g.knownActions,h=f[f.length-1],l=a._byClipCacheIndex;h._byClipCacheIndex=l;f[l]=h;f.pop();a._byClipCacheIndex=null;delete g.actionByRoot[(a._localRoot||this._root).uuid];0===f.length&&delete c[b];this._removeInactiveBindingsForAction(a)};a.prototype._removeInactiveBindingsForAction=
function(a){a=a._propertyBindings;for(var b=0,c=a.length;b!==c;++b){var g=a[b];0===--g.referenceCount&&this._removeInactiveBinding(g)}};a.prototype._lendAction=function(a){var b=this._actions,c=a._cacheIndex,g=this._nActiveActions++,f=b[g];a._cacheIndex=g;b[g]=a;f._cacheIndex=c;b[c]=f};a.prototype._takeBackAction=function(a){var b=this._actions,c=a._cacheIndex,g=--this._nActiveActions,f=b[g];a._cacheIndex=g;b[g]=a;f._cacheIndex=c;b[c]=f};a.prototype._addInactiveBinding=function(a,c,e){var b=this._bindingsByRootAndName,
d=b[c],h=this._bindings;void 0===d&&(d={},b[c]=d);d[e]=a;a._cacheIndex=h.length;h.push(a)};a.prototype._removeInactiveBinding=function(a){var b=this._bindings,c=a.binding,g=c.rootNode.uuid;c=c.path;var f=this._bindingsByRootAndName,h=f[g],l=b[b.length-1];a=a._cacheIndex;l._cacheIndex=a;b[a]=l;b.pop();delete h[c];a:{for(var n in h)break a;delete f[g]}};a.prototype._lendBinding=function(a){var b=this._bindings,c=a._cacheIndex,g=this._nActiveBindings++,f=b[g];a._cacheIndex=g;b[g]=a;f._cacheIndex=c;b[c]=
f};a.prototype._takeBackBinding=function(a){var b=this._bindings,c=a._cacheIndex,g=--this._nActiveBindings,f=b[g];a._cacheIndex=g;b[g]=a;f._cacheIndex=c;b[c]=f};a.prototype._lendControlInterpolant=function(){var a=this._controlInterpolants,c=this._nActiveControlInterpolants++,e=a[c];void 0===e&&(e=new Qb(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),e._cachedIndex=c,a[c]=e);return e};a.prototype._takeBackControlInterpolant=function(a){var b=this._controlInterpolants,
c=a._cachedIndex,g=--this._nActiveControlInterpolants,f=b[g];a._cachedIndex=g;b[g]=a;f._cachedIndex=c;b[c]=f};a.prototype.clipAction=function(a,c){var b=c||this._root,d=b.uuid;b="string"===typeof a?h.AnimationClip.findByName(b,a):a;a=null!==b?b.uuid:a;var f=this._actionsByClip[a],k=null;if(void 0!==f){k=f.actionByRoot[d];if(void 0!==k)return k;k=f.knownActions[0];null===b&&(b=k._clip)}if(null===b)return null;c=new Xb(this,b,c);this._bindAction(c,k);this._addInactiveAction(c,a,d);return c};a.prototype.existingAction=
function(a,c){var b=c||this._root;c=b.uuid;b="string"===typeof a?h.AnimationClip.findByName(b,a):a;a=this._actionsByClip[b?b.uuid:a];return void 0!==a?a.actionByRoot[c]||null:null};a.prototype.stopAllAction=function(){for(var a=this._actions,c=this._nActiveActions,e=this._bindings,g=this._nActiveBindings,f=this._nActiveBindings=this._nActiveActions=0;f!==c;++f)a[f].reset();for(f=0;f!==g;++f)e[f].useCount=0;return this};a.prototype.update=function(a){a*=this.timeScale;for(var b=this._actions,c=this._nActiveActions,
g=this.time+=a,f=Math.sign(a),h=this._accuIndex^=1,l=0;l!==c;++l)b[l]._update(g,a,f,h);a=this._bindings;b=this._nActiveBindings;for(l=0;l!==b;++l)a[l].apply(h);return this};a.prototype.getRoot=function(){return this._root};a.prototype.uncacheClip=function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,g=c[a];if(void 0!==g){g=g.knownActions;for(var f=0,h=g.length;f!==h;++f){var l=g[f];this._deactivateAction(l);var n=l._cacheIndex,p=b[b.length-1];l._cacheIndex=null;l._byClipCacheIndex=null;
p._cacheIndex=n;b[n]=p;b.pop();this._removeInactiveBindingsForAction(l)}delete c[a]}};a.prototype.uncacheRoot=function(a){a=a.uuid;var b=this._actionsByClip;for(g in b){var c=b[g].actionByRoot[a];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}var g=this._bindingsByRootAndName[a];if(void 0!==g)for(var f in g)a=g[f],a.restoreOriginalState(),this._removeInactiveBinding(a)};a.prototype.uncacheAction=function(a,c){a=this.existingAction(a,c);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))};
return a}(ma),Nd=function(){function c(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}c.prototype.clone=function(){return new c(void 0===this.value.clone?this.value:this.value.clone())};return c}(),qf=function(c){function a(){var a=c.call(this)||this;a.type="InstancedBufferGeometry";a.isInstancedBufferGeometry=!0;a.maxInstancedCount=void 0;return a}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.maxInstancedCount=
a.maxInstancedCount;return this};a.prototype.clone=function(){return(new a).copy(this)};return a}(h.BufferGeometry),rf=function(){function c(a,b,c,e){this.uuid=E.generateUUID();this.isInterleavedBufferAttribute=!0;this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===e}Object.defineProperty(c.prototype,"count",{get:function(){return this.data.count},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"array",{get:function(){return this.data.array},enumerable:!0,configurable:!0});
c.prototype.setX=function(a,b){this.data.array[a*this.data.stride+this.offset]=b;return this};c.prototype.setY=function(a,b){this.data.array[a*this.data.stride+this.offset+1]=b;return this};c.prototype.setZ=function(a,b){this.data.array[a*this.data.stride+this.offset+2]=b;return this};c.prototype.setW=function(a,b){this.data.array[a*this.data.stride+this.offset+3]=b;return this};c.prototype.getX=function(a){return this.data.array[a*this.data.stride+this.offset]};c.prototype.getY=function(a){return this.data.array[a*
this.data.stride+this.offset+1]};c.prototype.getZ=function(a){return this.data.array[a*this.data.stride+this.offset+2]};c.prototype.getW=function(a){return this.data.array[a*this.data.stride+this.offset+3]};c.prototype.setXY=function(a,b,c){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;return this};c.prototype.setXYZ=function(a,b,c,e){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=e;return this};c.prototype.setXYZW=
function(a,b,c,e,g){a=a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=e;this.data.array[a+3]=g;return this};return c}(),Od=function(){function c(a,b){this.uuid=E.generateUUID();this.dynamic=!1;this.updateRange={offset:0,count:-1};this.version=0;this.isInterleavedBuffer=!0;this.onUploadCallback=function(){};this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0}Object.defineProperty(c.prototype,"needsUpdate",{set:function(a){!0===a&&this.version++},
enumerable:!0,configurable:!0});c.prototype.setArray=function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0;this.array=a};c.prototype.setDynamic=function(a){this.dynamic=a;return this};c.prototype.copy=function(a){this.array=new a.array.constructor(a.array);this.count=a.count;this.stride=a.stride;this.dynamic=a.dynamic;return this};c.prototype.copyAt=function(a,b,c){a*=this.stride;c*=b.stride;for(var d=
0,g=this.stride;d<g;d++)this.array[a+d]=b.array[c+d];return this};c.prototype.set=function(a,b){void 0===b&&(b=0);this.array.set(a,b);return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.onUpload=function(a){this.onUploadCallback=a;return this};return c}(),sf=function(c){function a(a,d,e){void 0===e&&(e=1);a=c.call(this,a,d)||this;a.isInstancedInterleavedBuffer=!0;a.meshPerAttribute=e;return a}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.meshPerAttribute=
a.meshPerAttribute;return this};return a}(Od),tf=function(c){function a(a,d,e){void 0===e&&(e=1);a=c.call(this,a,d)||this;a.isInstancedBufferAttribute=!0;a.meshPerAttribute=e;return a}r(a,c);a.prototype.copy=function(a){c.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return this};return a}(G);h.Raycaster=function(){function c(a,b,c,e){void 0===c&&(c=0);void 0===e&&(e=Infinity);this.linePrecision=1;this.ray=new va(a,b);this.near=c;this.far=e;this.params={Mesh:{},Line:{},LOD:{},
Points:{threshold:1},Sprite:{},get PointCloud(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}}c.prototype.set=function(a,b){this.ray.set(a,b)};c.prototype.setFromCamera=function(a,b){b&&b.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)/(b.near-b.far)).unproject(b),
this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")};c.prototype.intersectObject=function(a,b){var d=[];c.intersectObject(a,this,d,b);d.sort(c.ascSort);return d};c.prototype.intersectObjects=function(a,b){var d=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),d;for(var e=0,g=a.length;e<g;e++)c.intersectObject(a[e],this,d,b);d.sort(c.ascSort);return d};return c}();(function(c){function a(b,
c,e,g){if(!1!==b.visible&&(b.raycast(c,e),!0===g)){b=b.children;g=0;for(var d=b.length;g<d;g++)a(b[g],c,e,!0)}}c.ascSort=function(a,c){return a.distance-c.distance};c.intersectObject=a})(h.Raycaster||(h.Raycaster={}));var uf=function(){function c(a){void 0===a&&(a=!0);this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1;this.autoStart=a}c.prototype.start=function(){this.oldTime=this.startTime=("undefined"===typeof performance?Date:performance).now();this.elapsedTime=0;this.running=!0};c.prototype.stop=
function(){this.getElapsedTime();this.autoStart=this.running=!1};c.prototype.getElapsedTime=function(){this.getDelta();return this.elapsedTime};c.prototype.getDelta=function(){var a=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var b=("undefined"===typeof performance?Date:performance).now();a=(b-this.oldTime)/1E3;this.oldTime=b;this.elapsedTime+=a}return a};return c}(),vf=function(){function c(a,b,c){void 0===a&&(a=1);void 0===b&&(b=0);void 0===c&&(c=0);this.radius=a;this.phi=
b;this.theta=c}c.prototype.set=function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.radius=a.radius;this.phi=a.phi;this.theta=a.theta;return this};c.prototype.makeSafe=function(){this.phi=Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));return this};c.prototype.setFromVector3=function(a){this.radius=a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(E.clamp(a.y/
this.radius,-1,1)));return this};return c}(),wf=function(){function c(a,b,c){void 0===a&&(a=1);void 0===b&&(b=0);void 0===c&&(c=0);this.radius=a;this.theta=b;this.y=c}c.prototype.set=function(a,b,c){this.radius=a;this.theta=b;this.y=c;return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.radius=a.radius;this.theta=a.theta;this.y=a.y;return this};c.prototype.setFromVector3=function(a){this.radius=Math.sqrt(a.x*a.x+a.z*a.z);this.theta=Math.atan2(a.x,a.z);
this.y=a.y;return this};return c}(),Pd=function(){function c(a,b){this.min=void 0!==a?a:new y(Infinity,Infinity);this.max=void 0!==b?b:new y(-Infinity,-Infinity)}c.prototype.set=function(a,b){this.min.copy(a);this.max.copy(b);return this};c.prototype.setFromPoints=function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this};c.prototype.setFromCenterAndSize=function(a,b){b=(new y).copy(b).multiplyScalar(.5);this.min.copy(a).sub(b);this.max.copy(a).add(b);return this};
c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(a){this.min.copy(a.min);this.max.copy(a.max);return this};c.prototype.makeEmpty=function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this};c.prototype.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y};c.prototype.getCenter=function(a){a=a||new y;return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)};c.prototype.getSize=function(a){a=a||new y;
return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)};c.prototype.expandByPoint=function(a){this.min.min(a);this.max.max(a);return this};c.prototype.expandByVector=function(a){this.min.sub(a);this.max.add(a);return this};c.prototype.expandByScalar=function(a){this.min.addScalar(-a);this.max.addScalar(a);return this};c.prototype.containsPoint=function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0};c.prototype.containsBox=function(a){return this.min.x<=a.min.x&&
a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y};c.prototype.getParameter=function(a,b){return(b||new y).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))};c.prototype.intersectsBox=function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0};c.prototype.clampPoint=function(a,b){return(b||new y).copy(a).clamp(this.min,this.max)};c.prototype.distanceToPoint=function(a){return(new y).copy(a).clamp(this.min,
this.max).sub(a).length()};c.prototype.intersect=function(a){this.min.max(a.min);this.max.min(a.max);return this};c.prototype.union=function(a){this.min.min(a.min);this.max.max(a.max);return this};c.prototype.translate=function(a){this.min.add(a);this.max.add(a);return this};c.prototype.equals=function(a){return a.min.equals(this.min)&&a.max.equals(this.max)};return c}(),xf=function(c){function a(a){var b=c.call(this)||this;b.isImmediateRenderObject=!0;b.material=a;b.render=function(){};return b}
r(a,c);a.prototype.clone=function(){return(new a(this.material)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};return a}(h.Object3D),yf=function(c){function a(b,d,e,g){void 0===d&&(d=1);void 0===e&&(e=16711680);void 0===g&&(g=1);e=c.call(this,a.constructGeom(b),new L({color:e,linewidth:g}))||this;e.object=b;e.size=d;e.matrixAutoUpdate=!1;e.update();return e}r(a,c);a.constructGeom=function(a){var b=0;(a=a.geometry)&&a.isGeometry?b=3*a.faces.length:a&&a.isBufferGeometry&&
(b=a.attributes.normal.count);a=new h.BufferGeometry;b=new w(6*b,3);a.addAttribute("position",b);return a};a.prototype.update=function(){var a=new q,c=new q,e=new Z,g=["a","b","c"];this.object.updateMatrixWorld(!0);e.getNormalMatrix(this.object.matrixWorld);var f=this.object.matrixWorld,h=this.geometry.attributes.position,l=this.object.geometry;if(l&&l.isGeometry)for(var n=l.vertices,p=l.faces,m=l=0,t=p.length;m<t;m++)for(var r=p[m],u=0,w=r.vertexNormals.length;u<w;u++){var y=r.vertexNormals[u];a.copy(n[r[g[u]]]).applyMatrix4(f);
c.copy(y).applyMatrix3(e).normalize().multiplyScalar(this.size).add(a);h.setXYZ(l,a.x,a.y,a.z);l+=1;h.setXYZ(l,c.x,c.y,c.z);l+=1}else if(l&&l.isBufferGeometry)for(g=l.attributes.position,n=l.attributes.normal,u=l=0,w=g.count;u<w;u++)a.set(g.getX(u),g.getY(u),g.getZ(u)).applyMatrix4(f),c.set(n.getX(u),n.getY(u),n.getZ(u)),c.applyMatrix3(e).normalize().multiplyScalar(this.size).add(a),h.setXYZ(l,a.x,a.y,a.z),l+=1,h.setXYZ(l,c.x,c.y,c.z),l+=1;h.needsUpdate=!0};return a}(M),zf=function(c){function a(a,
d){var b=c.call(this)||this;b.light=a;b.light.updateMatrixWorld();b.matrix=a.matrixWorld;b.matrixAutoUpdate=!1;b.color=d;a=new h.BufferGeometry;d=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var g=0,f=1;32>g;g++,f++){var k=g/32*Math.PI*2,l=f/32*Math.PI*2;d.push(Math.cos(k),Math.sin(k),1,Math.cos(l),Math.sin(l),1)}a.addAttribute("position",new w(d,3));d=new L({fog:!1});b.cone=new M(a,d);b.add(b.cone);b.update();return b}r(a,c);a.prototype.clone=function(){return(new a(this.light,
this.color)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};a.prototype.update=function(){var a=new q,c=new q;this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1E3,g=e*Math.tan(this.light.angle);this.cone.scale.set(g,g,e);a.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(c.sub(a));
void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};return a}(h.Object3D),Qd=function(c){function a(b){var d=c.call(this,a.constructGeom(b),new L({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}))||this;d.root=b;d.bones=a.tempBones;d.matrix=b.matrixWorld;d.matrixAutoUpdate=!1;return d}r(a,c);a.constructGeom=function(b){b=vc(b);for(var c=new h.BufferGeometry,e=[],g=[],f=new h.Color(0,0,1),k=new h.Color(0,1,0),l=0;l<b.length;l++){var n=
b[l];n.parent&&n.parent.isBone&&(e.push(0,0,0),e.push(0,0,0),g.push(f.r,f.g,f.b),g.push(k.r,k.g,k.b))}c.addAttribute("position",new w(e,3));c.addAttribute("color",new w(g,3));a.tempBones=b;return c};a.prototype.updateMatrixWorld=function(a){var b=new q,e=new F,g=new F,f=this.bones,h=this.geometry,l=h.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var n=0,p=0;n<f.length;n++){var m=f[n];m.parent&&m.parent.isBone&&(e.multiplyMatrices(g,m.matrixWorld),b.setFromMatrixPosition(e),l.setXYZ(p,
b.x,b.y,b.z),e.multiplyMatrices(g,m.parent.matrixWorld),b.setFromMatrixPosition(e),l.setXYZ(p+1,b.x,b.y,b.z),p+=2)}h.getAttribute("position").needsUpdate=!0;c.prototype.updateMatrixWorld.call(this,a)};return a}(M),Af=function(c){function a(a,d,e){d=c.call(this,new Ta(d,4,2),new pa({wireframe:!0,fog:!1}))||this;d.light=a;d.light.updateMatrixWorld();d.color=e;d.matrix=d.light.matrixWorld;d.matrixAutoUpdate=!1;d.update();return d}r(a,c);a.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};
a.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};return a}(fa),Bf=function(c){function a(a,d){var b=c.call(this)||this;b.light=a;b.light.updateMatrixWorld();b.matrix=a.matrixWorld;b.matrixAutoUpdate=!1;b.color=d;a=new L({fog:!1});d=new h.BufferGeometry;d.addAttribute("position",new G(new Float32Array(15),3));b.line=new ka(d,a);b.add(b.line);b.update();return b}r(a,c);a.prototype.clone=function(){return(new a(this.light,
this.color)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};a.prototype.update=function(){var a=.5*this.light.width,c=.5*this.light.height,e=this.line.geometry.attributes.position,g=e.array;g[0]=a;g[1]=-c;g[2]=0;g[3]=a;g[4]=c;g[5]=0;g[6]=-a;g[7]=c;g[8]=0;g[9]=-a;g[10]=-c;g[11]=0;g[12]=a;g[13]=-c;g[14]=0;e.needsUpdate=!0;void 0!==this.color?this.line.material.color.set(this.color):
this.line.material.color.copy(this.light.color)};return a}(h.Object3D),Cf=function(c){function a(a,d,e){var b=c.call(this)||this;b.size=d;b.light=a;b.light.updateMatrixWorld();b.matrix=a.matrixWorld;b.matrixAutoUpdate=!1;b.color=e;a=new Qa(d);a.rotateY(.5*Math.PI);b.material=new pa({wireframe:!0,fog:!1});void 0===b.color&&(b.material.vertexColors=2);d=a.getAttribute("position");d=new Float32Array(3*d.count);a.addAttribute("color",new G(d,3));b.add(new fa(a,b.material));b.update();return b}r(a,c);
a.prototype.clone=function(){return(new a(this.light,this.size,this.color)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};a.prototype.update=function(){var a=new q,c=new h.Color,e=new h.Color,g=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var f=g.geometry.getAttribute("color");c.copy(this.light.color);e.copy(this.light.groundColor);
for(var k=0,l=f.count;k<l;k++){var n=k<l/2?c:e;f.setXYZ(k,n.r,n.g,n.b)}f.needsUpdate=!0}g.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate())};return a}(h.Object3D),Rd=function(c){function a(b,d,e,g){void 0===b&&(b=10);void 0===d&&(d=10);void 0===e&&(e=4473924);void 0===g&&(g=8947848);return c.call(this,a.constructGeom(d,b,new h.Color(e),new h.Color(g)),{vertexColors:2})||this}r(a,c);a.constructGeom=function(a,c,e,g){var b=a/2,d=c/a,l=c/2;c=[];for(var n=[],p=0,m=0,q=-l;p<=a;p++,q+=d){c.push(-l,
0,q,l,0,q);c.push(q,0,-l,q,0,l);var r=p===b?e:g;r.toArray(n,m);m+=3;r.toArray(n,m);m+=3;r.toArray(n,m);m+=3;r.toArray(n,m);m+=3}a=new h.BufferGeometry;a.addAttribute("position",new w(c,3));a.addAttribute("color",new w(n,3));return a};return a}(M),Df=function(c){function a(b,d,e,g,f,k){void 0===b&&(b=10);void 0===d&&(d=16);void 0===e&&(e=8);void 0===g&&(g=64);void 0===f&&(f=4473924);void 0===k&&(k=8947848);return c.call(this,a.constructGeom(b,d,e,g,new h.Color(f),new h.Color(k)),new L({vertexColors:2}))||
this}r(a,c);a.constructGeom=function(a,c,e,g,f,k){var b=[],d=[],p;for(p=0;p<=c;p++){var m=p/c*2*Math.PI;var q=Math.sin(m)*a;m=Math.cos(m)*a;b.push(0,0,0);b.push(q,0,m);var r=p&1?f:k;d.push(r.r,r.g,r.b);d.push(r.r,r.g,r.b)}for(p=0;p<=e;p++){r=p&1?f:k;var u=a-a/e*p;for(c=0;c<g;c++)m=c/g*2*Math.PI,q=Math.sin(m)*u,m=Math.cos(m)*u,b.push(q,0,m),d.push(r.r,r.g,r.b),m=(c+1)/g*2*Math.PI,q=Math.sin(m)*u,m=Math.cos(m)*u,b.push(q,0,m),d.push(r.r,r.g,r.b)}a=new h.BufferGeometry;a.addAttribute("position",new w(b,
3));a.addAttribute("color",new w(d,3));return a};return a}(M),Ef=function(c){function a(b,d,e,g){void 0===d&&(d=1);void 0===e&&(e=16776960);void 0===g&&(g=1);e=c.call(this,a.constructGeom(b),new L({color:e,linewidth:g}))||this;e.size=d;e.object=b;e.matrixAutoUpdate=!1;e.update();return e}r(a,c);a.constructGeom=function(a){var b=0;(a=a.geometry)&&a.isGeometry?b=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");a=new h.BufferGeometry;
b=new w(6*b,3);a.addAttribute("position",b);return a};a.prototype.update=function(){var a=new q,c=new q,e=new Z;this.object.updateMatrixWorld(!0);e.getNormalMatrix(this.object.matrixWorld);var g=this.object.matrixWorld,f=this.geometry.attributes.position,h=this.object.geometry,l=h.vertices;h=h.faces;for(var n=0,p=0,m=h.length;p<m;p++){var r=h[p],v=r.normal;a.copy(l[r.a]).add(l[r.b]).add(l[r.c]).divideScalar(3).applyMatrix4(g);c.copy(v).applyMatrix3(e).normalize().multiplyScalar(this.size).add(a);
f.setXYZ(n,a.x,a.y,a.z);n+=1;f.setXYZ(n,c.x,c.y,c.z);n+=1}f.needsUpdate=!0};return a}(M),Ff=function(c){function a(a,d,e){void 0===d&&(d=1);var b=c.call(this)||this;b.size=d;b.light=a;b.light.updateMatrixWorld();b.matrix=a.matrixWorld;b.matrixAutoUpdate=!1;b.color=e;a=new h.BufferGeometry;a.addAttribute("position",new w([-d,d,0,d,d,0,d,-d,0,-d,-d,0,-d,d,0],3));d=new L({fog:!1});b.lightPlane=new ka(a,d);b.add(b.lightPlane);a=new h.BufferGeometry;a.addAttribute("position",new w([0,0,0,0,0,1],3));b.targetLine=
new ka(a,d);b.add(b.targetLine);b.update();return b}r(a,c);a.prototype.clone=function(){return(new a(this.light,this.size,this.color)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};a.prototype.update=function(){var a=new q,c=new q,e=new q;a.setFromMatrixPosition(this.light.matrixWorld);c.setFromMatrixPosition(this.light.target.matrixWorld);
e.subVectors(c,a);this.lightPlane.lookAt(e);void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color));this.targetLine.lookAt(e);this.targetLine.scale.z=e.length()};return a}(h.Object3D),Gf=function(c){function a(b){var d=c.call(this,a.constructGeom(),new L({color:16777215,vertexColors:1}))||this;d.camera=b;d.camera.updateProjectionMatrix&&
d.camera.updateProjectionMatrix();d.matrix=b.matrixWorld;d.matrixAutoUpdate=!1;d.pointMap=a.tempPointMap;d.update();return d}r(a,c);a.constructGeom=function(){function b(a,b,d){c(a,d);c(b,d)}function c(a,b){g.push(0,0,0);f.push(b.r,b.g,b.b);void 0===k[a]&&(k[a]=[]);k[a].push(g.length/3-1)}var e=new h.BufferGeometry;new L({color:16777215,vertexColors:1});var g=[],f=[],k={},l=new h.Color(16755200),n=new h.Color(16711680),p=new h.Color(43775),m=new h.Color(16777215),q=new h.Color(3355443);b("n1","n2",
l);b("n2","n4",l);b("n4","n3",l);b("n3","n1",l);b("f1","f2",l);b("f2","f4",l);b("f4","f3",l);b("f3","f1",l);b("n1","f1",l);b("n2","f2",l);b("n3","f3",l);b("n4","f4",l);b("p","n1",n);b("p","n2",n);b("p","n3",n);b("p","n4",n);b("u1","u2",p);b("u2","u3",p);b("u3","u1",p);b("c","t",m);b("p","c",q);b("cn1","cn2",q);b("cn3","cn4",q);b("cf1","cf2",q);b("cf3","cf4",q);e.addAttribute("position",new w(g,3));e.addAttribute("color",new w(f,3));a.tempPointMap=k;return e};a.prototype.update=function(){function a(a,
b,d,h){c.set(b,d,h).unproject(e);a=f[a];if(void 0!==a)for(b=g.getAttribute("position"),d=0,h=a.length;d<h;d++)b.setXYZ(a[d],c.x,c.y,c.z)}var c=new q,e=new h.Camera;var g=this.geometry;var f=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1",-1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,
-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);g.getAttribute("position").needsUpdate=!0};return a}(M),Sd=function(c){function a(b,d){void 0===d&&(d=16776960);d=c.call(this,a.constructGeom(),new L({color:d}))||this;d.object=b;d.matrixAutoUpdate=!1;d.update();return d}r(a,c);a.constructGeom=function(){var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),c=new Float32Array(24),e=new h.BufferGeometry;e.setIndex(new G(a,1));e.addAttribute("position",
new G(c,3));return e};a.prototype.update=function(a){var b=new na;void 0!==a&&console.warn("THREE.BoxHelper: .update() has no longer arguments.");void 0!==this.object&&b.setFromObject(this.object);if(!b.isEmpty()){a=b.min;b=b.max;var c=this.geometry.attributes.position,g=c.array;g[0]=b.x;g[1]=b.y;g[2]=b.z;g[3]=a.x;g[4]=b.y;g[5]=b.z;g[6]=a.x;g[7]=a.y;g[8]=b.z;g[9]=b.x;g[10]=a.y;g[11]=b.z;g[12]=b.x;g[13]=b.y;g[14]=a.z;g[15]=a.x;g[16]=b.y;g[17]=a.z;g[18]=a.x;g[19]=a.y;g[20]=a.z;g[21]=b.x;g[22]=a.y;g[23]=
a.z;c.needsUpdate=!0;this.geometry.computeBoundingSphere()}};a.prototype.setFromObject=function(a){this.object=a;this.update();return this};return a}(M),Hf=function(c){function a(a,d){void 0===d&&(d=16776960);var b=c.call(this,a,d)||this;b.type="Box3Helper";b.box=a;a=d;d=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var g=new h.BufferGeometry;g.setIndex(new G(d,1));g.addAttribute("position",new w([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3));M.call(b,g,new L({color:a}));
b.geometry.computeBoundingSphere();return b}r(a,c);a.prototype.updateMatrixWorld=function(a){var b=this.box;b.isEmpty()||(b.getCenter(this.position),b.getSize(this.scale),this.scale.multiplyScalar(.5),c.prototype.updateMatrixWorld.call(this,a))};return a}(M),If=function(c){function a(b,d,e){void 0===d&&(d=1);void 0===e&&(e=16776960);var g=c.call(this,a.constructGeom(),new L({color:e}))||this;g.type="PlaneHelper";g.plane=b;g.size=d;b=e;d=new h.BufferGeometry;d.addAttribute("position",new w([1,1,1,
-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3));d.computeBoundingSphere();g.add(new fa(d,new pa({color:b,opacity:.2,transparent:!0,depthWrite:!1})));return g}r(a,c);a.constructGeom=function(){var a=new h.BufferGeometry;a.addAttribute("position",new w([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3));a.computeBoundingSphere();return a};a.prototype.updateMatrixWorld=function(a){var b=-this.plane.constant;1E-8>Math.abs(b)&&(b=1E-8);this.scale.set(.5*this.size,.5*this.size,b);this.lookAt(this.plane.normal);
c.prototype.updateMatrixWorld.call(this,a)};return a}(ka),Ya,Yb,Jf=function(c){function a(a,d,e,g,f,k){void 0===e&&(e=1);void 0===g&&(g=16776960);void 0===f&&(f=.2*e);void 0===k&&(k=.2*f);var b=c.call(this)||this;b.dir=a;b.origin=d;b.length=e;b.color=g;b.headLength=f;b.headWidth=k;void 0===Ya&&(Ya=new h.BufferGeometry,Ya.addAttribute("position",new w([0,0,0,0,1,0],3)),Yb=new Ga(0,.5,1,5,1),Yb.translate(0,-.5,0));b.position.copy(d);b.line=new ka(Ya,new L({color:g}));b.line.matrixAutoUpdate=!1;b.add(b.line);
b.cone=new fa(Yb,new pa({color:g}));b.cone.matrixAutoUpdate=!1;b.add(b.cone);b.setDirection(a);b.setLength(e,f,k);return b}r(a,c);a.prototype.clone=function(){return(new a(this.dir,this.origin,this.length,this.color,this.headLength,this.headWidth)).copy(this)};a.prototype.copy=function(a){c.prototype.copy.call(this,a);return this};a.prototype.setDirection=function(a){var b=new q;.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(b.set(a.z,0,-a.x).normalize(),a=Math.acos(a.y),
this.quaternion.setFromAxisAngle(b,a))};a.prototype.setLength=function(a,c,e){void 0===c&&(c=.2*a);void 0===e&&(e=.2*c);this.line.scale.set(1,Math.max(0,a-c),1);this.line.updateMatrix();this.cone.scale.set(e,c,e);this.cone.position.y=a;this.cone.updateMatrix()};a.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};return a}(h.Object3D),Td=function(c){function a(b){void 0===b&&(b=1);return c.call(this,a.constructGeom(b),{vertexColors:2})||this}r(a,c);a.constructGeom=
function(a){a=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a];var b=new h.BufferGeometry;b.addAttribute("position",new w(a,3));b.addAttribute("color",new w([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));return b};return a}(M);(function(c){c.createMultiMaterialObject=function(a,b){for(var c=new sb,e=0,g=b.length;e<g;e++)c.add(new fa(a,b[e]));return c};c.detach=function(a,b,c){a.applyMatrix(b.matrixWorld);b.remove(a);c.add(a)};c.attach=function(a,b,c){a.applyMatrix((new F).getInverse(c.matrixWorld));b.remove(a);
c.add(a)}})(h.SceneUtils||(h.SceneUtils={}));h.Curve.create=function(c,a){console.log("THREE.Curve.create() has been deprecated");c.prototype=Object.create(h.Curve.prototype);c.prototype.constructor=c;c.prototype.getPoint=a;return c};Object.assign(h.CurvePath.prototype,{createPointsGeometry:function(c){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");c=this.getPoints(c);return this.createGeometry(c)},createSpacedPointsGeometry:function(c){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
c=this.getSpacedPoints(c);return this.createGeometry(c)},createGeometry:function(c){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var a=new h.Geometry,b=0,d=c.length;b<d;b++){var e=c[b];a.vertices.push(new q(e.x,e.y,e.z||0))}return a}});Object.assign(h.Path.prototype,{fromPoints:function(c){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(c)}});wc.prototype=Object.create(h.CatmullRomCurve3.prototype);
xc.prototype=Object.create(h.CatmullRomCurve3.prototype);db.prototype=Object.create(h.CatmullRomCurve3.prototype);Object.assign(db.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Rd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};
Qd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Ub.prototype,{extractUrlBase:function(c){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return Vb.extractUrlBase(c)}});Object.assign(Pd.prototype,{center:function(c){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(c)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");
return this.isEmpty()},isIntersectionBox:function(c){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(c)},size:function(c){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(c)}});Object.assign(na.prototype,{center:function(c){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(c)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");
return this.isEmpty()},isIntersectionBox:function(c){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(c)},isIntersectionSphere:function(c){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(c)},size:function(c){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(c)}});Fa.prototype.center=function(c){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");
return this.getCenter(c)};Object.assign(E,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(c){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return E.floorPowerOfTwo(c)},nextPowerOfTwo:function(c){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return E.ceilPowerOfTwo(c)}});Object.assign(Z.prototype,{flattenToArrayOffset:function(c,
a){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(c,a)},multiplyVector3:function(c){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return c.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(c){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");
return this.applyToBufferAttribute(c)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(F.prototype,{extractPosition:function(c){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(c)},flattenToArrayOffset:function(c,a){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(c,a)},getPosition:function(){var c;
return function(){void 0===c&&(c=new q);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return c.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(c){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(c)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(c){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return c.applyMatrix4(this)},multiplyVector4:function(c){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return c.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(c){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");c.transformDirection(this)},crossVector:function(c){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return c.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(c){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");
return this.applyToBufferAttribute(c)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(c,a,b,d,e,g){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(c,a,d,b,e,g)}});aa.prototype.isIntersectionLine=function(c){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(c)};
N.prototype.multiplyVector3=function(c){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return c.applyQuaternion(this)};Object.assign(va.prototype,{isIntersectionBox:function(c){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(c)},isIntersectionPlane:function(c){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(c)},
isIntersectionSphere:function(c){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(c)}});Object.assign(h.Shape.prototype,{extractAllPoints:function(c){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(c)},extrude:function(c){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Sa(this,c)},makeGeometry:function(c){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");
return new Fb(this,c)}});Object.assign(y.prototype,{fromAttribute:function(c,a,b){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(c,a,b)},distanceToManhattan:function(c){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(c)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});
Object.assign(q.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(c){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(c)},
getScaleFromMatrix:function(c){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(c)},getColumnFromMatrix:function(c,a){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,c)},applyProjection:function(c){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(c)},fromAttribute:function(c,
a,b){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(c,a,b)},distanceToManhattan:function(c){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(c)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(J.prototype,{fromAttribute:function(c,
a,b){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(c,a,b)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(h.Geometry.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")}});Object.assign(h.Object3D.prototype,{getChildByName:function(c){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");
return this.getObjectByName(c)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(c,a){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(a,c)}});Object.defineProperties(h.Object3D.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(c){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");
this.rotation.order=c}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(h.LOD.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(rb.prototype,"useVertexTexture",
{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(h.Curve.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(c){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=c}});h.PerspectiveCamera.prototype.setLens=
function(c,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==a&&(this.filmGauge=a);this.setFocalLength(c)};Object.defineProperties(h.Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(c){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=c}},shadowCameraLeft:{set:function(c){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");
this.shadow.camera.left=c}},shadowCameraRight:{set:function(c){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=c}},shadowCameraTop:{set:function(c){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=c}},shadowCameraBottom:{set:function(c){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=c}},shadowCameraNear:{set:function(c){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");
this.shadow.camera.near=c}},shadowCameraFar:{set:function(c){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=c}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(c){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=c}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},
shadowMapWidth:{set:function(c){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=c}},shadowMapHeight:{set:function(c){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=c}}});Object.defineProperties(G.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(h.BufferGeometry.prototype,{addIndex:function(c){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");
this.setIndex(c)},addDrawCall:function(c,a,b){void 0!==b&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(c,a)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});
Object.defineProperties(h.BufferGeometry.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(Nd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");
return this}}});Object.defineProperties(h.Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new h.Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(c){console.warn("THREE."+
this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=1===c}}});Object.defineProperties(Ua.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(h.ShaderMaterial.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");
return this.extensions.derivatives},set:function(c){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=c}}});Object.assign(ob.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},
getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");
return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},
supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(c){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(c)},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},
updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(ob.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=c}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");
this.shadowMap.type=c}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Bc.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},
renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});
Object.defineProperties(Ja.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=c}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=c}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");
return this.texture.magFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=c}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=c}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return this.texture.anisotropy},set:function(c){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=c}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(c){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=c}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},
set:function(c){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=c}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(c){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=c}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(c){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
this.texture.type=c}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(c){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=c}}});Object.defineProperties(Lc.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});Wb.prototype.load=function(c){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
var a=this;(new Jd).load(c,function(b){a.setBuffer(b)});return this};Ld.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Kd.prototype.updateCubeMap=function(c,a){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(c,a)};h.WebGLRenderTargetCube=yc;h.WebGLRenderTarget=Ja;h.WebGLRenderer=ob;h.ShaderLib=Ea;h.UniformsLib=C;h.UniformsUtils=Q;h.ShaderChunk=H;h.FogExp2=Nc;h.Fog=Oc;h.LensFlare=
Ye;h.Sprite=qb;h.SkinnedMesh=Qc;h.Skeleton=rb;h.Bone=Pc;h.Mesh=fa;h.LineSegments=M;h.LineLoop=Rc;h.Line=ka;h.Points=Pa;h.Group=sb;h.VideoTexture=Ze;h.DataTexture=eb;h.CompressedTexture=Sc;h.CubeTexture=fb;h.CanvasTexture=Ac;h.DepthTexture=$e;h.Texture=Y;h.CompressedTextureLoader=cf;h.DataTextureLoader=pd;h.CubeTextureLoader=qd;h.TextureLoader=Lb;h.ObjectLoader=ff;h.MaterialLoader=Tb;h.BufferGeometryLoader=Ed;h.DefaultLoadingManager=V;h.LoadingManager=Kb;h.JSONLoader=Fd;h.ImageLoader=Va;h.ImageBitmapLoader=
gf;h.FontLoader=hf;h.FileLoader=ja;h.Loader=Ub;h.LoaderUtils=Vb;h.Cache=ua;h.AudioLoader=Jd;h.SpotLightShadow=td;h.SpotLight=ud;h.PointLight=vd;h.HemisphereLight=sd;h.DirectionalLightShadow=wd;h.DirectionalLight=xd;h.AmbientLight=yd;h.StereoCamera=jf;h.CubeCamera=Kd;h.ArrayCamera=Kc;h.AudioListener=kf;h.PositionalAudio=lf;h.AudioAnalyser=Ld;h.Audio=Wb;h.VectorKeyframeTrack=Rb;h.StringKeyframeTrack=mf;h.QuaternionKeyframeTrack=Cd;h.NumberKeyframeTrack=Sb;h.ColorKeyframeTrack=nf;h.BooleanKeyframeTrack=
of;h.PropertyMixer=Md;h.AnimationUtils=R;h.AnimationMixer=pf;h.Uniform=Nd;h.InstancedBufferGeometry=qf;h.InterleavedBufferAttribute=rf;h.InstancedInterleavedBuffer=sf;h.InterleavedBuffer=Od;h.InstancedBufferAttribute=tf;h.Face3=oa;h.Layers=Cc;h.EventDispatcher=ma;h.Clock=uf;h.QuaternionLinearInterpolant=Bd;h.LinearInterpolant=Qb;h.DiscreteInterpolant=Ad;h.CubicInterpolant=zd;h.Interpolant=Ha;h.Triangle=mb;h.Math=E;h.Spherical=vf;h.Cylindrical=wf;h.Plane=aa;h.Frustum=jb;h.Sphere=ia;h.Ray=va;h.Matrix4=
F;h.Matrix3=Z;h.Box3=na;h.Box2=Pd;h.Line3=Fa;h.Euler=kb;h.Vector4=J;h.Vector3=q;h.Vector2=y;h.Quaternion=N;h.ImmediateRenderObject=xf;h.VertexNormalsHelper=yf;h.SpotLightHelper=zf;h.SkeletonHelper=Qd;h.PointLightHelper=Af;h.RectAreaLightHelper=Bf;h.HemisphereLightHelper=Cf;h.GridHelper=Rd;h.PolarGridHelper=Df;h.FaceNormalsHelper=Ef;h.DirectionalLightHelper=Ff;h.CameraHelper=Gf;h.BoxHelper=Sd;h.Box3Helper=Hf;h.PlaneHelper=If;h.ArrowHelper=Jf;h.AxesHelper=Td;h.ShapePath=Id;h.ShapeUtils=qa;h.WebGLUtils=
Mc;h.WireframeGeometry=tb;h.ParametricGeometry=Tc;h.ParametricBufferGeometry=ub;h.TetrahedronGeometry=Vc;h.TetrahedronBufferGeometry=vb;h.OctahedronGeometry=Wc;h.OctahedronBufferGeometry=Qa;h.IcosahedronGeometry=Xc;h.IcosahedronBufferGeometry=wb;h.DodecahedronGeometry=Yc;h.DodecahedronBufferGeometry=xb;h.PolyhedronGeometry=Uc;h.PolyhedronBufferGeometry=ta;h.TubeGeometry=Zc;h.TubeBufferGeometry=yb;h.TorusKnotGeometry=$c;h.TorusKnotBufferGeometry=zb;h.TorusGeometry=ad;h.TorusBufferGeometry=Ab;h.TextGeometry=
bd;h.TextBufferGeometry=Bb;h.SphereGeometry=cd;h.SphereBufferGeometry=Ta;h.RingGeometry=dd;h.RingBufferGeometry=Cb;h.PlaneGeometry=Jc;h.PlaneBufferGeometry=Oa;h.LatheGeometry=ed;h.LatheBufferGeometry=Db;h.ShapeGeometry=Fb;h.ShapeBufferGeometry=Eb;h.ExtrudeGeometry=Sa;h.ExtrudeBufferGeometry=Ra;h.EdgesGeometry=Gb;h.ConeGeometry=fd;h.ConeBufferGeometry=gd;h.CylinderGeometry=Hb;h.CylinderBufferGeometry=Ga;h.CircleGeometry=hd;h.CircleBufferGeometry=Ib;h.BoxGeometry=lb;h.BoxBufferGeometry=Na;h.ShadowMaterial=
id;h.SpriteMaterial=pb;h.RawShaderMaterial=jd;h.PointsMaterial=wa;h.MeshPhysicalMaterial=kd;h.MeshStandardMaterial=Jb;h.MeshPhongMaterial=Ua;h.MeshToonMaterial=ld;h.MeshNormalMaterial=md;h.MeshLambertMaterial=nd;h.MeshDepthMaterial=hb;h.MeshDistanceMaterial=ib;h.MeshBasicMaterial=pa;h.LineDashedMaterial=od;h.LineBasicMaterial=L;h.BufferAttribute=G;h.Int8BufferAttribute=Dc;h.Uint8BufferAttribute=Ec;h.Uint8ClampedBufferAttribute=Fc;h.Int16BufferAttribute=Gc;h.Uint16BufferAttribute=La;h.Int32BufferAttribute=
Hc;h.Uint32BufferAttribute=Ma;h.Float32BufferAttribute=w;h.Float64BufferAttribute=Ic;h.ArcCurve=rd;h.REVISION="91dev-ts-a";h.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2};h.CullFaceNone=0;h.CullFaceBack=1;h.CullFaceFront=2;h.CullFaceFrontBack=3;h.FrontFaceDirectionCW=0;h.FrontFaceDirectionCCW=1;h.BasicShadowMap=0;h.PCFShadowMap=1;h.PCFSoftShadowMap=2;h.FrontSide=0;h.BackSide=1;h.DoubleSide=2;h.FlatShading=1;h.SmoothShading=2;h.NoColors=0;h.FaceColors=1;h.VertexColors=2;h.NoBlending=0;h.NormalBlending=1;h.AdditiveBlending=
2;h.SubtractiveBlending=3;h.MultiplyBlending=4;h.CustomBlending=5;h.AddEquation=100;h.SubtractEquation=101;h.ReverseSubtractEquation=102;h.MinEquation=103;h.MaxEquation=104;h.ZeroFactor=200;h.OneFactor=201;h.SrcColorFactor=202;h.OneMinusSrcColorFactor=203;h.SrcAlphaFactor=204;h.OneMinusSrcAlphaFactor=205;h.DstAlphaFactor=206;h.OneMinusDstAlphaFactor=207;h.DstColorFactor=208;h.OneMinusDstColorFactor=209;h.SrcAlphaSaturateFactor=210;h.NeverDepth=0;h.AlwaysDepth=1;h.LessDepth=2;h.LessEqualDepth=3;h.EqualDepth=
4;h.GreaterEqualDepth=5;h.GreaterDepth=6;h.NotEqualDepth=7;h.MultiplyOperation=0;h.MixOperation=1;h.AddOperation=2;h.NoToneMapping=0;h.LinearToneMapping=1;h.ReinhardToneMapping=2;h.Uncharted2ToneMapping=3;h.CineonToneMapping=4;h.UVMapping=300;h.CubeReflectionMapping=301;h.CubeRefractionMapping=302;h.EquirectangularReflectionMapping=303;h.EquirectangularRefractionMapping=304;h.SphericalReflectionMapping=305;h.CubeUVReflectionMapping=306;h.CubeUVRefractionMapping=307;h.RepeatWrapping=1E3;h.ClampToEdgeWrapping=
1001;h.MirroredRepeatWrapping=1002;h.NearestFilter=1003;h.NearestMipMapNearestFilter=1004;h.NearestMipMapLinearFilter=1005;h.LinearFilter=1006;h.LinearMipMapNearestFilter=1007;h.LinearMipMapLinearFilter=1008;h.UnsignedByteType=1009;h.ByteType=1010;h.ShortType=1011;h.UnsignedShortType=1012;h.IntType=1013;h.UnsignedIntType=1014;h.FloatType=1015;h.HalfFloatType=1016;h.UnsignedShort4444Type=1017;h.UnsignedShort5551Type=1018;h.UnsignedShort565Type=1019;h.UnsignedInt248Type=1020;h.AlphaFormat=1021;h.RGBFormat=
1022;h.RGBAFormat=1023;h.LuminanceFormat=1024;h.LuminanceAlphaFormat=1025;h.RGBEFormat=1023;h.DepthFormat=1026;h.DepthStencilFormat=1027;h.RGB_S3TC_DXT1_Format=33776;h.RGBA_S3TC_DXT1_Format=33777;h.RGBA_S3TC_DXT3_Format=33778;h.RGBA_S3TC_DXT5_Format=33779;h.RGB_PVRTC_4BPPV1_Format=35840;h.RGB_PVRTC_2BPPV1_Format=35841;h.RGBA_PVRTC_4BPPV1_Format=35842;h.RGBA_PVRTC_2BPPV1_Format=35843;h.RGB_ETC1_Format=36196;h.RGBA_ASTC_4x4_Format=37808;h.RGBA_ASTC_5x4_Format=37809;h.RGBA_ASTC_5x5_Format=37810;h.RGBA_ASTC_6x5_Format=
37811;h.RGBA_ASTC_6x6_Format=37812;h.RGBA_ASTC_8x5_Format=37813;h.RGBA_ASTC_8x6_Format=37814;h.RGBA_ASTC_8x8_Format=37815;h.RGBA_ASTC_10x5_Format=37816;h.RGBA_ASTC_10x6_Format=37817;h.RGBA_ASTC_10x8_Format=37818;h.RGBA_ASTC_10x10_Format=37819;h.RGBA_ASTC_12x10_Format=37820;h.RGBA_ASTC_12x12_Format=37821;h.LoopOnce=2200;h.LoopRepeat=2201;h.LoopPingPong=2202;h.InterpolateDiscrete=2300;h.InterpolateLinear=2301;h.InterpolateSmooth=2302;h.ZeroCurvatureEnding=2400;h.ZeroSlopeEnding=2401;h.WrapAroundEnding=
2402;h.TrianglesDrawMode=0;h.TriangleStripDrawMode=1;h.TriangleFanDrawMode=2;h.LinearEncoding=3E3;h.sRGBEncoding=3001;h.GammaEncoding=3007;h.RGBEEncoding=3002;h.LogLuvEncoding=3003;h.RGBM7Encoding=3004;h.RGBM16Encoding=3005;h.RGBDEncoding=3006;h.BasicDepthPacking=3200;h.RGBADepthPacking=3201;h.CubeGeometry=lb;h.Face4=function(c,a,b,d,e,g,f){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new oa(c,a,b,e,g,f)};h.LineStrip=0;h.LinePieces=1;h.MeshFaceMaterial=
function(c){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return c};h.MultiMaterial=function(c){void 0===c&&(c=[]);console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");c.isMultiMaterial=!0;c.materials=c;c.clone=function(){return c.slice()};return c};h.PointCloud=function(c,a){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Pa(c,a)};h.Particle=function(c){console.warn("THREE.Particle has been renamed to THREE.Sprite.");
return new qb(c)};h.ParticleSystem=function(c,a){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Pa(c,a)};h.PointCloudMaterial=function(c){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new wa(c)};h.ParticleBasicMaterial=function(c){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new wa(c)};h.ParticleSystemMaterial=function(c){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");
return new wa(c)};h.Vertex=function(c,a,b){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new q(c,a,b)};h.DynamicBufferAttribute=function(c,a){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return(new G(c,a)).setDynamic(!0)};h.Int8Attribute=function(c,a){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new Dc(c,a)};h.Uint8Attribute=
function(c,a){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new Ec(c,a)};h.Uint8ClampedAttribute=function(c,a){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new Fc(c,a)};h.Int16Attribute=function(c,a){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new Gc(c,a)};h.Uint16Attribute=function(c,a){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");
return new La(c,a)};h.Int32Attribute=function(c,a){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new Hc(c,a)};h.Uint32Attribute=function(c,a){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new Ma(c,a)};h.Float32Attribute=function(c,a){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new w(c,a)};h.Float64Attribute=
function(c,a){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ic(c,a)};h.ClosedSplineCurve3=wc;h.SplineCurve3=xc;h.Spline=db;h.AxisHelper=function(c){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new Td(c)};h.BoundingBoxHelper=function(c,a){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Sd(c,a)};h.EdgesHelper=function(c,a){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");
return new M(new Gb(c.geometry),new L({color:void 0!==a?a:16777215}))};h.WireframeHelper=function(c,a){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new M(new tb(c.geometry),new L({color:void 0!==a?a:16777215}))};h.XHRLoader=function(c){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new ja(c)};h.BinaryTextureLoader=function(c){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new pd(c)};
h.GeometryUtils={merge:function(c,a,b){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");if(a.isMesh){a.matrixAutoUpdate&&a.updateMatrix();var d=a.matrix;a=a.geometry}c.merge(a,d,b)},center:function(c){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return c.center()}};h.ImageUtils={crossOrigin:void 0,loadTexture:function(c,a,b,d){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
var e=new Lb;e.setCrossOrigin(this.crossOrigin);c=e.load(c,b,void 0,d);a&&(c.mapping=a);return c},loadTextureCube:function(c,a,b,d){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var e=new qd;e.setCrossOrigin(this.crossOrigin);c=e.load(c,b,void 0,d);a&&(c.mapping=a);return c},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};
h.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.");this.projectVector=function(c,a){console.warn("THREE.Projector: .projectVector() is now vector.project().");c.project(a)};this.unprojectVector=function(c,a){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");c.unproject(a)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}};h.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer");
this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}};Object.defineProperty(h,"__esModule",{value:!0})});
